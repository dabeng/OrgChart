"use strict";!function(e){"object"==typeof module&&"object"==typeof module.exports?e(require("jquery"),window,document):e(jQuery,window,document)}(function(e,t,i,n){var s=function(t,i){this.$chartContainer=e(t),this.opts=i,this.defaultOptions={nodeTitle:"name",nodeId:"id",toggleSiblingsResp:!1,depth:999,chartClass:"",exportButton:!1,exportFilename:"OrgChart",exportFileextension:"png",parentNodeSymbol:"fa-users",draggable:!1,direction:"t2b",pan:!1,zoom:!1,zoominLimit:7,zoomoutLimit:.5}};s.prototype={init:function(t){var i=this;this.options=e.extend({},this.defaultOptions,this.opts,t);var n=this.$chartContainer;this.$chart&&this.$chart.remove();var s=this.options.data,a=this.$chart=e("<div>",{data:{options:this.options},class:"orgchart"+(""!==this.options.chartClass?" "+this.options.chartClass:"")+("t2b"!==this.options.direction?" "+this.options.direction:""),click:function(t){e(t.target).closest(".node").length||a.find(".node.focused").removeClass("focused")}});return"undefined"!=typeof MutationObserver&&this.triggerInitEvent(),"object"===e.type(s)?s instanceof e?this.buildHierarchy(a,this.buildJsonDS(s.children()),0,this.options):this.buildHierarchy(a,this.options.ajaxURL?s:this.attachRel(s,"00"),0,this.options):(a.append('<i class="fa fa-circle-o-notch fa-spin spinner"></i>'),e.ajax({url:s,dataType:"json"}).done(function(e,t,n){i.buildHierarchy(a,i.options.ajaxURL?e:i.attachRel(e,"00"),0,i.options)}).fail(function(e,t,i){console.log(i)}).always(function(){a.children(".spinner").remove()})),n.append(a),this.options.exportButton&&!n.find(".oc-export-btn").length&&this.attachExportButton(),this.options.pan&&this.bindPan(),this.options.zoom&&this.bindZoom(),this},triggerInitEvent:function(){var t=this,i=new MutationObserver(function(n){i.disconnect();e:for(var s=0;s<n.length;s++)for(var a=0;a<n[s].addedNodes.length;a++)if(n[s].addedNodes[a].classList.contains("orgchart")&&t.options.initCompleted&&"function"==typeof t.options.initCompleted){t.options.initCompleted(t.$chart);var d=e.Event("init.orgchart");t.$chart.trigger(d);break e}});i.observe(this.$chartContainer[0],{childList:!0})},attachExportButton:function(){var t=this,i=e("<button>",{class:"oc-export-btn"+(""!==this.options.chartClass?" "+this.options.chartClass:""),text:"Export",click:function(e){e.preventDefault(),t.export()}});this.$chartContainer.append(i)},setOptions:function(e,t){return"string"==typeof e&&("pan"===e&&(t?this.bindPan():this.unbindPan()),"zoom"===e&&(t?this.bindZoom():this.unbindZoom())),"object"==typeof e&&(e.data?this.init(e):(void 0!==e.pan&&(e.pan?this.bindPan():this.unbindPan()),void 0!==e.zoom&&(e.zoom?this.bindZoom():this.unbindZoom()))),this},panStartHandler:function(t){var i=e(t.delegateTarget);if(e(t.target).closest(".node").length||t.touches&&t.touches.length>1)i.data("panning",!1);else{i.css("cursor","move").data("panning",!0);var n=0,s=0,a=i.css("transform");if("none"!==a){var d=a.split(",");-1===a.indexOf("3d")?(n=parseInt(d[4]),s=parseInt(d[5])):(n=parseInt(d[12]),s=parseInt(d[13]))}var o=0,r=0;if(t.targetTouches){if(1===t.targetTouches.length)o=t.targetTouches[0].pageX-n,r=t.targetTouches[0].pageY-s;else if(t.targetTouches.length>1)return}else o=t.pageX-n,r=t.pageY-s;i.on("mousemove touchmove",function(e){if(i.data("panning")){var t=0,n=0;if(e.targetTouches){if(1===e.targetTouches.length)t=e.targetTouches[0].pageX-o,n=e.targetTouches[0].pageY-r;else if(e.targetTouches.length>1)return}else t=e.pageX-o,n=e.pageY-r;var s=i.css("transform");if("none"===s)-1===s.indexOf("3d")?i.css("transform","matrix(1, 0, 0, 1, "+t+", "+n+")"):i.css("transform","matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+t+", "+n+", 0, 1)");else{var a=s.split(",");-1===s.indexOf("3d")?(a[4]=" "+t,a[5]=" "+n+")"):(a[12]=" "+t,a[13]=" "+n),i.css("transform",a.join(","))}}})}},panEndHandler:function(e){e.data.chart.data("panning")&&e.data.chart.data("panning",!1).css("cursor","default").off("mousemove")},bindPan:function(){this.$chartContainer.css("overflow","hidden"),this.$chart.on("mousedown touchstart",this.panStartHandler),e(i).on("mouseup touchend",{chart:this.$chart},this.panEndHandler)},unbindPan:function(){this.$chartContainer.css("overflow","auto"),this.$chart.off("mousedown touchstart",this.panStartHandler),e(i).off("mouseup touchend",this.panEndHandler)},zoomWheelHandler:function(e){var t=e.data.oc;e.preventDefault();var i=1+(e.originalEvent.deltaY>0?-.2:.2);t.setChartScale(t.$chart,i)},zoomStartHandler:function(e){if(e.touches&&2===e.touches.length){var t=e.data.oc;t.$chart.data("pinching",!0);var i=t.getPinchDist(e);t.$chart.data("pinchDistStart",i)}},zoomingHandler:function(e){var t=e.data.oc;if(t.$chart.data("pinching")){var i=t.getPinchDist(e);t.$chart.data("pinchDistEnd",i)}},zoomEndHandler:function(e){var t=e.data.oc;if(t.$chart.data("pinching")){t.$chart.data("pinching",!1);var i=t.$chart.data("pinchDistEnd")-t.$chart.data("pinchDistStart");i>0?t.setChartScale(t.$chart,1.2):i<0&&t.setChartScale(t.$chart,.8)}},bindZoom:function(){this.$chartContainer.on("wheel",{oc:this},this.zoomWheelHandler),this.$chartContainer.on("touchstart",{oc:this},this.zoomStartHandler),e(i).on("touchmove",{oc:this},this.zoomingHandler),e(i).on("touchend",{oc:this},this.zoomEndHandler)},unbindZoom:function(){this.$chartContainer.off("wheel",this.zoomWheelHandler),this.$chartContainer.off("touchstart",this.zoomStartHandler),e(i).off("touchmove",this.zoomingHandler),e(i).off("touchend",this.zoomEndHandler)},getPinchDist:function(e){return Math.sqrt((e.touches[0].clientX-e.touches[1].clientX)*(e.touches[0].clientX-e.touches[1].clientX)+(e.touches[0].clientY-e.touches[1].clientY)*(e.touches[0].clientY-e.touches[1].clientY))},setChartScale:function(e,i){var n=e.data("options"),s=e.css("transform"),a="",d=1;"none"===s?e.css("transform","scale("+i+","+i+")"):(a=s.split(","),-1===s.indexOf("3d")?(d=Math.abs(t.parseFloat(a[3])*i))>n.zoomoutLimit&&d<n.zoominLimit&&e.css("transform",s+" scale("+i+","+i+")"):(d=Math.abs(t.parseFloat(a[1])*i))>n.zoomoutLimit&&d<n.zoominLimit&&e.css("transform",s+" scale3d("+i+","+i+", 1)"))},buildJsonDS:function(t){var i=this,n={name:t.contents().eq(0).text().trim(),relationship:(t.parent().parent().is("li")?"1":"0")+(t.siblings("li").length?1:0)+(t.children("ul").length?1:0)};return t.attr("data-id")&&(n.id=t.attr("data-id")),t.children("ul").children().each(function(){n.children||(n.children=[]),n.children.push(i.buildJsonDS(e(this)))}),n},attachRel:function(e,t){var i=this;return e.relationship=t+(e.children&&e.children.length>0?1:0),e.children&&e.children.forEach(function(t){i.attachRel(t,"1"+(e.children.length>1?1:0))}),e},loopChart:function(t){var i=this,n=t.find("tr:first"),s={id:n.find(".node")[0].id};return n.siblings(":last").children().each(function(){s.children||(s.children=[]),s.children.push(i.loopChart(e(this)))}),s},getHierarchy:function(){if(void 0===this.$chart)return"Error: orgchart does not exist";if(!this.$chart.find(".node").length)return"Error: nodes do not exist";var e=!0;return this.$chart.find(".node").each(function(){if(!this.id)return e=!1,!1}),e?this.loopChart(this.$chart):"Error: All nodes of orghcart to be exported must have data-id attribute!"},getNodeState:function(e,t){var i={};if("parent"===(t=t||"self")){if((i=e.closest(".nodes").siblings(":first")).length)return i.is(".hidden")||!i.is(".hidden")&&i.closest(".nodes").is(".hidden")?{exist:!0,visible:!1}:{exist:!0,visible:!0}}else if("children"===t){if((i=e.closest("tr").siblings(":last")).length)return i.is(".hidden")?{exist:!0,visible:!1}:{exist:!0,visible:!0}}else if("siblings"===t){if((i=e.closest("table").parent().siblings()).length)return i.is(".hidden")||i.parent().is(".hidden")?{exist:!0,visible:!1}:{exist:!0,visible:!0}}else if((i=e).length)return i.closest(".nodes").length&&i.closest(".nodes").is(".hidden")||i.closest("table").parent().length&&i.closest("table").parent().is(".hidden")||i.parent().is("li")&&(i.closest("ul").is(".hidden")||i.closest("verticalNodes").is(".hidden"))?{exist:!0,visible:!1}:{exist:!0,visible:!0};return{exist:!1,visible:!1}},getRelatedNodes:function(t,i){return t&&t instanceof e&&t.is(".node")?"parent"===i?t.closest(".nodes").parent().children(":first").find(".node"):"children"===i?t.closest("tr").siblings(".nodes").children().find(".node:first"):"siblings"===i?t.closest("table").parent().siblings().find(".node:first"):e():e()},hideParentEnd:function(t){e(t.target).removeClass("sliding"),t.data.upperLevel.addClass("hidden").slice(1).removeAttr("style")},hideParent:function(e){var t=e.closest(".nodes").siblings();t.eq(0).find(".spinner").length&&e.closest(".orgchart").data("inAjax",!1),this.getNodeState(e,"siblings").visible&&this.hideSiblings(e),t.slice(1).css("visibility","hidden");var i=t.eq(0).find(".node");this.getNodeState(i).visible&&i.addClass("sliding slide-down").one("transitionend",{upperLevel:t},this.hideParentEnd),this.getNodeState(i,"parent").visible&&this.hideParent(i)},showParentEnd:function(t){var i=t.data.node;e(t.target).removeClass("sliding"),this.isInAction(i)&&this.switchVerticalArrow(i.children(".topEdge"))},showParent:function(e){var t=e.closest(".nodes").siblings().removeClass("hidden");t.eq(2).children().slice(1,-1).addClass("hidden");var i=t.eq(0).find(".node");this.repaint(i[0]),i.addClass("sliding").removeClass("slide-down").one("transitionend",{node:e},this.showParentEnd.bind(this))},stopAjax:function(e){e.find(".spinner").length&&e.closest(".orgchart").data("inAjax",!1)},isVisibleNode:function(t,i){return this.getNodeState(e(i)).visible},hideChildrenEnd:function(e){e.data.visibleNodes.removeClass("sliding"),e.data.isVerticalDesc?e.data.lowerLevel.addClass("hidden"):(e.data.visibleNodes.closest("table").closest("tr").prevAll(".lines").removeAttr("style").addClass("hidden").siblings(".nodes").addClass("hidden"),e.data.lowerLevel.last().find(".verticalNodes").addClass("hidden")),this.isInAction(e.data.node)&&this.switchVerticalArrow(e.data.node.children(".bottomEdge"))},hideChildren:function(e){var t=e.closest("tr").siblings();this.stopAjax(t.last());var i=t.last().find(".node").filter(this.isVisibleNode.bind(this)),n=!!t.last().is(".verticalNodes");n||i.closest("table").closest("tr").prevAll(".lines").css("visibility","hidden"),this.repaint(i.get(0)),i.addClass("sliding slide-up").eq(0).one("transitionend",{visibleNodes:i,lowerLevel:t,isVerticalDesc:n,node:e},this.hideChildrenEnd.bind(this))},showChildrenEnd:function(e){var t=e.data.node;e.data.descendants.removeClass("sliding"),this.isInAction(t)&&this.switchVerticalArrow(t.children(".bottomEdge"))},showChildren:function(e){var t=e.closest("tr").siblings(),i=!!t.is(".verticalNodes")?t.removeClass("hidden").find(".node").filter(this.isVisibleNode.bind(this)):t.removeClass("hidden").eq(2).children().find(".node:first").filter(this.isVisibleNode.bind(this));this.repaint(i.get(0)),i.addClass("sliding").removeClass("slide-up").eq(0).one("transitionend",{node:e,descendants:i},this.showChildrenEnd.bind(this))},hideSiblingsEnd:function(e){var t=e.data.node,i=e.data.nodeContainer,n=e.data.direction;e.data.lines.removeAttr("style");var s=n?"left"===n?i.prevAll(":not(.hidden)"):i.nextAll(":not(.hidden)"):i.siblings();i.closest(".nodes").prev().children(":not(.hidden)").slice(1,n?2*s.length+1:-1).addClass("hidden"),e.data.animatedNodes.removeClass("sliding"),s.find(".node:gt(0)").filter(this.isVisibleNode.bind(this)).removeClass("slide-left slide-right").addClass("slide-up"),s.find(".lines, .nodes, .verticalNodes").addClass("hidden").end().addClass("hidden"),this.isInAction(t)&&this.switchHorizontalArrow(t)},hideSiblings:function(e,t){var i=e.closest("table").parent();i.siblings().find(".spinner").length&&e.closest(".orgchart").data("inAjax",!1),t?"left"===t?i.prevAll().find(".node").filter(this.isVisibleNode.bind(this)).addClass("sliding slide-right"):i.nextAll().find(".node").filter(this.isVisibleNode.bind(this)).addClass("sliding slide-left"):(i.prevAll().find(".node").filter(this.isVisibleNode.bind(this)).addClass("sliding slide-right"),i.nextAll().find(".node").filter(this.isVisibleNode.bind(this)).addClass("sliding slide-left"));var n=i.siblings().find(".sliding"),s=n.closest(".nodes").prevAll(".lines").css("visibility","hidden");n.eq(0).one("transitionend",{node:e,nodeContainer:i,direction:t,animatedNodes:n,lines:s},this.hideSiblingsEnd.bind(this))},showSiblingsEnd:function(e){var t=e.data.node;e.data.visibleNodes.removeClass("sliding"),this.isInAction(t)&&(this.switchHorizontalArrow(t),t.children(".topEdge").removeClass("fa-chevron-up").addClass("fa-chevron-down"))},showRelatedParentEnd:function(t){e(t.target).removeClass("sliding")},showSiblings:function(t,i){var n=e();n=i?"left"===i?t.closest("table").parent().prevAll().removeClass("hidden"):t.closest("table").parent().nextAll().removeClass("hidden"):t.closest("table").parent().siblings().removeClass("hidden");var s=t.closest("table").closest("tr").siblings();if(i?s.eq(2).children(".hidden").slice(0,2*n.length).removeClass("hidden"):s.eq(2).children(".hidden").removeClass("hidden"),!this.getNodeState(t,"parent").visible){s.removeClass("hidden");var a=s.find(".node")[0];this.repaint(a),e(a).addClass("sliding").removeClass("slide-down").one("transitionend",this.showRelatedParentEnd)}var d=n.find(".node").filter(this.isVisibleNode.bind(this));this.repaint(d.get(0)),d.addClass("sliding").removeClass("slide-left slide-right"),d.eq(0).one("transitionend",{node:t,visibleNodes:d},this.showSiblingsEnd.bind(this))},startLoading:function(t){var i=this.$chart;return(void 0===i.data("inAjax")||!0!==i.data("inAjax"))&&(t.addClass("hidden"),t.parent().append('<i class="fa fa-circle-o-notch fa-spin spinner"></i>').children().not(".spinner").css("opacity",.2),i.data("inAjax",!0),e(".oc-export-btn"+(""!==this.options.chartClass?"."+this.options.chartClass:"")).prop("disabled",!0),!0)},endLoading:function(t){var i=t.parent();t.removeClass("hidden"),i.find(".spinner").remove(),i.children().removeAttr("style"),this.$chart.data("inAjax",!1),e(".oc-export-btn"+(""!==this.options.chartClass?"."+this.options.chartClass:"")).prop("disabled",!1)},isInAction:function(e){return e.children(".edge").attr("class").indexOf("fa-")>-1},switchVerticalArrow:function(e){e.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down")},switchHorizontalArrow:function(e){var t=e.closest(".orgchart").data("options");if(t.toggleSiblingsResp&&(void 0===t.ajaxURL||e.closest(".nodes").data("siblingsLoaded"))){var i=e.closest("table").parent().prev();i.length&&(i.is(".hidden")?e.children(".leftEdge").addClass("fa-chevron-left").removeClass("fa-chevron-right"):e.children(".leftEdge").addClass("fa-chevron-right").removeClass("fa-chevron-left"));var n=e.closest("table").parent().next();n.length&&(n.is(".hidden")?e.children(".rightEdge").addClass("fa-chevron-right").removeClass("fa-chevron-left"):e.children(".rightEdge").addClass("fa-chevron-left").removeClass("fa-chevron-right"))}else{var s=e.closest("table").parent().siblings(),a=!!s.length&&!s.is(".hidden");e.children(".leftEdge").toggleClass("fa-chevron-right",a).toggleClass("fa-chevron-left",!a),e.children(".rightEdge").toggleClass("fa-chevron-left",a).toggleClass("fa-chevron-right",!a)}},repaint:function(e){e&&(e.style.offsetWidth=e.offsetWidth)},nodeEnterLeaveHandler:function(t){var i=e(t.delegateTarget),n=!1,s=i.children(".topEdge"),a=(i.children(".rightEdge"),i.children(".bottomEdge")),d=i.children(".leftEdge");"mouseenter"===t.type?(s.length&&(n=this.getNodeState(i,"parent").visible,s.toggleClass("fa-chevron-up",!n).toggleClass("fa-chevron-down",n)),a.length&&(n=this.getNodeState(i,"children").visible,a.toggleClass("fa-chevron-down",!n).toggleClass("fa-chevron-up",n)),d.length&&this.switchHorizontalArrow(i)):i.children(".edge").removeClass("fa-chevron-up fa-chevron-down fa-chevron-right fa-chevron-left")},nodeClickHandler:function(t){this.$chart.find(".focused").removeClass("focused"),e(t.delegateTarget).addClass("focused")},loadNodes:function(t,i,n){var s=this,a=this.options;e.ajax({url:i,dataType:"json"}).done(function(i){s.$chart.data("inAjax")&&("parent"===t?e.isEmptyObject(i)||s.addParent(n.parent(),i,a):"children"===t?i.children.length&&s.addChildren(n.parent(),i,e.extend({},a,{depth:0})):(i.siblings||i.children)&&s.addSiblings(n.parent(),i,a))}).fail(function(){console.log("Failed to get "+t+" data")}).always(function(){s.endLoading(n)})},HideFirstParentEnd:function(e){var t=e.data.topEdge,i=t.parent();this.isInAction(i)&&(this.switchVerticalArrow(t),this.switchHorizontalArrow(i))},topEdgeClickHandler:function(t){t.stopPropagation();var i=e(t.target),n=e(t.delegateTarget),s=this.getNodeState(n,"parent");if(s.exist){var a=n.closest("table").closest("tr").siblings(":first").find(".node");if(a.is(".sliding"))return;s.visible?(this.hideParent(n),a.one("transitionend",{topEdge:i},this.HideFirstParentEnd.bind(this))):this.showParent(n)}else if(this.startLoading(i)){var d=this.options,o=e.isFunction(d.ajaxURL.parent)?d.ajaxURL.parent(t.data.nodeData):d.ajaxURL.parent+n[0].id;this.loadNodes("parent",o,i)}},bottomEdgeClickHandler:function(t){t.stopPropagation();var i=e(t.target),n=e(t.delegateTarget),s=this.getNodeState(n,"children");if(s.exist){if(n.closest("tr").siblings(":last").find(".sliding").length)return;s.visible?this.hideChildren(n):this.showChildren(n)}else if(this.startLoading(i)){var a=this.options,d=e.isFunction(a.ajaxURL.children)?a.ajaxURL.children(t.data.nodeData):a.ajaxURL.children+n[0].id;this.loadNodes("children",d,i)}},hEdgeClickHandler:function(t){t.stopPropagation();var i=e(t.target),n=e(t.delegateTarget),s=this.options,a=this.getNodeState(n,"siblings");if(a.exist){if(n.closest("table").parent().siblings().find(".sliding").length)return;if(s.toggleSiblingsResp){var d=n.closest("table").parent().prev(),o=n.closest("table").parent().next();i.is(".leftEdge")?d.is(".hidden")?this.showSiblings(n,"left"):this.hideSiblings(n,"left"):o.is(".hidden")?this.showSiblings(n,"right"):this.hideSiblings(n,"right")}else a.visible?this.hideSiblings(n):this.showSiblings(n)}else if(this.startLoading(i)){var r=n[0].id,l=this.getNodeState(n,"parent").exist?e.isFunction(s.ajaxURL.siblings)?s.ajaxURL.siblings(t.data.nodeData):s.ajaxURL.siblings+r:e.isFunction(s.ajaxURL.families)?s.ajaxURL.families(t.data.nodeData):s.ajaxURL.families+r;this.loadNodes("siblings",l,i)}},expandVNodesEnd:function(e){e.data.vNodes.removeClass("sliding")},collapseVNodesEnd:function(e){e.data.vNodes.removeClass("sliding").closest("ul").addClass("hidden")},toggleVNodes:function(t){var i=e(t.target),n=i.parent().next(),s=n.find(".node"),a=n.children().children(".node");a.is(".sliding")||(i.toggleClass("fa-plus-square fa-minus-square"),s.eq(0).is(".slide-up")?(n.removeClass("hidden"),this.repaint(a.get(0)),a.addClass("sliding").removeClass("slide-up").eq(0).one("transitionend",{vNodes:a},this.expandVNodesEnd)):(s.addClass("sliding slide-up").eq(0).one("transitionend",{vNodes:s},this.collapseVNodesEnd),s.find(".toggleBtn").removeClass("fa-minus-square").addClass("fa-plus-square")))},createGhostNode:function(n){var s=e(n.target),a=this.options,d=n.originalEvent,o=/firefox/.test(t.navigator.userAgent.toLowerCase());o&&d.dataTransfer.setData("text/html","hack for firefox");var r,l;i.querySelector(".ghost-node")?(r=s.closest(".orgchart").children(".ghost-node").get(0),l=e(r).children().get(0)):((r=i.createElementNS("http://www.w3.org/2000/svg","svg")).classList.add("ghost-node"),l=i.createElementNS("http://www.w3.org/2000/svg","rect"),r.appendChild(l),s.closest(".orgchart").append(r));var h=s.closest(".orgchart").css("transform").split(","),c=Math.abs(t.parseFloat("t2b"===a.direction||"b2t"===a.direction?h[0].slice(h[0].indexOf("(")+1):h[1]));r.setAttribute("width",s.outerWidth(!1)),r.setAttribute("height",s.outerHeight(!1)),l.setAttribute("x",5*c),l.setAttribute("y",5*c),l.setAttribute("width",120*c),l.setAttribute("height",40*c),l.setAttribute("rx",4*c),l.setAttribute("ry",4*c),l.setAttribute("stroke-width",1*c);var g=d.offsetX*c,p=d.offsetY*c;if("l2r"===a.direction?(g=d.offsetY*c,p=d.offsetX*c):"r2l"===a.direction?(g=s.outerWidth(!1)-d.offsetY*c,p=d.offsetX*c):"b2t"===a.direction&&(g=s.outerWidth(!1)-d.offsetX*c,p=s.outerHeight(!1)-d.offsetY*c),o){l.setAttribute("fill","rgb(255, 255, 255)"),l.setAttribute("stroke","rgb(191, 0, 0)");var f=i.createElement("img");f.src="data:image/svg+xml;utf8,"+(new XMLSerializer).serializeToString(r),d.dataTransfer.setDragImage(f,g,p)}else d.dataTransfer.setDragImage(r,g,p)},filterAllowedDropNodes:function(t){var i=this.options,n=t.closest(".nodes").siblings().eq(0).find(".node:first"),s=t.closest("table").find(".node");this.$chart.data("dragged",t).find(".node").each(function(a,d){-1===s.index(d)&&(i.dropCriteria?i.dropCriteria(t,n,e(d))&&e(d).addClass("allowedDrop"):e(d).addClass("allowedDrop"))})},dragstartHandler:function(t){"none"!==this.$chart.css("transform")&&this.createGhostNode(t),this.filterAllowedDropNodes(e(t.target))},dragoverHandler:function(t){t.preventDefault(),e(t.delegateTarget).is(".allowedDrop")||(t.originalEvent.dataTransfer.dropEffect="none")},dragendHandler:function(e){this.$chart.find(".allowedDrop").removeClass("allowedDrop")},dropHandler:function(t){var i=e(t.delegateTarget),n=this.$chart.data("dragged"),s=n.closest(".nodes").siblings().eq(0).children(),a=e.Event("nodedrop.orgchart");if(this.$chart.trigger(a,{draggedNode:n,dragZone:s.children(),dropZone:i}),!a.isDefaultPrevented()){if(i.closest("tr").siblings().length){var d=parseInt(i.parent().attr("colspan"))+2,o='<i class="edge horizontalEdge rightEdge fa"></i><i class="edge horizontalEdge leftEdge fa"></i>';i.closest("tr").next().addBack().children().attr("colspan",d),n.find(".horizontalEdge").length||n.append(o),i.closest("tr").siblings().eq(1).children(":last").before('<td class="leftLine topLine"></td><td class="rightLine topLine"></td>').end().next().append(n.closest("table").parent());var r=n.closest("table").parent().siblings().find(".node:first");1===r.length&&r.append(o)}else i.append('<i class="edge verticalEdge bottomEdge fa"></i>').parent().attr("colspan",2).parent().after('<tr class="lines"><td colspan="2"><div class="downLine"></div></td></tr><tr class="lines"><td class="rightLine"></td><td class="leftLine"></td></tr><tr class="nodes"></tr>').siblings(":last").append(n.find(".horizontalEdge").remove().end().closest("table").parent());var l=parseInt(s.attr("colspan"));if(l>2){s.attr("colspan",l-2).parent().next().children().attr("colspan",l-2).end().next().children().slice(1,3).remove();var h=s.parent().siblings(".nodes").children().find(".node:first");1===h.length&&h.find(".horizontalEdge").remove()}else s.removeAttr("colspan").find(".bottomEdge").remove().end().end().siblings().remove()}},createNode:function(t,i,n){t.children||(t.children=[]),e.each(t.children,function(e,i){i.parentId=t.id});var s=e.Deferred(),a=e("<div"+(n.draggable?' draggable="true"':"")+(t[n.nodeId]?' id="'+t[n.nodeId]+'"':"")+(t.parentId?' data-parent="'+t.parentId+'"':"")+">").addClass("node "+(t.className||"")+(i>=n.depth?" slide-up":""));n.nodeTemplate?a.append(n.nodeTemplate(t)):a.append('<div class="title">'+t[n.nodeTitle]+"</div>").append(void 0!==n.nodeContent?'<div class="content">'+(t[n.nodeContent]||"")+"</div>":"");var d=t.relationship||"";if(n.verticalDepth&&i+2>n.verticalDepth){if(i+1>=n.verticalDepth&&Number(d.substr(2,1))){var o=i+1>=n.depth?"plus":"minus";a.append('<i class="toggleBtn fa fa-'+o+'-square"></i>')}}else Number(d.substr(0,1))&&a.append('<i class="edge verticalEdge topEdge fa"></i>'),Number(d.substr(1,1))&&a.append('<i class="edge horizontalEdge rightEdge fa"></i><i class="edge horizontalEdge leftEdge fa"></i>'),Number(d.substr(2,1))&&a.append('<i class="edge verticalEdge bottomEdge fa"></i>').children(".title").prepend('<i class="fa '+n.parentNodeSymbol+' symbol"></i>');return a.on("mouseenter mouseleave",this.nodeEnterLeaveHandler.bind(this)),a.on("click",this.nodeClickHandler.bind(this)),a.on("click",".topEdge",{nodeData:t},this.topEdgeClickHandler.bind(this)),a.on("click",".bottomEdge",{nodeData:t},this.bottomEdgeClickHandler.bind(this)),a.on("click",".leftEdge, .rightEdge",{nodeData:t},this.hEdgeClickHandler.bind(this)),a.on("click",".toggleBtn",this.toggleVNodes.bind(this)),n.draggable&&a.on("dragstart",this.dragstartHandler.bind(this)).on("dragover",this.dragoverHandler.bind(this)).on("dragend",this.dragendHandler.bind(this)).on("drop",this.dropHandler.bind(this)),n.createNode&&n.createNode(a,t),s.resolve(a),s.promise()},buildHierarchy:function(t,i,n,s,a){var d,o=this,r=i.children,l=!!r&&r.length,h=!!(s.verticalDepth&&n+1>=s.verticalDepth);if(Object.keys(i).length>1&&(d=h?t:e("<table>"),h||t.append(d),e.when(this.createNode(i,n,s)).done(function(t){h?d.append(t):d.append(e("<tr/>").append(e("<td"+(l?' colspan="'+2*r.length+'"':"")+"></td>").append(t))),a&&a()}).fail(function(){console.log("Failed to creat node")})),l){1===Object.keys(i).length&&(d=t);var c=n+1>=s.depth||i.collapsed?" hidden":"",g=!!(s.verticalDepth&&n+2>=s.verticalDepth);g||d.append('<tr class="lines'+c+'"><td colspan="'+2*r.length+'"><div class="downLine"></div></td></tr>');for(var p='<tr class="lines'+c+'"><td class="rightLine"></td>',f=1;f<r.length;f++)p+='<td class="leftLine topLine"></td><td class="rightLine topLine"></td>';p+='<td class="leftLine"></td></tr>';var v;g?(v=e("<ul>"),c&&s.depth+1!==s.verticalDepth&&v.addClass(c),n+2===s.verticalDepth?d.append('<tr class="verticalNodes'+c+'"><td></td></tr>').find(".verticalNodes").children().append(v):d.append(v)):(v=e('<tr class="nodes'+c+'">'),d.append(p).append(v)),e.each(r,function(){var t=e(g?"<li>":'<td colspan="2">');v.append(t),o.buildHierarchy(t,this,n+1,s,a)})}},buildChildNode:function(e,t,i,n){var i=i||e.closest(".orgchart").data("options"),s=t.children||t.siblings;e.find("td:first").attr("colspan",2*s.length),this.buildHierarchy(e,{children:s},0,i,n)},addChildren:function(e,t,i){var n=this,i=i||e.closest(".orgchart").data("options"),s=0;this.buildChildNode(e.closest("table"),t,i,function(){++s===t.children.length&&(e.children(".bottomEdge").length||e.append('<i class="edge verticalEdge bottomEdge fa"></i>'),e.find(".symbol").length||e.children(".title").prepend('<i class="fa '+i.parentNodeSymbol+' symbol"></i>'),n.showChildren(e))})},buildParentNode:function(t,i,n,s){var a=this,d=e("<table>");i.relationship=i.relationship||"001",e.when(this.createNode(i,0,n||t.closest(".orgchart").data("options"))).done(function(t){d.append(e('<tr class="hidden">').append(e('<td colspan="2">').append(t.removeClass("slide-up").addClass("slide-down")))),d.append('<tr class="lines hidden"><td colspan="2"><div class="downLine"></div></td></tr>');d.append('<tr class="lines hidden"><td class="rightLine"></td><td class="leftLine"></td></tr>');var i=a.$chart;i.prepend(d).children("table:first").append('<tr class="nodes"><td colspan="2"></td></tr>').children("tr:last").children().append(i.children("table").last()),s()}).fail(function(){console.log("Failed to create parent node")})},addParent:function(e,t,i){var n=this;this.buildParentNode(e,t,i,function(){e.children(".topEdge").length||e.children(".title").after('<i class="edge verticalEdge topEdge fa"></i>'),n.showParent(e)})},complementLine:function(e,t,i){for(var n="",s=0;s<i;s++)n+='<td class="leftLine topLine"></td><td class="rightLine topLine"></td>';e.parent().prevAll("tr:gt(0)").children().attr("colspan",2*t).end().next().children(":first").after(n)},buildSiblingNode:function(t,i,n,s){var a=this,n=n||t.closest(".orgchart").data("options"),d=i.siblings?i.siblings.length:i.children.length,o=t.parent().is("td")?t.closest("tr").children().length:1,r=o+d,l=r>1?Math.floor(r/2-1):0;if(t.parent().is("td")){t.closest("tr").prevAll("tr:last");t.closest("tr").prevAll("tr:lt(2)").remove();var h=0;this.buildChildNode(t.parent().closest("table"),i,n,function(){if(++h===d){var e=t.parent().closest("table").children("tr:last").children("td");o>1?(a.complementLine(e.eq(0).before(t.closest("td").siblings().addBack().unwrap()),r,o),e.addClass("hidden").find(".node").addClass("slide-left")):(a.complementLine(e.eq(l).after(t.closest("td").unwrap()),r,1),e.not(":eq("+l+"1)").addClass("hidden").slice(0,l).find(".node").addClass("slide-right").end().end().slice(l).find(".node").addClass("slide-left")),s()}})}else{var c=0;this.buildHierarchy(t.closest(".orgchart"),i,0,n,function(){++c===r&&(a.complementLine(t.next().children("tr:last").children().eq(l).after(e('<td colspan="2">').append(t)),r,1),t.closest("tr").siblings().eq(0).addClass("hidden").find(".node").addClass("slide-down"),t.parent().siblings().addClass("hidden").slice(0,l).find(".node").addClass("slide-right").end().end().slice(l).find(".node").addClass("slide-left"),s())})}},addSiblings:function(e,t,i){var n=this;this.buildSiblingNode(e.closest("table"),t,i,function(){e.closest(".nodes").data("siblingsLoaded",!0),e.children(".leftEdge").length||e.children(".topEdge").after('<i class="edge horizontalEdge rightEdge fa"></i><i class="edge horizontalEdge leftEdge fa"></i>'),n.showSiblings(e)})},removeNodes:function(e){var t=e.closest("table").parent(),i=t.parent().siblings();t.is("td")?this.getNodeState(e,"siblings").exist?(i.eq(2).children(".topLine:lt(2)").remove(),i.slice(0,2).children().attr("colspan",i.eq(2).children().length),t.remove()):i.eq(0).children().removeAttr("colspan").find(".bottomEdge").remove().end().end().siblings().remove():t.add(t.siblings()).remove()},export:function(n,s){var a=this;if(n=void 0!==n?n:this.options.exportFilename,s=void 0!==s?s:this.options.exportFileextension,e(this).children(".spinner").length)return!1;var d=this.$chartContainer,o=d.find(".mask");o.length?o.removeClass("hidden"):d.append('<div class="mask"><i class="fa fa-circle-o-notch fa-spin spinner"></i></div>');var r=d.addClass("canvasContainer").find('.orgchart:not(".hidden")').get(0),l="l2r"===a.options.direction||"r2l"===a.options.direction;html2canvas(r,{width:l?r.clientHeight:r.clientWidth,height:l?r.clientWidth:r.clientHeight,onclone:function(t){e(t).find(".canvasContainer").css("overflow","visible").find('.orgchart:not(".hidden"):first').css("transform","")},onrendered:function(e){if(d.find(".mask").addClass("hidden"),"pdf"===s.toLowerCase()){var o={},r=Math.floor(.2646*e.width),l=Math.floor(.2646*e.height);(o=r>l?new jsPDF("l","mm",[r,l]):new jsPDF("p","mm",[l,r])).addImage(e.toDataURL(),"png",0,0),o.save(n+".pdf")}else{var h="WebkitAppearance"in i.documentElement.style,c=!!t.sidebar,g="Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&navigator.appVersion.indexOf("Edge")>-1;if(!h&&!c||g)t.navigator.msSaveBlob(e.msToBlob(),n+".png");else{var p=".oc-download-btn"+(""!==a.options.chartClass?"."+a.options.chartClass:"");d.find(p).length||d.append('<a class="oc-download-btn'+(""!==a.options.chartClass?" "+a.options.chartClass:"")+'" download="'+n+'.png"></a>'),d.find(p).attr("href",e.toDataURL())[0].click()}}}}).then(function(){d.removeClass("canvasContainer")},function(){d.removeClass("canvasContainer")})}},e.fn.orgchart=function(e){return new s(this,e).init()}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5vcmdjaGFydC5qcyJdLCJuYW1lcyI6WyJmYWN0b3J5IiwibW9kdWxlIiwiZXhwb3J0cyIsInJlcXVpcmUiLCJ3aW5kb3ciLCJkb2N1bWVudCIsImpRdWVyeSIsIiQiLCJ1bmRlZmluZWQiLCJPcmdDaGFydCIsImVsZW0iLCJvcHRzIiwidGhpcyIsIiRjaGFydENvbnRhaW5lciIsImRlZmF1bHRPcHRpb25zIiwibm9kZVRpdGxlIiwibm9kZUlkIiwidG9nZ2xlU2libGluZ3NSZXNwIiwiZGVwdGgiLCJjaGFydENsYXNzIiwiZXhwb3J0QnV0dG9uIiwiZXhwb3J0RmlsZW5hbWUiLCJleHBvcnRGaWxlZXh0ZW5zaW9uIiwicGFyZW50Tm9kZVN5bWJvbCIsImRyYWdnYWJsZSIsImRpcmVjdGlvbiIsInBhbiIsInpvb20iLCJ6b29taW5MaW1pdCIsInpvb21vdXRMaW1pdCIsInByb3RvdHlwZSIsImluaXQiLCJ0aGF0Iiwib3B0aW9ucyIsImV4dGVuZCIsIiRjaGFydCIsInJlbW92ZSIsImRhdGEiLCJjbGFzcyIsImNsaWNrIiwiZXZlbnQiLCJ0YXJnZXQiLCJjbG9zZXN0IiwibGVuZ3RoIiwiZmluZCIsInJlbW92ZUNsYXNzIiwiTXV0YXRpb25PYnNlcnZlciIsInRyaWdnZXJJbml0RXZlbnQiLCJ0eXBlIiwiYnVpbGRIaWVyYXJjaHkiLCJidWlsZEpzb25EUyIsImNoaWxkcmVuIiwiYWpheFVSTCIsImF0dGFjaFJlbCIsImFwcGVuZCIsImFqYXgiLCJ1cmwiLCJkYXRhVHlwZSIsImRvbmUiLCJ0ZXh0U3RhdHVzIiwianFYSFIiLCJmYWlsIiwiZXJyb3JUaHJvd24iLCJjb25zb2xlIiwibG9nIiwiYWx3YXlzIiwiYXR0YWNoRXhwb3J0QnV0dG9uIiwiYmluZFBhbiIsImJpbmRab29tIiwibW8iLCJtdXRhdGlvbnMiLCJkaXNjb25uZWN0IiwiaW5pdFRpbWUiLCJpIiwiaiIsImFkZGVkTm9kZXMiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImluaXRDb21wbGV0ZWQiLCJpbml0RXZlbnQiLCJFdmVudCIsInRyaWdnZXIiLCJvYnNlcnZlIiwiY2hpbGRMaXN0IiwiJGV4cG9ydEJ0biIsInRleHQiLCJlIiwicHJldmVudERlZmF1bHQiLCJleHBvcnQiLCJzZXRPcHRpb25zIiwidmFsIiwidW5iaW5kUGFuIiwidW5iaW5kWm9vbSIsInBhblN0YXJ0SGFuZGxlciIsImRlbGVnYXRlVGFyZ2V0IiwidG91Y2hlcyIsImNzcyIsImxhc3RYIiwibGFzdFkiLCJsYXN0VGYiLCJ0ZW1wIiwic3BsaXQiLCJpbmRleE9mIiwicGFyc2VJbnQiLCJzdGFydFgiLCJzdGFydFkiLCJ0YXJnZXRUb3VjaGVzIiwicGFnZVgiLCJwYWdlWSIsIm9uIiwibmV3WCIsIm5ld1kiLCJtYXRyaXgiLCJqb2luIiwicGFuRW5kSGFuZGxlciIsImNoYXJ0Iiwib2ZmIiwiem9vbVdoZWVsSGFuZGxlciIsIm9jIiwibmV3U2NhbGUiLCJvcmlnaW5hbEV2ZW50IiwiZGVsdGFZIiwic2V0Q2hhcnRTY2FsZSIsInpvb21TdGFydEhhbmRsZXIiLCJkaXN0IiwiZ2V0UGluY2hEaXN0Iiwiem9vbWluZ0hhbmRsZXIiLCJ6b29tRW5kSGFuZGxlciIsImRpZmYiLCJNYXRoIiwic3FydCIsImNsaWVudFgiLCJjbGllbnRZIiwidGFyZ2V0U2NhbGUiLCJhYnMiLCJwYXJzZUZsb2F0IiwiJGxpIiwic3ViT2JqIiwibmFtZSIsImNvbnRlbnRzIiwiZXEiLCJ0cmltIiwicmVsYXRpb25zaGlwIiwicGFyZW50IiwiaXMiLCJzaWJsaW5ncyIsImF0dHIiLCJpZCIsImVhY2giLCJwdXNoIiwiZmxhZ3MiLCJmb3JFYWNoIiwiaXRlbSIsImxvb3BDaGFydCIsIiR0ciIsImdldEhpZXJhcmNoeSIsInZhbGlkIiwiZ2V0Tm9kZVN0YXRlIiwiJG5vZGUiLCJyZWxhdGlvbiIsIiR0YXJnZXQiLCJleGlzdCIsInZpc2libGUiLCJnZXRSZWxhdGVkTm9kZXMiLCJoaWRlUGFyZW50RW5kIiwidXBwZXJMZXZlbCIsImFkZENsYXNzIiwic2xpY2UiLCJyZW1vdmVBdHRyIiwiaGlkZVBhcmVudCIsIiR1cHBlckxldmVsIiwiaGlkZVNpYmxpbmdzIiwiJHBhcmVudCIsIm9uZSIsInNob3dQYXJlbnRFbmQiLCJub2RlIiwiaXNJbkFjdGlvbiIsInN3aXRjaFZlcnRpY2FsQXJyb3ciLCJzaG93UGFyZW50IiwicmVwYWludCIsImJpbmQiLCJzdG9wQWpheCIsIiRub2RlTGV2ZWwiLCJpc1Zpc2libGVOb2RlIiwiaW5kZXgiLCJoaWRlQ2hpbGRyZW5FbmQiLCJ2aXNpYmxlTm9kZXMiLCJpc1ZlcnRpY2FsRGVzYyIsImxvd2VyTGV2ZWwiLCJwcmV2QWxsIiwibGFzdCIsImhpZGVDaGlsZHJlbiIsIiRsb3dlckxldmVsIiwiJHZpc2libGVOb2RlcyIsImZpbHRlciIsImdldCIsInNob3dDaGlsZHJlbkVuZCIsImRlc2NlbmRhbnRzIiwic2hvd0NoaWxkcmVuIiwiJGxldmVscyIsIiRkZXNjZW5kYW50cyIsImhpZGVTaWJsaW5nc0VuZCIsIiRub2RlQ29udGFpbmVyIiwibm9kZUNvbnRhaW5lciIsImxpbmVzIiwiJHNpYmxpbmdzIiwibmV4dEFsbCIsInByZXYiLCJhbmltYXRlZE5vZGVzIiwiZW5kIiwic3dpdGNoSG9yaXpvbnRhbEFycm93IiwiJGFuaW1hdGVkTm9kZXMiLCIkbGluZXMiLCJzaG93U2libGluZ3NFbmQiLCJzaG93UmVsYXRlZFBhcmVudEVuZCIsInNob3dTaWJsaW5ncyIsInN0YXJ0TG9hZGluZyIsIiRlZGdlIiwibm90IiwicHJvcCIsImVuZExvYWRpbmciLCIkYXJyb3ciLCJ0b2dnbGVDbGFzcyIsIiRwcmV2U2liIiwiJG5leHRTaWIiLCJuZXh0IiwiJHNpYnMiLCJzaWJzVmlzaWJsZSIsInN0eWxlIiwib2Zmc2V0V2lkdGgiLCJub2RlRW50ZXJMZWF2ZUhhbmRsZXIiLCJmbGFnIiwiJHRvcEVkZ2UiLCIkYm90dG9tRWRnZSIsIiRsZWZ0RWRnZSIsIm5vZGVDbGlja0hhbmRsZXIiLCJsb2FkTm9kZXMiLCJyZWwiLCJpc0VtcHR5T2JqZWN0IiwiYWRkUGFyZW50IiwiYWRkQ2hpbGRyZW4iLCJhZGRTaWJsaW5ncyIsIkhpZGVGaXJzdFBhcmVudEVuZCIsInRvcEVkZ2UiLCJ0b3BFZGdlQ2xpY2tIYW5kbGVyIiwic3RvcFByb3BhZ2F0aW9uIiwicGFyZW50U3RhdGUiLCJpc0Z1bmN0aW9uIiwibm9kZURhdGEiLCJib3R0b21FZGdlQ2xpY2tIYW5kbGVyIiwiY2hpbGRyZW5TdGF0ZSIsImhFZGdlQ2xpY2tIYW5kbGVyIiwiJGhFZGdlIiwic2libGluZ3NTdGF0ZSIsImZhbWlsaWVzIiwiZXhwYW5kVk5vZGVzRW5kIiwidk5vZGVzIiwiY29sbGFwc2VWTm9kZXNFbmQiLCJ0b2dnbGVWTm9kZXMiLCIkdG9nZ2xlQnRuIiwiJGRlc2NXcmFwcGVyIiwiJGNoaWxkcmVuIiwiY3JlYXRlR2hvc3ROb2RlIiwiJG5vZGVEaXYiLCJvcmlnRXZlbnQiLCJpc0ZpcmVmb3giLCJ0ZXN0IiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwidG9Mb3dlckNhc2UiLCJkYXRhVHJhbnNmZXIiLCJzZXREYXRhIiwiZ2hvc3ROb2RlIiwibm9kZUNvdmVyIiwicXVlcnlTZWxlY3RvciIsImNyZWF0ZUVsZW1lbnROUyIsImFkZCIsImFwcGVuZENoaWxkIiwidHJhbnNWYWx1ZXMiLCJzY2FsZSIsInNldEF0dHJpYnV0ZSIsIm91dGVyV2lkdGgiLCJvdXRlckhlaWdodCIsInhPZmZzZXQiLCJvZmZzZXRYIiwieU9mZnNldCIsIm9mZnNldFkiLCJnaG9zdE5vZGVXcmFwcGVyIiwiY3JlYXRlRWxlbWVudCIsInNyYyIsIlhNTFNlcmlhbGl6ZXIiLCJzZXJpYWxpemVUb1N0cmluZyIsInNldERyYWdJbWFnZSIsImZpbHRlckFsbG93ZWREcm9wTm9kZXMiLCIkZHJhZ2dlZCIsIiRkcmFnWm9uZSIsIiRkcmFnSGllciIsImRyb3BDcml0ZXJpYSIsImRyYWdzdGFydEhhbmRsZXIiLCJkcmFnb3ZlckhhbmRsZXIiLCJkcm9wRWZmZWN0IiwiZHJhZ2VuZEhhbmRsZXIiLCJkcm9wSGFuZGxlciIsIiRkcm9wWm9uZSIsImRyb3BFdmVudCIsImRyYWdnZWROb2RlIiwiZHJhZ1pvbmUiLCJkcm9wWm9uZSIsImlzRGVmYXVsdFByZXZlbnRlZCIsImRyb3BDb2xzcGFuIiwiaG9yaXpvbnRhbEVkZ2VzIiwiYWRkQmFjayIsImJlZm9yZSIsIiRkcm9wU2licyIsImFmdGVyIiwiZHJhZ0NvbHNwYW4iLCIkZHJhZ1NpYnMiLCJjcmVhdGVOb2RlIiwibGV2ZWwiLCJjaGlsZCIsInBhcmVudElkIiwiZHRkIiwiRGVmZXJyZWQiLCJjbGFzc05hbWUiLCJub2RlVGVtcGxhdGUiLCJub2RlQ29udGVudCIsInZlcnRpY2FsRGVwdGgiLCJOdW1iZXIiLCJzdWJzdHIiLCJpY29uIiwicHJlcGVuZCIsInJlc29sdmUiLCJwcm9taXNlIiwiJGFwcGVuZFRvIiwiY2FsbGJhY2siLCIkbm9kZVdyYXBwZXIiLCIkY2hpbGROb2RlcyIsImhhc0NoaWxkcmVuIiwiaXNWZXJ0aWNhbE5vZGUiLCJPYmplY3QiLCJrZXlzIiwid2hlbiIsImlzSGlkZGVuIiwiY29sbGFwc2VkIiwiaXNWZXJ0aWNhbExheWVyIiwibGluZUxheWVyIiwiJG5vZGVMYXllciIsIiRub2RlQ2VsbCIsImJ1aWxkQ2hpbGROb2RlIiwiY291bnQiLCJidWlsZFBhcmVudE5vZGUiLCIkY3VycmVudFJvb3QiLCIkdGFibGUiLCJjb21wbGVtZW50TGluZSIsIiRvbmVTaWJsaW5nIiwic2libGluZ0NvdW50IiwiZXhpc3RpbmdTaWJsaWdDb3VudCIsImJ1aWxkU2libGluZ05vZGUiLCIkbm9kZUNoYXJ0IiwibmV3U2libGluZ0NvdW50IiwiaW5zZXJ0UG9zdGlvbiIsImZsb29yIiwiY2hpbGRDb3VudCIsIiRzaWJsaW5nVGRzIiwidW53cmFwIiwibm9kZUNvdW50IiwicmVtb3ZlTm9kZXMiLCIkbWFzayIsInNvdXJjZUNoYXJ0IiwiaHRtbDJjYW52YXMiLCJ3aWR0aCIsImNsaWVudEhlaWdodCIsImNsaWVudFdpZHRoIiwiaGVpZ2h0Iiwib25jbG9uZSIsImNsb25lRG9jIiwib25yZW5kZXJlZCIsImNhbnZhcyIsImRvYyIsImRvY1dpZHRoIiwiZG9jSGVpZ2h0IiwianNQREYiLCJhZGRJbWFnZSIsInRvRGF0YVVSTCIsInNhdmUiLCJpc1dlYmtpdCIsImRvY3VtZW50RWxlbWVudCIsImlzRmYiLCJzaWRlYmFyIiwiaXNFZGdlIiwiYXBwTmFtZSIsImFwcFZlcnNpb24iLCJtc1NhdmVCbG9iIiwibXNUb0Jsb2IiLCJzZWxlY3RvciIsInRoZW4iLCJmbiIsIm9yZ2NoYXJ0Il0sIm1hcHBpbmdzIjoiQUFVQSxjQUVDLFNBQVVBLEdBQ2EsaUJBQVhDLFFBQWlELGlCQUFuQkEsT0FBT0MsUUFDOUNGLEVBQVFHLFFBQVEsVUFBV0MsT0FBUUMsVUFFbkNMLEVBQVFNLE9BQVFGLE9BQVFDLFVBSjVCLENBTUUsU0FBVUUsRUFBR0gsRUFBUUMsRUFBVUcsR0FDL0IsSUFBSUMsRUFBVyxTQUFVQyxFQUFNQyxHQUM3QkMsS0FBS0MsZ0JBQWtCTixFQUFFRyxHQUN6QkUsS0FBS0QsS0FBT0EsRUFDWkMsS0FBS0UsZ0JBQ0hDLFVBQWEsT0FDYkMsT0FBVSxLQUNWQyxvQkFBc0IsRUFDdEJDLE1BQVMsSUFDVEMsV0FBYyxHQUNkQyxjQUFnQixFQUNoQkMsZUFBa0IsV0FDbEJDLG9CQUF1QixNQUN2QkMsaUJBQW9CLFdBQ3BCQyxXQUFhLEVBQ2JDLFVBQWEsTUFDYkMsS0FBTyxFQUNQQyxNQUFRLEVBQ1JDLFlBQWUsRUFDZkMsYUFBZ0IsS0FJcEJwQixFQUFTcUIsV0FFUEMsS0FBTSxTQUFVcEIsR0FDZCxJQUFJcUIsRUFBT3BCLEtBQ1hBLEtBQUtxQixRQUFVMUIsRUFBRTJCLFVBQVd0QixLQUFLRSxlQUFnQkYsS0FBS0QsS0FBTUEsR0FFNUQsSUFBSUUsRUFBa0JELEtBQUtDLGdCQUN2QkQsS0FBS3VCLFFBQ1B2QixLQUFLdUIsT0FBT0MsU0FFZCxJQUFJQyxFQUFPekIsS0FBS3FCLFFBQVFJLEtBQ3BCRixFQUFTdkIsS0FBS3VCLE9BQVM1QixFQUFFLFNB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Q1AsSUFBSUMsTUFBTSxJQUFLLE1BQU9GLEVBQVVDLElBRWhDLElBQUlDLE1BQU0sSUFBSyxNQUFPRCxFQUFXRCxLQUVyQ0csU0FBU0wsRUFBT00sWUFBYSxNQUFPLEVBQUcsR0FDM0NMLEVBQUlNLEtBQUszVyxFQUFpQixZQUNyQixDQUNMLElBQUk0VyxFQUFXLHFCQUFzQjVYLEVBQVM2WCxnQkFBZ0I5SixNQUMxRCtKLElBQVMvWCxFQUFPZ1ksUUFDaEJDLEVBQStCLGdDQUF0QjFILFVBQVUySCxTQUFvRSxhQUF0QjNILFVBQVUySCxTQUEwQjNILFVBQVU0SCxXQUFXalMsUUFBUSxTQUFXLEVBRWpKLElBQU0yUixJQUFhRSxHQUFTRSxFQUMxQmpZLEVBQU91USxVQUFVNkgsV0FBV2YsRUFBT2dCLFdBQVlwWCxFQUFpQixZQUMzRCxDQUNMLElBQUlxWCxFQUFXLG9CQUFrRCxLQUE1QjFXLEVBQUtDLFFBQVFkLFdBQW9CLElBQU1hLEVBQUtDLFFBQVFkLFdBQWEsSUFDakdOLEVBQWdCK0IsS0FBSzhWLEdBQVUvVixRQUNsQzlCLEVBQWdCeUMsT0FBTyw2QkFBMkQsS0FBNUJ0QixFQUFLQyxRQUFRZCxXQUFvQixJQUFNYSxFQUFLQyxRQUFRZCxXQUFhLElBQU0sZUFDekdFLEVBQWlCLGNBRXZDUixFQUFnQitCLEtBQUs4VixHQUFVeFAsS0FBSyxPQUFRdU8sRUFBT00sYUFBYSxHQUFHeFYsYUFLMUVvVyxLQUFLLFdBQ0o5WCxFQUFnQmdDLFlBQVksb0JBQzNCLFdBQ0RoQyxFQUFnQmdDLFlBQVksdUJBS2xDdEMsRUFBRXFZLEdBQUdDLFNBQVcsU0FBVWxZLEdBQ3hCLE9BQU8sSUFBSUYsRUFBU0csS0FBTUQsR0FBTW9CIiwiZmlsZSI6ImpxdWVyeS5vcmdjaGFydC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogalF1ZXJ5IE9yZ0NoYXJ0IFBsdWdpblxuICogaHR0cHM6Ly9naXRodWIuY29tL2RhYmVuZy9PcmdDaGFydFxuICpcbiAqIENvcHlyaWdodCAyMDE2LCBkYWJlbmdcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9kYWJlbmdcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2U6XG4gKiBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVFxuICovXG4ndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbiAoZmFjdG9yeSkge1xuICBpZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSAnb2JqZWN0Jykge1xuICAgIGZhY3RvcnkocmVxdWlyZSgnanF1ZXJ5JyksIHdpbmRvdywgZG9jdW1lbnQpO1xuICB9IGVsc2Uge1xuICAgIGZhY3RvcnkoalF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50KTtcbiAgfVxufShmdW5jdGlvbiAoJCwgd2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkKSB7XG4gIHZhciBPcmdDaGFydCA9IGZ1bmN0aW9uIChlbGVtLCBvcHRzKSB7XG4gICAgdGhpcy4kY2hhcnRDb250YWluZXIgPSAkKGVsZW0pO1xuICAgIHRoaXMub3B0cyA9IG9wdHM7XG4gICAgdGhpcy5kZWZhdWx0T3B0aW9ucyA9IHtcbiAgICAgICdub2RlVGl0bGUnOiAnbmFtZScsXG4gICAgICAnbm9kZUlkJzogJ2lkJyxcbiAgICAgICd0b2dnbGVTaWJsaW5nc1Jlc3AnOiBmYWxzZSxcbiAgICAgICdkZXB0aCc6IDk5OSxcbiAgICAgICdjaGFydENsYXNzJzogJycsXG4gICAgICAnZXhwb3J0QnV0dG9uJzogZmFsc2UsXG4gICAgICAnZXhwb3J0RmlsZW5hbWUnOiAnT3JnQ2hhcnQnLFxuICAgICAgJ2V4cG9ydEZpbGVleHRlbnNpb24nOiAncG5nJyxcbiAgICAgICdwYXJlbnROb2RlU3ltYm9sJzogJ2ZhLXVzZXJzJyxcbiAgICAgICdkcmFnZ2FibGUnOiBmYWxzZSxcbiAgICAgICdkaXJlY3Rpb24nOiAndDJiJyxcbiAgICAgICdwYW4nOiBmYWxzZSxcbiAgICAgICd6b29tJzogZmFsc2UsXG4gICAgICAnem9vbWluTGltaXQnOiA3LFxuICAgICAgJ3pvb21vdXRMaW1pdCc6IDAuNVxuICAgIH07XG4gIH07XG4gIC8vXG4gIE9yZ0NoYXJ0LnByb3RvdHlwZSA9IHtcbiAgICAvL1xuICAgIGluaXQ6IGZ1bmN0aW9uIChvcHRzKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgdGhpcy5kZWZhdWx0T3B0aW9ucywgdGhpcy5vcHRzLCBvcHRzKTtcbiAgICAgIC8vIGJ1aWxkIHRoZSBvcmctY2hhcnRcbiAgICAgIHZhciAkY2hhcnRDb250YWluZXIgPSB0aGlzLiRjaGFydENvbnRhaW5lcjtcbiAgICAgIGlmICh0aGlzLiRjaGFydCkge1xuICAgICAgICB0aGlzLiRjaGFydC5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICAgIHZhciBkYXRhID0gdGhpcy5vcHRpb25zLmRhdGE7XG4gICAgICB2YXIgJGNoYXJ0ID0gdGhpcy4kY2hhcnQgPSAkKCc8ZGl2PicsIHtcbiAgICAgICAgJ2RhdGEnOiB7ICdvcHRpb25zJzogdGhpcy5vcHRpb25zIH0sXG4gICAgICAgICdjbGFzcyc6ICdvcmdjaGFydCcgKyAodGhpcy5vcHRpb25zLmNoYXJ0Q2xhc3MgIT09ICcnID8gJyAnICsgdGhpcy5vcHRpb25zLmNoYXJ0Q2xhc3MgOiAnJykgKyAodGhpcy5vcHRpb25zLmRpcmVjdGlvbiAhPT0gJ3QyYicgPyAnICcgKyB0aGlzLm9wdGlvbnMuZGlyZWN0aW9uIDogJycpLFxuICAgICAgICAnY2xpY2snOiBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgIGlmICghJChldmVudC50YXJnZXQpLmNsb3Nlc3QoJy5ub2RlJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAkY2hhcnQuZmluZCgnLm5vZGUuZm9jdXNlZCcpLnJlbW92ZUNsYXNzKCdmb2N1c2VkJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmICh0eXBlb2YgTXV0YXRpb25PYnNlcnZlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGhpcy50cmlnZ2VySW5pdEV2ZW50KCk7XG4gICAgICB9XG4gICAgICBpZiAoJC50eXBlKGRhdGEpID09PSAnb2JqZWN0Jykge1xuICAgICAgICBpZiAoZGF0YSBpbnN0YW5jZW9mICQpIHsgLy8gdWwgZGF0YXNvdXJjZVxuICAgICAgICAgIHRoaXMuYnVpbGRIaWVyYXJjaHkoJGNoYXJ0LCB0aGlzLmJ1aWxkSnNvbkRTKGRhdGEuY2hpbGRyZW4oKSksIDAsIHRoaXMub3B0aW9ucyk7XG4gICAgICAgIH0gZWxzZSB7IC8vIGxvY2FsIGpzb24gZGF0YXNvdXJjZVxuICAgICAgICAgIHRoaXMuYnVpbGRIaWVyYXJjaHkoJGNoYXJ0LCB0aGlzLm9wdGlvbnMuYWpheFVSTCA/IGRhdGEgOiB0aGlzLmF0dGFjaFJlbChkYXRhLCAnMDAnKSwgMCwgdGhpcy5vcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJGNoYXJ0LmFwcGVuZCgnPGkgY2xhc3M9XCJmYSBmYS1jaXJjbGUtby1ub3RjaCBmYS1zcGluIHNwaW5uZXJcIj48L2k+Jyk7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgJ3VybCc6IGRhdGEsXG4gICAgICAgICAgJ2RhdGFUeXBlJzogJ2pzb24nXG4gICAgICAgIH0pXG4gICAgICAgIC5kb25lKGZ1bmN0aW9uKGRhdGEsIHRleHRTdGF0dXMsIGpxWEhSKSB7XG4gICAgICAgICAgdGhhdC5idWlsZEhpZXJhcmNoeSgkY2hhcnQsIHRoYXQub3B0aW9ucy5hamF4VVJMID8gZGF0YSA6IHRoYXQuYXR0YWNoUmVsKGRhdGEsICcwMCcpLCAwLCB0aGF0Lm9wdGlvbnMpO1xuICAgICAgICB9KVxuICAgICAgICAuZmFpbChmdW5jdGlvbihqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvclRocm93bik7XG4gICAgICAgIH0pXG4gICAgICAgIC5hbHdheXMoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJGNoYXJ0LmNoaWxkcmVuKCcuc3Bpbm5lcicpLnJlbW92ZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgICRjaGFydENvbnRhaW5lci5hcHBlbmQoJGNoYXJ0KTtcblxuICAgICAgLy8gYXBwZW5kIHRoZSBleHBvcnQgYnV0dG9uXG4gICAgICBpZiAodGhpcy5vcHRpb25zLmV4cG9ydEJ1dHRvbiAmJiAhJGNoYXJ0Q29udGFpbmVyLmZpbmQoJy5vYy1leHBvcnQtYnRuJykubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuYXR0YWNoRXhwb3J0QnV0dG9uKCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLm9wdGlvbnMucGFuKSB7XG4gICAgICAgIHRoaXMuYmluZFBhbigpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5vcHRpb25zLnpvb20pIHtcbiAgICAgICAgdGhpcy5iaW5kWm9vbSgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICAgIC8vXG4gICAgdHJpZ2dlckluaXRFdmVudDogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdmFyIG1vID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24gKG11dGF0aW9ucykge1xuICAgICAgICBtby5kaXNjb25uZWN0KCk7XG4gICAgICAgIGluaXRUaW1lOlxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG11dGF0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbXV0YXRpb25zW2ldLmFkZGVkTm9kZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIGlmIChtdXRhdGlvbnNbaV0uYWRkZWROb2Rlc1tqXS5jbGFzc0xpc3QuY29udGFpbnMoJ29yZ2NoYXJ0JykpIHtcbiAgICAgICAgICAgICAgaWYgKHRoYXQub3B0aW9ucy5pbml0Q29tcGxldGVkICYmIHR5cGVvZiB0aGF0Lm9wdGlvbnMuaW5pdENvbXBsZXRlZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIHRoYXQub3B0aW9ucy5pbml0Q29tcGxldGVkKHRoYXQuJGNoYXJ0KTtcbiAgICAgICAgICAgICAgICB2YXIgaW5pdEV2ZW50ID0gJC5FdmVudCgnaW5pdC5vcmdjaGFydCcpO1xuICAgICAgICAgICAgICAgIHRoYXQuJGNoYXJ0LnRyaWdnZXIoaW5pdEV2ZW50KTtcbiAgICAgICAgICAgICAgICBicmVhayBpbml0VGltZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBtby5vYnNlcnZlKHRoaXMuJGNoYXJ0Q29udGFpbmVyWzBdLCB7IGNoaWxkTGlzdDogdHJ1ZSB9KTtcbiAgICB9LFxuICAgIC8vXG4gICAgYXR0YWNoRXhwb3J0QnV0dG9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB2YXIgJGV4cG9ydEJ0biA9ICQoJzxidXR0b24+Jywge1xuICAgICAgICAnY2xhc3MnOiAnb2MtZXhwb3J0LWJ0bicgKyAodGhpcy5vcHRpb25zLmNoYXJ0Q2xhc3MgIT09ICcnID8gJyAnICsgdGhpcy5vcHRpb25zLmNoYXJ0Q2xhc3MgOiAnJyksXG4gICAgICAgICd0ZXh0JzogJ0V4cG9ydCcsXG4gICAgICAgICdjbGljayc6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgdGhhdC5leHBvcnQoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB0aGlzLiRjaGFydENvbnRhaW5lci5hcHBlbmQoJGV4cG9ydEJ0bik7XG4gICAgfSxcbiAgICBzZXRPcHRpb25zOiBmdW5jdGlvbiAob3B0cywgdmFsKSB7XG4gICAgICBpZiAodHlwZW9mIG9wdHMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGlmIChvcHRzID09PSAncGFuJykge1xuICAgICAgICAgIGlmICh2YWwpIHtcbiAgICAgICAgICAgIHRoaXMuYmluZFBhbigpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnVuYmluZFBhbigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0cyA9PT0gJ3pvb20nKSB7XG4gICAgICAgICAgaWYgKHZhbCkge1xuICAgICAgICAgICAgdGhpcy5iaW5kWm9vbSgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnVuYmluZFpvb20oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2Ygb3B0cyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgaWYgKG9wdHMuZGF0YSkge1xuICAgICAgICAgIHRoaXMuaW5pdChvcHRzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAodHlwZW9mIG9wdHMucGFuICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgaWYgKG9wdHMucGFuKSB7XG4gICAgICAgICAgICAgIHRoaXMuYmluZFBhbigpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy51bmJpbmRQYW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHR5cGVvZiBvcHRzLnpvb20gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBpZiAob3B0cy56b29tKSB7XG4gICAgICAgICAgICAgIHRoaXMuYmluZFpvb20oKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMudW5iaW5kWm9vbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICAgIC8vXG4gICAgcGFuU3RhcnRIYW5kbGVyOiBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyICRjaGFydCA9ICQoZS5kZWxlZ2F0ZVRhcmdldCk7XG4gICAgICBpZiAoJChlLnRhcmdldCkuY2xvc2VzdCgnLm5vZGUnKS5sZW5ndGggfHwgKGUudG91Y2hlcyAmJiBlLnRvdWNoZXMubGVuZ3RoID4gMSkpIHtcbiAgICAgICAgJGNoYXJ0LmRhdGEoJ3Bhbm5pbmcnLCBmYWxzZSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRjaGFydC5jc3MoJ2N1cnNvcicsICdtb3ZlJykuZGF0YSgncGFubmluZycsIHRydWUpO1xuICAgICAgfVxuICAgICAgdmFyIGxhc3RYID0gMDtcbiAgICAgIHZhciBsYXN0WSA9IDA7XG4gICAgICB2YXIgbGFzdFRmID0gJGNoYXJ0LmNzcygndHJhbnNmb3JtJyk7XG4gICAgICBpZiAobGFzdFRmICE9PSAnbm9uZScpIHtcbiAgICAgICAgdmFyIHRlbXAgPSBsYXN0VGYuc3BsaXQoJywnKTtcbiAgICAgICAgaWYgKGxhc3RUZi5pbmRleE9mKCczZCcpID09PSAtMSkge1xuICAgICAgICAgIGxhc3RYID0gcGFyc2VJbnQodGVtcFs0XSk7XG4gICAgICAgICAgbGFzdFkgPSBwYXJzZUludCh0ZW1wWzVdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsYXN0WCA9IHBhcnNlSW50KHRlbXBbMTJdKTtcbiAgICAgICAgICBsYXN0WSA9IHBhcnNlSW50KHRlbXBbMTNdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdmFyIHN0YXJ0WCA9IDA7XG4gICAgICB2YXIgc3RhcnRZID0gMDtcbiAgICAgIGlmICghZS50YXJnZXRUb3VjaGVzKSB7IC8vIHBhbmQgb24gZGVza3RvcFxuICAgICAgICBzdGFydFggPSBlLnBhZ2VYIC0gbGFzdFg7XG4gICAgICAgIHN0YXJ0WSA9IGUucGFnZVkgLSBsYXN0WTtcbiAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXRUb3VjaGVzLmxlbmd0aCA9PT0gMSkgeyAvLyBwYW4gb24gbW9iaWxlIGRldmljZVxuICAgICAgICBzdGFydFggPSBlLnRhcmdldFRvdWNoZXNbMF0ucGFnZVggLSBsYXN0WDtcbiAgICAgICAgc3RhcnRZID0gZS50YXJnZXRUb3VjaGVzWzBdLnBhZ2VZIC0gbGFzdFk7XG4gICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0VG91Y2hlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgICRjaGFydC5vbignbW91c2Vtb3ZlIHRvdWNobW92ZScsZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoISRjaGFydC5kYXRhKCdwYW5uaW5nJykpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG5ld1ggPSAwO1xuICAgICAgICB2YXIgbmV3WSA9IDA7XG4gICAgICAgIGlmICghZS50YXJnZXRUb3VjaGVzKSB7IC8vIHBhbmQgb24gZGVza3RvcFxuICAgICAgICAgIG5ld1ggPSBlLnBhZ2VYIC0gc3RhcnRYO1xuICAgICAgICAgIG5ld1kgPSBlLnBhZ2VZIC0gc3RhcnRZO1xuICAgICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0VG91Y2hlcy5sZW5ndGggPT09IDEpIHsgLy8gcGFuIG9uIG1vYmlsZSBkZXZpY2VcbiAgICAgICAgICBuZXdYID0gZS50YXJnZXRUb3VjaGVzWzBdLnBhZ2VYIC0gc3RhcnRYO1xuICAgICAgICAgIG5ld1kgPSBlLnRhcmdldFRvdWNoZXNbMF0ucGFnZVkgLSBzdGFydFk7XG4gICAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXRUb3VjaGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGxhc3RUZiA9ICRjaGFydC5jc3MoJ3RyYW5zZm9ybScpO1xuICAgICAgICBpZiAobGFzdFRmID09PSAnbm9uZScpIHtcbiAgICAgICAgICBpZiAobGFzdFRmLmluZGV4T2YoJzNkJykgPT09IC0xKSB7XG4gICAgICAgICAgICAkY2hhcnQuY3NzKCd0cmFuc2Zvcm0nLCAnbWF0cml4KDEsIDAsIDAsIDEsICcgKyBuZXdYICsgJywgJyArIG5ld1kgKyAnKScpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkY2hhcnQuY3NzKCd0cmFuc2Zvcm0nLCAnbWF0cml4M2QoMSwgMCwgMCwgMCwgMCwgMSwgMCwgMCwgMCwgMCwgMSwgMCwgJyArIG5ld1ggKyAnLCAnICsgbmV3WSArICcsIDAsIDEpJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBtYXRyaXggPSBsYXN0VGYuc3BsaXQoJywnKTtcbiAgICAgICAgICBpZiAobGFzdFRmLmluZGV4T2YoJzNkJykgPT09IC0xKSB7XG4gICAgICAgICAgICBtYXRyaXhbNF0gPSAnICcgKyBuZXdYO1xuICAgICAgICAgICAgbWF0cml4WzVdID0gJyAnICsgbmV3WSArICcpJztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWF0cml4WzEyXSA9ICcgJyArIG5ld1g7XG4gICAgICAgICAgICBtYXRyaXhbMTNdID0gJyAnICsgbmV3WTtcbiAgICAgICAgICB9XG4gICAgICAgICAgJGNoYXJ0LmNzcygndHJhbnNmb3JtJywgbWF0cml4LmpvaW4oJywnKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgLy9cbiAgICBwYW5FbmRIYW5kbGVyOiBmdW5jdGlvbiAoZSkge1xuICAgICAgaWYgKGUuZGF0YS5jaGFydC5kYXRhKCdwYW5uaW5nJykpIHtcbiAgICAgICAgZS5kYXRhLmNoYXJ0LmRhdGEoJ3Bhbm5pbmcnLCBmYWxzZSkuY3NzKCdjdXJzb3InLCAnZGVmYXVsdCcpLm9mZignbW91c2Vtb3ZlJyk7XG4gICAgICB9XG4gICAgfSxcbiAgICAvL1xuICAgIGJpbmRQYW46IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuJGNoYXJ0Q29udGFpbmVyLmNzcygnb3ZlcmZsb3cnLCAnaGlkZGVuJyk7XG4gICAgICB0aGlzLiRjaGFydC5vbignbW91c2Vkb3duIHRvdWNoc3RhcnQnLCB0aGlzLnBhblN0YXJ0SGFuZGxlcik7XG4gICAgICAkKGRvY3VtZW50KS5vbignbW91c2V1cCB0b3VjaGVuZCcsIHsgJ2NoYXJ0JzogdGhpcy4kY2hhcnQgfSwgdGhpcy5wYW5FbmRIYW5kbGVyKTtcbiAgICB9LFxuICAgIC8vXG4gICAgdW5iaW5kUGFuOiBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLiRjaGFydENvbnRhaW5lci5jc3MoJ292ZXJmbG93JywgJ2F1dG8nKTtcbiAgICAgIHRoaXMuJGNoYXJ0Lm9mZignbW91c2Vkb3duIHRvdWNoc3RhcnQnLCB0aGlzLnBhblN0YXJ0SGFuZGxlcik7XG4gICAgICAkKGRvY3VtZW50KS5vZmYoJ21vdXNldXAgdG91Y2hlbmQnLCB0aGlzLnBhbkVuZEhhbmRsZXIpO1xuICAgIH0sXG4gICAgLy9cbiAgICB6b29tV2hlZWxIYW5kbGVyOiBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIG9jID0gZS5kYXRhLm9jO1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdmFyIG5ld1NjYWxlICA9IDEgKyAoZS5vcmlnaW5hbEV2ZW50LmRlbHRhWSA+IDAgPyAtMC4yIDogMC4yKTtcbiAgICAgIG9jLnNldENoYXJ0U2NhbGUob2MuJGNoYXJ0LCBuZXdTY2FsZSk7XG4gICAgfSxcbiAgICAvL1xuICAgIHpvb21TdGFydEhhbmRsZXI6IGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZihlLnRvdWNoZXMgJiYgZS50b3VjaGVzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICB2YXIgb2MgPSBlLmRhdGEub2M7XG4gICAgICAgIG9jLiRjaGFydC5kYXRhKCdwaW5jaGluZycsIHRydWUpO1xuICAgICAgICB2YXIgZGlzdCA9IG9jLmdldFBpbmNoRGlzdChlKTtcbiAgICAgICAgb2MuJGNoYXJ0LmRhdGEoJ3BpbmNoRGlzdFN0YXJ0JywgZGlzdCk7XG4gICAgICB9XG4gICAgfSxcbiAgICB6b29taW5nSGFuZGxlcjogZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciBvYyA9IGUuZGF0YS5vYztcbiAgICAgIGlmKG9jLiRjaGFydC5kYXRhKCdwaW5jaGluZycpKSB7XG4gICAgICAgIHZhciBkaXN0ID0gb2MuZ2V0UGluY2hEaXN0KGUpO1xuICAgICAgICBvYy4kY2hhcnQuZGF0YSgncGluY2hEaXN0RW5kJywgZGlzdCk7XG4gICAgICB9XG4gICAgfSxcbiAgICB6b29tRW5kSGFuZGxlcjogZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciBvYyA9IGUuZGF0YS5vYztcbiAgICAgIGlmKG9jLiRjaGFydC5kYXRhKCdwaW5jaGluZycpKSB7XG4gICAgICAgIG9jLiRjaGFydC5kYXRhKCdwaW5jaGluZycsIGZhbHNlKTtcbiAgICAgICAgdmFyIGRpZmYgPSBvYy4kY2hhcnQuZGF0YSgncGluY2hEaXN0RW5kJykgLSBvYy4kY2hhcnQuZGF0YSgncGluY2hEaXN0U3RhcnQnKTtcbiAgICAgICAgaWYgKGRpZmYgPiAwKSB7XG4gICAgICAgICAgb2Muc2V0Q2hhcnRTY2FsZShvYy4kY2hhcnQsIDEuMik7XG4gICAgICAgIH0gZWxzZSBpZiAoZGlmZiA8IDApIHtcbiAgICAgICAgICBvYy5zZXRDaGFydFNjYWxlKG9jLiRjaGFydCwgMC44KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgLy9cbiAgICBiaW5kWm9vbTogZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy4kY2hhcnRDb250YWluZXIub24oJ3doZWVsJywgeyAnb2MnOiB0aGlzIH0sIHRoaXMuem9vbVdoZWVsSGFuZGxlcik7XG4gICAgICB0aGlzLiRjaGFydENvbnRhaW5lci5vbigndG91Y2hzdGFydCcsIHsgJ29jJzogdGhpcyB9LCB0aGlzLnpvb21TdGFydEhhbmRsZXIpO1xuICAgICAgJChkb2N1bWVudCkub24oJ3RvdWNobW92ZScsIHsgJ29jJzogdGhpcyB9LCB0aGlzLnpvb21pbmdIYW5kbGVyKTtcbiAgICAgICQoZG9jdW1lbnQpLm9uKCd0b3VjaGVuZCcsIHsgJ29jJzogdGhpcyB9LCB0aGlzLnpvb21FbmRIYW5kbGVyKTtcbiAgICB9LFxuICAgIHVuYmluZFpvb206IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuJGNoYXJ0Q29udGFpbmVyLm9mZignd2hlZWwnLCB0aGlzLnpvb21XaGVlbEhhbmRsZXIpO1xuICAgICAgdGhpcy4kY2hhcnRDb250YWluZXIub2ZmKCd0b3VjaHN0YXJ0JywgdGhpcy56b29tU3RhcnRIYW5kbGVyKTtcbiAgICAgICQoZG9jdW1lbnQpLm9mZigndG91Y2htb3ZlJywgdGhpcy56b29taW5nSGFuZGxlcik7XG4gICAgICAkKGRvY3VtZW50KS5vZmYoJ3RvdWNoZW5kJywgdGhpcy56b29tRW5kSGFuZGxlcik7XG4gICAgfSxcbiAgICAvL1xuICAgIGdldFBpbmNoRGlzdDogZnVuY3Rpb24gKGUpIHtcbiAgICAgIHJldHVybiBNYXRoLnNxcnQoKGUudG91Y2hlc1swXS5jbGllbnRYIC0gZS50b3VjaGVzWzFdLmNsaWVudFgpICogKGUudG91Y2hlc1swXS5jbGllbnRYIC0gZS50b3VjaGVzWzFdLmNsaWVudFgpICtcbiAgICAgIChlLnRvdWNoZXNbMF0uY2xpZW50WSAtIGUudG91Y2hlc1sxXS5jbGllbnRZKSAqIChlLnRvdWNoZXNbMF0uY2xpZW50WSAtIGUudG91Y2hlc1sxXS5jbGllbnRZKSk7XG4gICAgfSxcbiAgICAvL1xuICAgIHNldENoYXJ0U2NhbGU6IGZ1bmN0aW9uICgkY2hhcnQsIG5ld1NjYWxlKSB7XG4gICAgICB2YXIgb3B0cyA9ICRjaGFydC5kYXRhKCdvcHRpb25zJyk7XG4gICAgICB2YXIgbGFzdFRmID0gJGNoYXJ0LmNzcygndHJhbnNmb3JtJyk7XG4gICAgICB2YXIgbWF0cml4ID0gJyc7XG4gICAgICB2YXIgdGFyZ2V0U2NhbGUgPSAxO1xuICAgICAgaWYgKGxhc3RUZiA9PT0gJ25vbmUnKSB7XG4gICAgICAgICRjaGFydC5jc3MoJ3RyYW5zZm9ybScsICdzY2FsZSgnICsgbmV3U2NhbGUgKyAnLCcgKyBuZXdTY2FsZSArICcpJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtYXRyaXggPSBsYXN0VGYuc3BsaXQoJywnKTtcbiAgICAgICAgaWYgKGxhc3RUZi5pbmRleE9mKCczZCcpID09PSAtMSkge1xuICAgICAgICAgIHRhcmdldFNjYWxlID0gTWF0aC5hYnMod2luZG93LnBhcnNlRmxvYXQobWF0cml4WzNdKSAqIG5ld1NjYWxlKTtcbiAgICAgICAgICBpZiAodGFyZ2V0U2NhbGUgPiBvcHRzLnpvb21vdXRMaW1pdCAmJiB0YXJnZXRTY2FsZSA8IG9wdHMuem9vbWluTGltaXQpIHtcbiAgICAgICAgICAgICRjaGFydC5jc3MoJ3RyYW5zZm9ybScsIGxhc3RUZiArICcgc2NhbGUoJyArIG5ld1NjYWxlICsgJywnICsgbmV3U2NhbGUgKyAnKScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0YXJnZXRTY2FsZSA9IE1hdGguYWJzKHdpbmRvdy5wYXJzZUZsb2F0KG1hdHJpeFsxXSkgKiBuZXdTY2FsZSk7XG4gICAgICAgICAgaWYgKHRhcmdldFNjYWxlID4gb3B0cy56b29tb3V0TGltaXQgJiYgdGFyZ2V0U2NhbGUgPCBvcHRzLnpvb21pbkxpbWl0KSB7XG4gICAgICAgICAgICAkY2hhcnQuY3NzKCd0cmFuc2Zvcm0nLCBsYXN0VGYgKyAnIHNjYWxlM2QoJyArIG5ld1NjYWxlICsgJywnICsgbmV3U2NhbGUgKyAnLCAxKScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgLy9cbiAgICBidWlsZEpzb25EUzogZnVuY3Rpb24gKCRsaSkge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdmFyIHN1Yk9iaiA9IHtcbiAgICAgICAgJ25hbWUnOiAkbGkuY29udGVudHMoKS5lcSgwKS50ZXh0KCkudHJpbSgpLFxuICAgICAgICAncmVsYXRpb25zaGlwJzogKCRsaS5wYXJlbnQoKS5wYXJlbnQoKS5pcygnbGknKSA/ICcxJzogJzAnKSArICgkbGkuc2libGluZ3MoJ2xpJykubGVuZ3RoID8gMTogMCkgKyAoJGxpLmNoaWxkcmVuKCd1bCcpLmxlbmd0aCA/IDEgOiAwKVxuICAgICAgfTtcbiAgICAgIGlmICgkbGkuYXR0cignZGF0YS1pZCcpKSB7XG4gICAgICAgIHN1Yk9iai5pZCA9ICRsaS5hdHRyKCdkYXRhLWlkJyk7XG4gICAgICB9XG4gICAgICAkbGkuY2hpbGRyZW4oJ3VsJykuY2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIXN1Yk9iai5jaGlsZHJlbikgeyBzdWJPYmouY2hpbGRyZW4gPSBbXTsgfVxuICAgICAgICBzdWJPYmouY2hpbGRyZW4ucHVzaCh0aGF0LmJ1aWxkSnNvbkRTKCQodGhpcykpKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHN1Yk9iajtcbiAgICB9LFxuICAgIC8vXG4gICAgYXR0YWNoUmVsOiBmdW5jdGlvbiAoZGF0YSwgZmxhZ3MpIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIGRhdGEucmVsYXRpb25zaGlwID0gZmxhZ3MgKyAoZGF0YS5jaGlsZHJlbiAmJiBkYXRhLmNoaWxkcmVuLmxlbmd0aCA+IDAgPyAxIDogMCk7XG4gICAgICBpZiAoZGF0YS5jaGlsZHJlbikge1xuICAgICAgICBkYXRhLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgIHRoYXQuYXR0YWNoUmVsKGl0ZW0sICcxJyArIChkYXRhLmNoaWxkcmVuLmxlbmd0aCA+IDEgPyAxIDogMCkpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0sXG4gICAgLy9cbiAgICBsb29wQ2hhcnQ6IGZ1bmN0aW9uICgkY2hhcnQpIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHZhciAkdHIgPSAkY2hhcnQuZmluZCgndHI6Zmlyc3QnKTtcbiAgICAgIHZhciBzdWJPYmogPSB7ICdpZCc6ICR0ci5maW5kKCcubm9kZScpWzBdLmlkIH07XG4gICAgICAkdHIuc2libGluZ3MoJzpsYXN0JykuY2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIXN1Yk9iai5jaGlsZHJlbikgeyBzdWJPYmouY2hpbGRyZW4gPSBbXTsgfVxuICAgICAgICBzdWJPYmouY2hpbGRyZW4ucHVzaCh0aGF0Lmxvb3BDaGFydCgkKHRoaXMpKSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBzdWJPYmo7XG4gICAgfSxcbiAgICAvL1xuICAgIGdldEhpZXJhcmNoeTogZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLiRjaGFydCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuICdFcnJvcjogb3JnY2hhcnQgZG9lcyBub3QgZXhpc3QnXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIXRoaXMuJGNoYXJ0LmZpbmQoJy5ub2RlJykubGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuICdFcnJvcjogbm9kZXMgZG8gbm90IGV4aXN0J1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciB2YWxpZCA9IHRydWU7XG4gICAgICAgICAgdGhpcy4kY2hhcnQuZmluZCgnLm5vZGUnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pZCkge1xuICAgICAgICAgICAgICB2YWxpZCA9IGZhbHNlO1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKCF2YWxpZCkge1xuICAgICAgICAgICAgcmV0dXJuICdFcnJvcjogQWxsIG5vZGVzIG9mIG9yZ2hjYXJ0IHRvIGJlIGV4cG9ydGVkIG11c3QgaGF2ZSBkYXRhLWlkIGF0dHJpYnV0ZSEnO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMubG9vcENoYXJ0KHRoaXMuJGNoYXJ0KTtcbiAgICB9LFxuICAgIC8vIGRldGVjdCB0aGUgZXhpc3QvZGlzcGxheSBzdGF0ZSBvZiByZWxhdGVkIG5vZGVcbiAgICBnZXROb2RlU3RhdGU6IGZ1bmN0aW9uICgkbm9kZSwgcmVsYXRpb24pIHtcbiAgICAgIHZhciAkdGFyZ2V0ID0ge307XG4gICAgICB2YXIgcmVsYXRpb24gPSByZWxhdGlvbiB8fCAnc2VsZic7XG4gICAgICBpZiAocmVsYXRpb24gPT09ICdwYXJlbnQnKSB7XG4gICAgICAgICR0YXJnZXQgPSAkbm9kZS5jbG9zZXN0KCcubm9kZXMnKS5zaWJsaW5ncygnOmZpcnN0Jyk7XG4gICAgICAgIGlmICgkdGFyZ2V0Lmxlbmd0aCkge1xuICAgICAgICAgIGlmICgkdGFyZ2V0LmlzKCcuaGlkZGVuJykgfHwgKCEkdGFyZ2V0LmlzKCcuaGlkZGVuJykgJiYgJHRhcmdldC5jbG9zZXN0KCcubm9kZXMnKS5pcygnLmhpZGRlbicpKSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgJ2V4aXN0JzogdHJ1ZSwgJ3Zpc2libGUnOiBmYWxzZSB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4geyAnZXhpc3QnOiB0cnVlLCAndmlzaWJsZSc6IHRydWUgfTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChyZWxhdGlvbiA9PT0gJ2NoaWxkcmVuJykge1xuICAgICAgICAkdGFyZ2V0ID0gJG5vZGUuY2xvc2VzdCgndHInKS5zaWJsaW5ncygnOmxhc3QnKTtcbiAgICAgICAgaWYgKCR0YXJnZXQubGVuZ3RoKSB7XG4gICAgICAgICAgaWYgKCEkdGFyZ2V0LmlzKCcuaGlkZGVuJykpIHtcbiAgICAgICAgICAgIHJldHVybiB7ICdleGlzdCc6IHRydWUsICd2aXNpYmxlJzogdHJ1ZSB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4geyAnZXhpc3QnOiB0cnVlLCAndmlzaWJsZSc6IGZhbHNlIH07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAocmVsYXRpb24gPT09ICdzaWJsaW5ncycpIHtcbiAgICAgICAgJHRhcmdldCA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkuc2libGluZ3MoKTtcbiAgICAgICAgaWYgKCR0YXJnZXQubGVuZ3RoKSB7XG4gICAgICAgICAgaWYgKCEkdGFyZ2V0LmlzKCcuaGlkZGVuJykgJiYgISR0YXJnZXQucGFyZW50KCkuaXMoJy5oaWRkZW4nKSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgJ2V4aXN0JzogdHJ1ZSwgJ3Zpc2libGUnOiB0cnVlIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB7ICdleGlzdCc6IHRydWUsICd2aXNpYmxlJzogZmFsc2UgfTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJHRhcmdldCA9ICRub2RlO1xuICAgICAgICBpZiAoJHRhcmdldC5sZW5ndGgpIHtcbiAgICAgICAgICBpZiAoISgoJHRhcmdldC5jbG9zZXN0KCcubm9kZXMnKS5sZW5ndGggJiYgJHRhcmdldC5jbG9zZXN0KCcubm9kZXMnKS5pcygnLmhpZGRlbicpKSB8fFxuICAgICAgICAgICAgKCR0YXJnZXQuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5sZW5ndGggJiYgJHRhcmdldC5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLmlzKCcuaGlkZGVuJykpIHx8XG4gICAgICAgICAgICAoJHRhcmdldC5wYXJlbnQoKS5pcygnbGknKSAmJiAoJHRhcmdldC5jbG9zZXN0KCd1bCcpLmlzKCcuaGlkZGVuJykgfHwgJHRhcmdldC5jbG9zZXN0KCd2ZXJ0aWNhbE5vZGVzJykuaXMoJy5oaWRkZW4nKSkpXG4gICAgICAgICAgKSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgJ2V4aXN0JzogdHJ1ZSwgJ3Zpc2libGUnOiB0cnVlIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB7ICdleGlzdCc6IHRydWUsICd2aXNpYmxlJzogZmFsc2UgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHsgJ2V4aXN0JzogZmFsc2UsICd2aXNpYmxlJzogZmFsc2UgfTtcbiAgICB9LFxuICAgIC8vIGZpbmQgdGhlIHJlbGF0ZWQgbm9kZXNcbiAgICBnZXRSZWxhdGVkTm9kZXM6IGZ1bmN0aW9uICgkbm9kZSwgcmVsYXRpb24pIHtcbiAgICAgIGlmICghJG5vZGUgfHwgISgkbm9kZSBpbnN0YW5jZW9mICQpIHx8ICEkbm9kZS5pcygnLm5vZGUnKSkge1xuICAgICAgICByZXR1cm4gJCgpO1xuICAgICAgfVxuICAgICAgaWYgKHJlbGF0aW9uID09PSAncGFyZW50Jykge1xuICAgICAgICByZXR1cm4gJG5vZGUuY2xvc2VzdCgnLm5vZGVzJykucGFyZW50KCkuY2hpbGRyZW4oJzpmaXJzdCcpLmZpbmQoJy5ub2RlJyk7XG4gICAgICB9IGVsc2UgaWYgKHJlbGF0aW9uID09PSAnY2hpbGRyZW4nKSB7XG4gICAgICAgIHJldHVybiAkbm9kZS5jbG9zZXN0KCd0cicpLnNpYmxpbmdzKCcubm9kZXMnKS5jaGlsZHJlbigpLmZpbmQoJy5ub2RlOmZpcnN0Jyk7XG4gICAgICB9IGVsc2UgaWYgKHJlbGF0aW9uID09PSAnc2libGluZ3MnKSB7XG4gICAgICAgIHJldHVybiAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLnNpYmxpbmdzKCkuZmluZCgnLm5vZGU6Zmlyc3QnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAkKCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBoaWRlUGFyZW50RW5kOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICQoZXZlbnQudGFyZ2V0KS5yZW1vdmVDbGFzcygnc2xpZGluZycpO1xuICAgICAgZXZlbnQuZGF0YS51cHBlckxldmVsLmFkZENsYXNzKCdoaWRkZW4nKS5zbGljZSgxKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xuICAgIH0sXG4gICAgLy8gcmVjdXJzaXZlbHkgaGlkZSB0aGUgYW5jZXN0b3Igbm9kZSBhbmQgc2libGluZyBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGVcbiAgICBoaWRlUGFyZW50OiBmdW5jdGlvbiAoJG5vZGUpIHtcbiAgICAgIHZhciAkdXBwZXJMZXZlbCA9ICRub2RlLmNsb3Nlc3QoJy5ub2RlcycpLnNpYmxpbmdzKCk7XG4gICAgICBpZiAoJHVwcGVyTGV2ZWwuZXEoMCkuZmluZCgnLnNwaW5uZXInKS5sZW5ndGgpIHtcbiAgICAgICAgJG5vZGUuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuZGF0YSgnaW5BamF4JywgZmFsc2UpO1xuICAgICAgfVxuICAgICAgLy8gaGlkZSB0aGUgc2libGluZyBub2Rlc1xuICAgICAgaWYgKHRoaXMuZ2V0Tm9kZVN0YXRlKCRub2RlLCAnc2libGluZ3MnKS52aXNpYmxlKSB7XG4gICAgICAgIHRoaXMuaGlkZVNpYmxpbmdzKCRub2RlKTtcbiAgICAgIH1cbiAgICAgIC8vIGhpZGUgdGhlIGxpbmVzXG4gICAgICB2YXIgJGxpbmVzID0gJHVwcGVyTGV2ZWwuc2xpY2UoMSk7XG4gICAgICAkbGluZXMuY3NzKCd2aXNpYmlsaXR5JywgJ2hpZGRlbicpO1xuICAgICAgLy8gaGlkZSB0aGUgc3VwZXJpb3Igbm9kZXMgd2l0aCB0cmFuc2l0aW9uXG4gICAgICB2YXIgJHBhcmVudCA9ICR1cHBlckxldmVsLmVxKDApLmZpbmQoJy5ub2RlJyk7XG4gICAgICBpZiAodGhpcy5nZXROb2RlU3RhdGUoJHBhcmVudCkudmlzaWJsZSkge1xuICAgICAgICAkcGFyZW50LmFkZENsYXNzKCdzbGlkaW5nIHNsaWRlLWRvd24nKS5vbmUoJ3RyYW5zaXRpb25lbmQnLCB7ICd1cHBlckxldmVsJzogJHVwcGVyTGV2ZWwgfSwgdGhpcy5oaWRlUGFyZW50RW5kKTtcbiAgICAgIH1cbiAgICAgIC8vIGlmIHRoZSBjdXJyZW50IG5vZGUgaGFzIHRoZSBwYXJlbnQgbm9kZSwgaGlkZSBpdCByZWN1cnNpdmVseVxuICAgICAgaWYgKHRoaXMuZ2V0Tm9kZVN0YXRlKCRwYXJlbnQsICdwYXJlbnQnKS52aXNpYmxlKSB7XG4gICAgICAgIHRoaXMuaGlkZVBhcmVudCgkcGFyZW50KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHNob3dQYXJlbnRFbmQ6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgdmFyICRub2RlID0gZXZlbnQuZGF0YS5ub2RlO1xuICAgICAgJChldmVudC50YXJnZXQpLnJlbW92ZUNsYXNzKCdzbGlkaW5nJyk7XG4gICAgICBpZiAodGhpcy5pc0luQWN0aW9uKCRub2RlKSkge1xuICAgICAgICB0aGlzLnN3aXRjaFZlcnRpY2FsQXJyb3coJG5vZGUuY2hpbGRyZW4oJy50b3BFZGdlJykpO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy8gc2hvdyB0aGUgcGFyZW50IG5vZGUgb2YgdGhlIHNwZWNpZmllZCBub2RlXG4gICAgc2hvd1BhcmVudDogZnVuY3Rpb24gKCRub2RlKSB7XG4gICAgICAvLyBqdXN0IHNob3cgb25seSBvbmUgc3VwZXJpb3IgbGV2ZWxcbiAgICAgIHZhciAkdXBwZXJMZXZlbCA9ICRub2RlLmNsb3Nlc3QoJy5ub2RlcycpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgLy8ganVzdCBzaG93IG9ubHkgb25lIGxpbmVcbiAgICAgICR1cHBlckxldmVsLmVxKDIpLmNoaWxkcmVuKCkuc2xpY2UoMSwgLTEpLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgIC8vIHNob3cgcGFyZW50IG5vZGUgd2l0aCBhbmltYXRpb25cbiAgICAgIHZhciAkcGFyZW50ID0gJHVwcGVyTGV2ZWwuZXEoMCkuZmluZCgnLm5vZGUnKTtcbiAgICAgIHRoaXMucmVwYWludCgkcGFyZW50WzBdKTtcbiAgICAgICRwYXJlbnQuYWRkQ2xhc3MoJ3NsaWRpbmcnKS5yZW1vdmVDbGFzcygnc2xpZGUtZG93bicpLm9uZSgndHJhbnNpdGlvbmVuZCcsIHsgJ25vZGUnOiAkbm9kZSB9LCB0aGlzLnNob3dQYXJlbnRFbmQuYmluZCh0aGlzKSk7XG4gICAgfSxcbiAgICBzdG9wQWpheDogZnVuY3Rpb24gKCRub2RlTGV2ZWwpIHtcbiAgICAgIGlmICgkbm9kZUxldmVsLmZpbmQoJy5zcGlubmVyJykubGVuZ3RoKSB7XG4gICAgICAgICRub2RlTGV2ZWwuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuZGF0YSgnaW5BamF4JywgZmFsc2UpO1xuICAgICAgfVxuICAgIH0sXG4gICAgaXNWaXNpYmxlTm9kZTogZnVuY3Rpb24gKGluZGV4LCBlbGVtKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXROb2RlU3RhdGUoJChlbGVtKSkudmlzaWJsZTtcbiAgICB9LFxuICAgIC8vXG4gICAgaGlkZUNoaWxkcmVuRW5kOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LmRhdGEudmlzaWJsZU5vZGVzLnJlbW92ZUNsYXNzKCdzbGlkaW5nJyk7XG4gICAgICBpZiAoZXZlbnQuZGF0YS5pc1ZlcnRpY2FsRGVzYykge1xuICAgICAgICBldmVudC5kYXRhLmxvd2VyTGV2ZWwuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZXZlbnQuZGF0YS52aXNpYmxlTm9kZXMuY2xvc2VzdCgndGFibGUnKS5jbG9zZXN0KCd0cicpLnByZXZBbGwoJy5saW5lcycpLnJlbW92ZUF0dHIoJ3N0eWxlJykuYWRkQ2xhc3MoJ2hpZGRlbicpXG4gICAgICAgICAgLnNpYmxpbmdzKCcubm9kZXMnKS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgIGV2ZW50LmRhdGEubG93ZXJMZXZlbC5sYXN0KCkuZmluZCgnLnZlcnRpY2FsTm9kZXMnKS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5pc0luQWN0aW9uKGV2ZW50LmRhdGEubm9kZSkpIHtcbiAgICAgICAgdGhpcy5zd2l0Y2hWZXJ0aWNhbEFycm93KGV2ZW50LmRhdGEubm9kZS5jaGlsZHJlbignLmJvdHRvbUVkZ2UnKSk7XG4gICAgICB9XG4gICAgfSxcbiAgICAvLyByZWN1cnNpdmVseSBoaWRlIHRoZSBkZXNjZW5kYW50IG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxuICAgIGhpZGVDaGlsZHJlbjogZnVuY3Rpb24gKCRub2RlKSB7XG4gICAgICB2YXIgJGxvd2VyTGV2ZWwgPSAkbm9kZS5jbG9zZXN0KCd0cicpLnNpYmxpbmdzKCk7XG4gICAgICB0aGlzLnN0b3BBamF4KCRsb3dlckxldmVsLmxhc3QoKSk7XG4gICAgICB2YXIgJHZpc2libGVOb2RlcyA9ICRsb3dlckxldmVsLmxhc3QoKS5maW5kKCcubm9kZScpLmZpbHRlcih0aGlzLmlzVmlzaWJsZU5vZGUuYmluZCh0aGlzKSk7XG4gICAgICB2YXIgaXNWZXJ0aWNhbERlc2MgPSAkbG93ZXJMZXZlbC5sYXN0KCkuaXMoJy52ZXJ0aWNhbE5vZGVzJykgPyB0cnVlIDogZmFsc2U7XG4gICAgICBpZiAoIWlzVmVydGljYWxEZXNjKSB7XG4gICAgICAgICR2aXNpYmxlTm9kZXMuY2xvc2VzdCgndGFibGUnKS5jbG9zZXN0KCd0cicpLnByZXZBbGwoJy5saW5lcycpLmNzcygndmlzaWJpbGl0eScsICdoaWRkZW4nKTtcbiAgICAgIH1cbiAgICAgIHRoaXMucmVwYWludCgkdmlzaWJsZU5vZGVzLmdldCgwKSk7XG4gICAgICAkdmlzaWJsZU5vZGVzLmFkZENsYXNzKCdzbGlkaW5nIHNsaWRlLXVwJykuZXEoMCkub25lKCd0cmFuc2l0aW9uZW5kJywgeyAndmlzaWJsZU5vZGVzJzogJHZpc2libGVOb2RlcywgJ2xvd2VyTGV2ZWwnOiAkbG93ZXJMZXZlbCwgJ2lzVmVydGljYWxEZXNjJzogaXNWZXJ0aWNhbERlc2MsICdub2RlJzogJG5vZGUgfSwgdGhpcy5oaWRlQ2hpbGRyZW5FbmQuYmluZCh0aGlzKSk7XG4gICAgfSxcbiAgICAvL1xuICAgIHNob3dDaGlsZHJlbkVuZDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICB2YXIgJG5vZGUgPSBldmVudC5kYXRhLm5vZGU7XG4gICAgICBldmVudC5kYXRhLmRlc2NlbmRhbnRzLnJlbW92ZUNsYXNzKCdzbGlkaW5nJyk7XG4gICAgICBpZiAodGhpcy5pc0luQWN0aW9uKCRub2RlKSkge1xuICAgICAgICB0aGlzLnN3aXRjaFZlcnRpY2FsQXJyb3coJG5vZGUuY2hpbGRyZW4oJy5ib3R0b21FZGdlJykpO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy8gc2hvdyB0aGUgY2hpbGRyZW4gbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlXG4gICAgc2hvd0NoaWxkcmVuOiBmdW5jdGlvbiAoJG5vZGUpIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHZhciAkbGV2ZWxzID0gJG5vZGUuY2xvc2VzdCgndHInKS5zaWJsaW5ncygpO1xuICAgICAgdmFyIGlzVmVydGljYWxEZXNjID0gJGxldmVscy5pcygnLnZlcnRpY2FsTm9kZXMnKSA/IHRydWUgOiBmYWxzZTtcbiAgICAgIHZhciAkZGVzY2VuZGFudHMgPSBpc1ZlcnRpY2FsRGVzY1xuICAgICAgICA/ICRsZXZlbHMucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpLmZpbmQoJy5ub2RlJykuZmlsdGVyKHRoaXMuaXNWaXNpYmxlTm9kZS5iaW5kKHRoaXMpKVxuICAgICAgICA6ICRsZXZlbHMucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpLmVxKDIpLmNoaWxkcmVuKCkuZmluZCgnLm5vZGU6Zmlyc3QnKS5maWx0ZXIodGhpcy5pc1Zpc2libGVOb2RlLmJpbmQodGhpcykpO1xuICAgICAgLy8gdGhlIHR3byBmb2xsb3dpbmcgc3RhdGVtZW50cyBhcmUgdXNlZCB0byBlbmZvcmNlIGJyb3dzZXIgdG8gcmVwYWludFxuICAgICAgdGhpcy5yZXBhaW50KCRkZXNjZW5kYW50cy5nZXQoMCkpO1xuICAgICAgJGRlc2NlbmRhbnRzLmFkZENsYXNzKCdzbGlkaW5nJykucmVtb3ZlQ2xhc3MoJ3NsaWRlLXVwJykuZXEoMCkub25lKCd0cmFuc2l0aW9uZW5kJywgeyAnbm9kZSc6ICRub2RlLCAnZGVzY2VuZGFudHMnOiAkZGVzY2VuZGFudHMgfSwgdGhpcy5zaG93Q2hpbGRyZW5FbmQuYmluZCh0aGlzKSk7XG4gICAgfSxcbiAgICAvL1xuICAgIGhpZGVTaWJsaW5nc0VuZDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICB2YXIgJG5vZGUgPSBldmVudC5kYXRhLm5vZGU7XG4gICAgICB2YXIgJG5vZGVDb250YWluZXIgPSBldmVudC5kYXRhLm5vZGVDb250YWluZXI7XG4gICAgICB2YXIgZGlyZWN0aW9uID0gZXZlbnQuZGF0YS5kaXJlY3Rpb247XG4gICAgICBldmVudC5kYXRhLmxpbmVzLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XG4gICAgICB2YXIgJHNpYmxpbmdzID0gZGlyZWN0aW9uID8gKGRpcmVjdGlvbiA9PT0gJ2xlZnQnID8gJG5vZGVDb250YWluZXIucHJldkFsbCgnOm5vdCguaGlkZGVuKScpIDogJG5vZGVDb250YWluZXIubmV4dEFsbCgnOm5vdCguaGlkZGVuKScpKSA6ICRub2RlQ29udGFpbmVyLnNpYmxpbmdzKCk7XG4gICAgICAkbm9kZUNvbnRhaW5lci5jbG9zZXN0KCcubm9kZXMnKS5wcmV2KCkuY2hpbGRyZW4oJzpub3QoLmhpZGRlbiknKVxuICAgICAgICAuc2xpY2UoMSwgZGlyZWN0aW9uID8gJHNpYmxpbmdzLmxlbmd0aCAqIDIgKyAxIDogLTEpLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgIGV2ZW50LmRhdGEuYW5pbWF0ZWROb2Rlcy5yZW1vdmVDbGFzcygnc2xpZGluZycpO1xuICAgICAgJHNpYmxpbmdzLmZpbmQoJy5ub2RlOmd0KDApJykuZmlsdGVyKHRoaXMuaXNWaXNpYmxlTm9kZS5iaW5kKHRoaXMpKVxuICAgICAgICAucmVtb3ZlQ2xhc3MoJ3NsaWRlLWxlZnQgc2xpZGUtcmlnaHQnKS5hZGRDbGFzcygnc2xpZGUtdXAnKTtcbiAgICAgICRzaWJsaW5ncy5maW5kKCcubGluZXMsIC5ub2RlcywgLnZlcnRpY2FsTm9kZXMnKS5hZGRDbGFzcygnaGlkZGVuJylcbiAgICAgICAgLmVuZCgpLmFkZENsYXNzKCdoaWRkZW4nKTtcblxuICAgICAgaWYgKHRoaXMuaXNJbkFjdGlvbigkbm9kZSkpIHtcbiAgICAgICAgdGhpcy5zd2l0Y2hIb3Jpem9udGFsQXJyb3coJG5vZGUpO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy8gaGlkZSB0aGUgc2libGluZyBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGVcbiAgICBoaWRlU2libGluZ3M6IGZ1bmN0aW9uICgkbm9kZSwgZGlyZWN0aW9uKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB2YXIgJG5vZGVDb250YWluZXIgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpO1xuICAgICAgaWYgKCRub2RlQ29udGFpbmVyLnNpYmxpbmdzKCkuZmluZCgnLnNwaW5uZXInKS5sZW5ndGgpIHtcbiAgICAgICAgJG5vZGUuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuZGF0YSgnaW5BamF4JywgZmFsc2UpO1xuICAgICAgfVxuICAgICAgaWYgKGRpcmVjdGlvbikge1xuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAnbGVmdCcpIHtcbiAgICAgICAgICAkbm9kZUNvbnRhaW5lci5wcmV2QWxsKCkuZmluZCgnLm5vZGUnKS5maWx0ZXIodGhpcy5pc1Zpc2libGVOb2RlLmJpbmQodGhpcykpLmFkZENsYXNzKCdzbGlkaW5nIHNsaWRlLXJpZ2h0Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJG5vZGVDb250YWluZXIubmV4dEFsbCgpLmZpbmQoJy5ub2RlJykuZmlsdGVyKHRoaXMuaXNWaXNpYmxlTm9kZS5iaW5kKHRoaXMpKS5hZGRDbGFzcygnc2xpZGluZyBzbGlkZS1sZWZ0Jyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRub2RlQ29udGFpbmVyLnByZXZBbGwoKS5maW5kKCcubm9kZScpLmZpbHRlcih0aGlzLmlzVmlzaWJsZU5vZGUuYmluZCh0aGlzKSkuYWRkQ2xhc3MoJ3NsaWRpbmcgc2xpZGUtcmlnaHQnKTtcbiAgICAgICAgJG5vZGVDb250YWluZXIubmV4dEFsbCgpLmZpbmQoJy5ub2RlJykuZmlsdGVyKHRoaXMuaXNWaXNpYmxlTm9kZS5iaW5kKHRoaXMpKS5hZGRDbGFzcygnc2xpZGluZyBzbGlkZS1sZWZ0Jyk7XG4gICAgICB9XG4gICAgICB2YXIgJGFuaW1hdGVkTm9kZXMgPSAkbm9kZUNvbnRhaW5lci5zaWJsaW5ncygpLmZpbmQoJy5zbGlkaW5nJyk7XG4gICAgICB2YXIgJGxpbmVzID0gJGFuaW1hdGVkTm9kZXMuY2xvc2VzdCgnLm5vZGVzJykucHJldkFsbCgnLmxpbmVzJykuY3NzKCd2aXNpYmlsaXR5JywgJ2hpZGRlbicpO1xuICAgICAgJGFuaW1hdGVkTm9kZXMuZXEoMCkub25lKCd0cmFuc2l0aW9uZW5kJywgeyAnbm9kZSc6ICRub2RlLCAnbm9kZUNvbnRhaW5lcic6ICRub2RlQ29udGFpbmVyLCAnZGlyZWN0aW9uJzogZGlyZWN0aW9uLCAnYW5pbWF0ZWROb2Rlcyc6ICRhbmltYXRlZE5vZGVzLCAnbGluZXMnOiAkbGluZXMgfSwgdGhpcy5oaWRlU2libGluZ3NFbmQuYmluZCh0aGlzKSk7XG4gICAgfSxcbiAgICAvL1xuICAgIHNob3dTaWJsaW5nc0VuZDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICB2YXIgJG5vZGUgPSBldmVudC5kYXRhLm5vZGU7XG4gICAgICBldmVudC5kYXRhLnZpc2libGVOb2Rlcy5yZW1vdmVDbGFzcygnc2xpZGluZycpO1xuICAgICAgaWYgKHRoaXMuaXNJbkFjdGlvbigkbm9kZSkpIHtcbiAgICAgICAgdGhpcy5zd2l0Y2hIb3Jpem9udGFsQXJyb3coJG5vZGUpO1xuICAgICAgICAkbm9kZS5jaGlsZHJlbignLnRvcEVkZ2UnKS5yZW1vdmVDbGFzcygnZmEtY2hldnJvbi11cCcpLmFkZENsYXNzKCdmYS1jaGV2cm9uLWRvd24nKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vXG4gICAgc2hvd1JlbGF0ZWRQYXJlbnRFbmQ6IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAkKGV2ZW50LnRhcmdldCkucmVtb3ZlQ2xhc3MoJ3NsaWRpbmcnKTtcbiAgICB9LFxuICAgIC8vIHNob3cgdGhlIHNpYmxpbmcgbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlXG4gICAgc2hvd1NpYmxpbmdzOiBmdW5jdGlvbiAoJG5vZGUsIGRpcmVjdGlvbikge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgLy8gZmlyc3RseSwgc2hvdyB0aGUgc2libGluZyB0ZCB0YWdzXG4gICAgICB2YXIgJHNpYmxpbmdzID0gJCgpO1xuICAgICAgaWYgKGRpcmVjdGlvbikge1xuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAnbGVmdCcpIHtcbiAgICAgICAgICAkc2libGluZ3MgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLnByZXZBbGwoKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJHNpYmxpbmdzID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5uZXh0QWxsKCkucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkc2libGluZ3MgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgfVxuICAgICAgLy8gc2Vjb25kbHksIHNob3cgdGhlIGxpbmVzXG4gICAgICB2YXIgJHVwcGVyTGV2ZWwgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoKTtcbiAgICAgIGlmIChkaXJlY3Rpb24pIHtcbiAgICAgICAgJHVwcGVyTGV2ZWwuZXEoMikuY2hpbGRyZW4oJy5oaWRkZW4nKS5zbGljZSgwLCAkc2libGluZ3MubGVuZ3RoICogMikucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJHVwcGVyTGV2ZWwuZXEoMikuY2hpbGRyZW4oJy5oaWRkZW4nKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICB9XG4gICAgICAvLyB0aGlyZGx5LCBkbyBzb21lIGNsZWFuaW5nIHN0dWZmXG4gICAgICBpZiAoIXRoaXMuZ2V0Tm9kZVN0YXRlKCRub2RlLCAncGFyZW50JykudmlzaWJsZSkge1xuICAgICAgICAkdXBwZXJMZXZlbC5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgIHZhciBwYXJlbnQgPSAkdXBwZXJMZXZlbC5maW5kKCcubm9kZScpWzBdO1xuICAgICAgICB0aGlzLnJlcGFpbnQocGFyZW50KTtcbiAgICAgICAgJChwYXJlbnQpLmFkZENsYXNzKCdzbGlkaW5nJykucmVtb3ZlQ2xhc3MoJ3NsaWRlLWRvd24nKS5vbmUoJ3RyYW5zaXRpb25lbmQnLCB0aGlzLnNob3dSZWxhdGVkUGFyZW50RW5kKTtcbiAgICAgIH1cbiAgICAgIC8vIGxhc3RseSwgc2hvdyB0aGUgc2libGluZyBub2RlcyB3aXRoIGFuaW1hdGlvblxuICAgICAgdmFyICR2aXNpYmxlTm9kZXMgPSAkc2libGluZ3MuZmluZCgnLm5vZGUnKS5maWx0ZXIodGhpcy5pc1Zpc2libGVOb2RlLmJpbmQodGhpcykpO1xuICAgICAgdGhpcy5yZXBhaW50KCR2aXNpYmxlTm9kZXMuZ2V0KDApKTtcbiAgICAgICR2aXNpYmxlTm9kZXMuYWRkQ2xhc3MoJ3NsaWRpbmcnKS5yZW1vdmVDbGFzcygnc2xpZGUtbGVmdCBzbGlkZS1yaWdodCcpO1xuICAgICAgJHZpc2libGVOb2Rlcy5lcSgwKS5vbmUoJ3RyYW5zaXRpb25lbmQnLCB7ICdub2RlJzogJG5vZGUsICd2aXNpYmxlTm9kZXMnOiAkdmlzaWJsZU5vZGVzIH0sIHRoaXMuc2hvd1NpYmxpbmdzRW5kLmJpbmQodGhpcykpO1xuICAgIH0sXG4gICAgLy8gc3RhcnQgdXAgbG9hZGluZyBzdGF0dXMgZm9yIHJlcXVlc3RpbmcgbmV3IG5vZGVzXG4gICAgc3RhcnRMb2FkaW5nOiBmdW5jdGlvbiAoJGVkZ2UpIHtcbiAgICAgIHZhciAkY2hhcnQgPSB0aGlzLiRjaGFydDtcbiAgICAgIGlmICh0eXBlb2YgJGNoYXJ0LmRhdGEoJ2luQWpheCcpICE9PSAndW5kZWZpbmVkJyAmJiAkY2hhcnQuZGF0YSgnaW5BamF4JykgPT09IHRydWUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAkZWRnZS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAkZWRnZS5wYXJlbnQoKS5hcHBlbmQoJzxpIGNsYXNzPVwiZmEgZmEtY2lyY2xlLW8tbm90Y2ggZmEtc3BpbiBzcGlubmVyXCI+PC9pPicpXG4gICAgICAgIC5jaGlsZHJlbigpLm5vdCgnLnNwaW5uZXInKS5jc3MoJ29wYWNpdHknLCAwLjIpO1xuICAgICAgJGNoYXJ0LmRhdGEoJ2luQWpheCcsIHRydWUpO1xuICAgICAgJCgnLm9jLWV4cG9ydC1idG4nICsgKHRoaXMub3B0aW9ucy5jaGFydENsYXNzICE9PSAnJyA/ICcuJyArIHRoaXMub3B0aW9ucy5jaGFydENsYXNzIDogJycpKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICAvLyB0ZXJtaW5hdGUgbG9hZGluZyBzdGF0dXMgZm9yIHJlcXVlc3RpbmcgbmV3IG5vZGVzXG4gICAgZW5kTG9hZGluZzogZnVuY3Rpb24gKCRlZGdlKSB7XG4gICAgICB2YXIgJG5vZGUgPSAkZWRnZS5wYXJlbnQoKTtcbiAgICAgICRlZGdlLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICRub2RlLmZpbmQoJy5zcGlubmVyJykucmVtb3ZlKCk7XG4gICAgICAkbm9kZS5jaGlsZHJlbigpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XG4gICAgICB0aGlzLiRjaGFydC5kYXRhKCdpbkFqYXgnLCBmYWxzZSk7XG4gICAgICAkKCcub2MtZXhwb3J0LWJ0bicgKyAodGhpcy5vcHRpb25zLmNoYXJ0Q2xhc3MgIT09ICcnID8gJy4nICsgdGhpcy5vcHRpb25zLmNoYXJ0Q2xhc3MgOiAnJykpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuICAgIH0sXG4gICAgLy8gd2hldGhlciB0aGUgY3Vyc29yIGlzIGhvdmVyaW5nIG92ZXIgdGhlIG5vZGVcbiAgICBpc0luQWN0aW9uOiBmdW5jdGlvbiAoJG5vZGUpIHtcbiAgICAgIHJldHVybiAkbm9kZS5jaGlsZHJlbignLmVkZ2UnKS5hdHRyKCdjbGFzcycpLmluZGV4T2YoJ2ZhLScpID4gLTEgPyB0cnVlIDogZmFsc2U7XG4gICAgfSxcbiAgICAvL1xuICAgIHN3aXRjaFZlcnRpY2FsQXJyb3c6IGZ1bmN0aW9uICgkYXJyb3cpIHtcbiAgICAgICRhcnJvdy50b2dnbGVDbGFzcygnZmEtY2hldnJvbi11cCcpLnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLWRvd24nKTtcbiAgICB9LFxuICAgIC8vXG4gICAgc3dpdGNoSG9yaXpvbnRhbEFycm93OiBmdW5jdGlvbiAoJG5vZGUpIHtcbiAgICAgIHZhciBvcHRzID0gJG5vZGUuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuZGF0YSgnb3B0aW9ucycpO1xuICAgICAgaWYgKG9wdHMudG9nZ2xlU2libGluZ3NSZXNwICYmICh0eXBlb2Ygb3B0cy5hamF4VVJMID09PSAndW5kZWZpbmVkJyB8fCAkbm9kZS5jbG9zZXN0KCcubm9kZXMnKS5kYXRhKCdzaWJsaW5nc0xvYWRlZCcpKSkge1xuICAgICAgICB2YXIgJHByZXZTaWIgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLnByZXYoKTtcbiAgICAgICAgaWYgKCRwcmV2U2liLmxlbmd0aCkge1xuICAgICAgICAgIGlmICgkcHJldlNpYi5pcygnLmhpZGRlbicpKSB7XG4gICAgICAgICAgICAkbm9kZS5jaGlsZHJlbignLmxlZnRFZGdlJykuYWRkQ2xhc3MoJ2ZhLWNoZXZyb24tbGVmdCcpLnJlbW92ZUNsYXNzKCdmYS1jaGV2cm9uLXJpZ2h0Jyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRub2RlLmNoaWxkcmVuKCcubGVmdEVkZ2UnKS5hZGRDbGFzcygnZmEtY2hldnJvbi1yaWdodCcpLnJlbW92ZUNsYXNzKCdmYS1jaGV2cm9uLWxlZnQnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyICRuZXh0U2liID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5uZXh0KCk7XG4gICAgICAgIGlmICgkbmV4dFNpYi5sZW5ndGgpIHtcbiAgICAgICAgICBpZiAoJG5leHRTaWIuaXMoJy5oaWRkZW4nKSkge1xuICAgICAgICAgICAgJG5vZGUuY2hpbGRyZW4oJy5yaWdodEVkZ2UnKS5hZGRDbGFzcygnZmEtY2hldnJvbi1yaWdodCcpLnJlbW92ZUNsYXNzKCdmYS1jaGV2cm9uLWxlZnQnKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJG5vZGUuY2hpbGRyZW4oJy5yaWdodEVkZ2UnKS5hZGRDbGFzcygnZmEtY2hldnJvbi1sZWZ0JykucmVtb3ZlQ2xhc3MoJ2ZhLWNoZXZyb24tcmlnaHQnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciAkc2licyA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkuc2libGluZ3MoKTtcbiAgICAgICAgdmFyIHNpYnNWaXNpYmxlID0gJHNpYnMubGVuZ3RoID8gISRzaWJzLmlzKCcuaGlkZGVuJykgOiBmYWxzZTtcbiAgICAgICAgJG5vZGUuY2hpbGRyZW4oJy5sZWZ0RWRnZScpLnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLXJpZ2h0Jywgc2lic1Zpc2libGUpLnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLWxlZnQnLCAhc2lic1Zpc2libGUpO1xuICAgICAgICAkbm9kZS5jaGlsZHJlbignLnJpZ2h0RWRnZScpLnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLWxlZnQnLCBzaWJzVmlzaWJsZSkudG9nZ2xlQ2xhc3MoJ2ZhLWNoZXZyb24tcmlnaHQnLCAhc2lic1Zpc2libGUpO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy9cbiAgICByZXBhaW50OiBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgbm9kZS5zdHlsZS5vZmZzZXRXaWR0aCA9IG5vZGUub2Zmc2V0V2lkdGg7XG4gICAgICB9XG4gICAgfSxcbiAgICAvL1xuICAgIG5vZGVFbnRlckxlYXZlSGFuZGxlcjogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICB2YXIgJG5vZGUgPSAkKGV2ZW50LmRlbGVnYXRlVGFyZ2V0KSwgZmxhZyA9IGZhbHNlO1xuICAgICAgdmFyICR0b3BFZGdlID0gJG5vZGUuY2hpbGRyZW4oJy50b3BFZGdlJyk7XG4gICAgICB2YXIgJHJpZ2h0RWRnZSA9ICRub2RlLmNoaWxkcmVuKCcucmlnaHRFZGdlJyk7XG4gICAgICB2YXIgJGJvdHRvbUVkZ2UgPSAkbm9kZS5jaGlsZHJlbignLmJvdHRvbUVkZ2UnKTtcbiAgICAgIHZhciAkbGVmdEVkZ2UgPSAkbm9kZS5jaGlsZHJlbignLmxlZnRFZGdlJyk7XG4gICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ21vdXNlZW50ZXInKSB7XG4gICAgICAgIGlmICgkdG9wRWRnZS5sZW5ndGgpIHtcbiAgICAgICAgICBmbGFnID0gdGhpcy5nZXROb2RlU3RhdGUoJG5vZGUsICdwYXJlbnQnKS52aXNpYmxlO1xuICAgICAgICAgICR0b3BFZGdlLnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLXVwJywgIWZsYWcpLnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLWRvd24nLCBmbGFnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJGJvdHRvbUVkZ2UubGVuZ3RoKSB7XG4gICAgICAgICAgZmxhZyA9IHRoaXMuZ2V0Tm9kZVN0YXRlKCRub2RlLCAnY2hpbGRyZW4nKS52aXNpYmxlO1xuICAgICAgICAgICRib3R0b21FZGdlLnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLWRvd24nLCAhZmxhZykudG9nZ2xlQ2xhc3MoJ2ZhLWNoZXZyb24tdXAnLCBmbGFnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJGxlZnRFZGdlLmxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuc3dpdGNoSG9yaXpvbnRhbEFycm93KCRub2RlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJG5vZGUuY2hpbGRyZW4oJy5lZGdlJykucmVtb3ZlQ2xhc3MoJ2ZhLWNoZXZyb24tdXAgZmEtY2hldnJvbi1kb3duIGZhLWNoZXZyb24tcmlnaHQgZmEtY2hldnJvbi1sZWZ0Jyk7XG4gICAgICB9XG4gICAgfSxcbiAgICAvL1xuICAgIG5vZGVDbGlja0hhbmRsZXI6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgdGhpcy4kY2hhcnQuZmluZCgnLmZvY3VzZWQnKS5yZW1vdmVDbGFzcygnZm9jdXNlZCcpO1xuICAgICAgJChldmVudC5kZWxlZ2F0ZVRhcmdldCkuYWRkQ2xhc3MoJ2ZvY3VzZWQnKTtcbiAgICB9LFxuICAgIC8vIGxvYWQgbmV3IG5vZGVzIGJ5IGFqYXhcbiAgICBsb2FkTm9kZXM6IGZ1bmN0aW9uIChyZWwsIHVybCwgJGVkZ2UpIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHZhciBvcHRzID0gdGhpcy5vcHRpb25zO1xuICAgICAgJC5hamF4KHsgJ3VybCc6IHVybCwgJ2RhdGFUeXBlJzogJ2pzb24nIH0pXG4gICAgICAuZG9uZShmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICBpZiAodGhhdC4kY2hhcnQuZGF0YSgnaW5BamF4JykpIHtcbiAgICAgICAgICBpZiAocmVsID09PSAncGFyZW50Jykge1xuICAgICAgICAgICAgaWYgKCEkLmlzRW1wdHlPYmplY3QoZGF0YSkpIHtcbiAgICAgICAgICAgICAgdGhhdC5hZGRQYXJlbnQoJGVkZ2UucGFyZW50KCksIGRhdGEsIG9wdHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAocmVsID09PSAnY2hpbGRyZW4nKSB7XG4gICAgICAgICAgICBpZiAoZGF0YS5jaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgdGhhdC5hZGRDaGlsZHJlbigkZWRnZS5wYXJlbnQoKSwgZGF0YSwgJC5leHRlbmQoe30sIG9wdHMsIHsgZGVwdGg6IDAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoZGF0YS5zaWJsaW5ncyB8fCBkYXRhLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgIHRoYXQuYWRkU2libGluZ3MoJGVkZ2UucGFyZW50KCksIGRhdGEsIG9wdHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5mYWlsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0ZhaWxlZCB0byBnZXQgJyArIHJlbCArICcgZGF0YScpO1xuICAgICAgfSlcbiAgICAgIC5hbHdheXMoZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGF0LmVuZExvYWRpbmcoJGVkZ2UpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICAvL1xuICAgIEhpZGVGaXJzdFBhcmVudEVuZDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICB2YXIgJHRvcEVkZ2UgPSBldmVudC5kYXRhLnRvcEVkZ2U7XG4gICAgICB2YXIgJG5vZGUgPSAkdG9wRWRnZS5wYXJlbnQoKTtcbiAgICAgIGlmICh0aGlzLmlzSW5BY3Rpb24oJG5vZGUpKSB7XG4gICAgICAgIHRoaXMuc3dpdGNoVmVydGljYWxBcnJvdygkdG9wRWRnZSk7XG4gICAgICAgIHRoaXMuc3dpdGNoSG9yaXpvbnRhbEFycm93KCRub2RlKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vXG4gICAgdG9wRWRnZUNsaWNrSGFuZGxlcjogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHZhciAkdG9wRWRnZSA9ICQoZXZlbnQudGFyZ2V0KTtcbiAgICAgIHZhciAkbm9kZSA9ICQoZXZlbnQuZGVsZWdhdGVUYXJnZXQpO1xuICAgICAgdmFyIHBhcmVudFN0YXRlID0gdGhpcy5nZXROb2RlU3RhdGUoJG5vZGUsICdwYXJlbnQnKTtcbiAgICAgIGlmIChwYXJlbnRTdGF0ZS5leGlzdCkge1xuICAgICAgICB2YXIgJHBhcmVudCA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykuY2xvc2VzdCgndHInKS5zaWJsaW5ncygnOmZpcnN0JykuZmluZCgnLm5vZGUnKTtcbiAgICAgICAgaWYgKCRwYXJlbnQuaXMoJy5zbGlkaW5nJykpIHsgcmV0dXJuOyB9XG4gICAgICAgIC8vIGhpZGUgdGhlIGFuY2VzdG9yIG5vZGVzIGFuZCBzaWJsaW5nIG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxuICAgICAgICBpZiAocGFyZW50U3RhdGUudmlzaWJsZSkge1xuICAgICAgICAgIHRoaXMuaGlkZVBhcmVudCgkbm9kZSk7XG4gICAgICAgICAgJHBhcmVudC5vbmUoJ3RyYW5zaXRpb25lbmQnLCB7ICd0b3BFZGdlJzogJHRvcEVkZ2UgfSwgdGhpcy5IaWRlRmlyc3RQYXJlbnRFbmQuYmluZCh0aGlzKSk7XG4gICAgICAgIH0gZWxzZSB7IC8vIHNob3cgdGhlIGFuY2VzdG9ycyBhbmQgc2libGluZ3NcbiAgICAgICAgICB0aGlzLnNob3dQYXJlbnQoJG5vZGUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgeyAvLyBsb2FkIHRoZSBuZXcgcGFyZW50IG5vZGUgb2YgdGhlIHNwZWNpZmllZCBub2RlIGJ5IGFqYXggcmVxdWVzdFxuICAgICAgICAvLyBzdGFydCB1cCBsb2FkaW5nIHN0YXR1c1xuICAgICAgICBpZiAodGhpcy5zdGFydExvYWRpbmcoJHRvcEVkZ2UpKSB7XG4gICAgICAgICAgdmFyIG9wdHMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgICAgdmFyIHVybCA9ICQuaXNGdW5jdGlvbihvcHRzLmFqYXhVUkwucGFyZW50KSA/IG9wdHMuYWpheFVSTC5wYXJlbnQoZXZlbnQuZGF0YS5ub2RlRGF0YSkgOiBvcHRzLmFqYXhVUkwucGFyZW50ICsgJG5vZGVbMF0uaWQ7XG4gICAgICAgICAgdGhpcy5sb2FkTm9kZXMoJ3BhcmVudCcsIHVybCwgJHRvcEVkZ2UpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICAvL1xuICAgIGJvdHRvbUVkZ2VDbGlja0hhbmRsZXI6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB2YXIgJGJvdHRvbUVkZ2UgPSAkKGV2ZW50LnRhcmdldCk7XG4gICAgICB2YXIgJG5vZGUgPSAkKGV2ZW50LmRlbGVnYXRlVGFyZ2V0KTtcbiAgICAgIHZhciBjaGlsZHJlblN0YXRlID0gdGhpcy5nZXROb2RlU3RhdGUoJG5vZGUsICdjaGlsZHJlbicpO1xuICAgICAgaWYgKGNoaWxkcmVuU3RhdGUuZXhpc3QpIHtcbiAgICAgICAgdmFyICRjaGlsZHJlbiA9ICRub2RlLmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoJzpsYXN0Jyk7XG4gICAgICAgIGlmICgkY2hpbGRyZW4uZmluZCgnLnNsaWRpbmcnKS5sZW5ndGgpIHsgcmV0dXJuOyB9XG4gICAgICAgIC8vIGhpZGUgdGhlIGRlc2NlbmRhbnQgbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlXG4gICAgICAgIGlmIChjaGlsZHJlblN0YXRlLnZpc2libGUpIHtcbiAgICAgICAgICB0aGlzLmhpZGVDaGlsZHJlbigkbm9kZSk7XG4gICAgICAgIH0gZWxzZSB7IC8vIHNob3cgdGhlIGRlc2NlbmRhbnRzXG4gICAgICAgICAgdGhpcy5zaG93Q2hpbGRyZW4oJG5vZGUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgeyAvLyBsb2FkIHRoZSBuZXcgY2hpbGRyZW4gbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlIGJ5IGFqYXggcmVxdWVzdFxuICAgICAgICBpZiAodGhpcy5zdGFydExvYWRpbmcoJGJvdHRvbUVkZ2UpKSB7XG4gICAgICAgICAgdmFyIG9wdHMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgICAgdmFyIHVybCA9ICQuaXNGdW5jdGlvbihvcHRzLmFqYXhVUkwuY2hpbGRyZW4pID8gb3B0cy5hamF4VVJMLmNoaWxkcmVuKGV2ZW50LmRhdGEubm9kZURhdGEpIDogb3B0cy5hamF4VVJMLmNoaWxkcmVuICsgJG5vZGVbMF0uaWQ7XG4gICAgICAgICAgdGhpcy5sb2FkTm9kZXMoJ2NoaWxkcmVuJywgdXJsLCAkYm90dG9tRWRnZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIC8vXG4gICAgaEVkZ2VDbGlja0hhbmRsZXI6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB2YXIgJGhFZGdlID0gJChldmVudC50YXJnZXQpO1xuICAgICAgdmFyICRub2RlID0gJChldmVudC5kZWxlZ2F0ZVRhcmdldCk7XG4gICAgICB2YXIgb3B0cyA9IHRoaXMub3B0aW9ucztcbiAgICAgIHZhciBzaWJsaW5nc1N0YXRlID0gdGhpcy5nZXROb2RlU3RhdGUoJG5vZGUsICdzaWJsaW5ncycpO1xuICAgICAgaWYgKHNpYmxpbmdzU3RhdGUuZXhpc3QpIHtcbiAgICAgICAgdmFyICRzaWJsaW5ncyA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkuc2libGluZ3MoKTtcbiAgICAgICAgaWYgKCRzaWJsaW5ncy5maW5kKCcuc2xpZGluZycpLmxlbmd0aCkgeyByZXR1cm47IH1cbiAgICAgICAgaWYgKG9wdHMudG9nZ2xlU2libGluZ3NSZXNwKSB7XG4gICAgICAgICAgdmFyICRwcmV2U2liID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5wcmV2KCk7XG4gICAgICAgICAgdmFyICRuZXh0U2liID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5uZXh0KCk7XG4gICAgICAgICAgaWYgKCRoRWRnZS5pcygnLmxlZnRFZGdlJykpIHtcbiAgICAgICAgICAgIGlmICgkcHJldlNpYi5pcygnLmhpZGRlbicpKSB7XG4gICAgICAgICAgICAgIHRoaXMuc2hvd1NpYmxpbmdzKCRub2RlLCAnbGVmdCcpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy5oaWRlU2libGluZ3MoJG5vZGUsICdsZWZ0Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICgkbmV4dFNpYi5pcygnLmhpZGRlbicpKSB7XG4gICAgICAgICAgICAgIHRoaXMuc2hvd1NpYmxpbmdzKCRub2RlLCAncmlnaHQnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMuaGlkZVNpYmxpbmdzKCRub2RlLCAncmlnaHQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHNpYmxpbmdzU3RhdGUudmlzaWJsZSkge1xuICAgICAgICAgICAgdGhpcy5oaWRlU2libGluZ3MoJG5vZGUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNob3dTaWJsaW5ncygkbm9kZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBsb2FkIHRoZSBuZXcgc2libGluZyBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGUgYnkgYWpheCByZXF1ZXN0XG4gICAgICAgIGlmICh0aGlzLnN0YXJ0TG9hZGluZygkaEVkZ2UpKSB7XG4gICAgICAgICAgdmFyIG5vZGVJZCA9ICRub2RlWzBdLmlkO1xuICAgICAgICAgIHZhciB1cmwgPSAodGhpcy5nZXROb2RlU3RhdGUoJG5vZGUsICdwYXJlbnQnKS5leGlzdCkgP1xuICAgICAgICAgICAgKCQuaXNGdW5jdGlvbihvcHRzLmFqYXhVUkwuc2libGluZ3MpID8gb3B0cy5hamF4VVJMLnNpYmxpbmdzKGV2ZW50LmRhdGEubm9kZURhdGEpIDogb3B0cy5hamF4VVJMLnNpYmxpbmdzICsgbm9kZUlkKSA6XG4gICAgICAgICAgICAoJC5pc0Z1bmN0aW9uKG9wdHMuYWpheFVSTC5mYW1pbGllcykgPyBvcHRzLmFqYXhVUkwuZmFtaWxpZXMoZXZlbnQuZGF0YS5ub2RlRGF0YSkgOiBvcHRzLmFqYXhVUkwuZmFtaWxpZXMgKyBub2RlSWQpO1xuICAgICAgICAgIHRoaXMubG9hZE5vZGVzKCdzaWJsaW5ncycsIHVybCwgJGhFZGdlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgLy9cbiAgICBleHBhbmRWTm9kZXNFbmQ6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgZXZlbnQuZGF0YS52Tm9kZXMucmVtb3ZlQ2xhc3MoJ3NsaWRpbmcnKTtcbiAgICB9LFxuICAgIC8vXG4gICAgY29sbGFwc2VWTm9kZXNFbmQ6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgZXZlbnQuZGF0YS52Tm9kZXMucmVtb3ZlQ2xhc3MoJ3NsaWRpbmcnKS5jbG9zZXN0KCd1bCcpLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICB9LFxuICAgIC8vIGV2ZW50IGhhbmRsZXIgZm9yIHRvZ2dsZSBidXR0b25zIGluIEh5YnJpZChob3Jpem9udGFsICsgdmVydGljYWwpIE9yZ0NoYXJ0XG4gICAgdG9nZ2xlVk5vZGVzOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHZhciAkdG9nZ2xlQnRuID0gJChldmVudC50YXJnZXQpO1xuICAgICAgdmFyICRkZXNjV3JhcHBlciA9ICR0b2dnbGVCdG4ucGFyZW50KCkubmV4dCgpO1xuICAgICAgdmFyICRkZXNjZW5kYW50cyA9ICRkZXNjV3JhcHBlci5maW5kKCcubm9kZScpO1xuICAgICAgdmFyICRjaGlsZHJlbiA9ICRkZXNjV3JhcHBlci5jaGlsZHJlbigpLmNoaWxkcmVuKCcubm9kZScpO1xuICAgICAgaWYgKCRjaGlsZHJlbi5pcygnLnNsaWRpbmcnKSkgeyByZXR1cm47IH1cbiAgICAgICR0b2dnbGVCdG4udG9nZ2xlQ2xhc3MoJ2ZhLXBsdXMtc3F1YXJlIGZhLW1pbnVzLXNxdWFyZScpO1xuICAgICAgaWYgKCRkZXNjZW5kYW50cy5lcSgwKS5pcygnLnNsaWRlLXVwJykpIHtcbiAgICAgICAgJGRlc2NXcmFwcGVyLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgdGhpcy5yZXBhaW50KCRjaGlsZHJlbi5nZXQoMCkpO1xuICAgICAgICAkY2hpbGRyZW4uYWRkQ2xhc3MoJ3NsaWRpbmcnKS5yZW1vdmVDbGFzcygnc2xpZGUtdXAnKS5lcSgwKS5vbmUoJ3RyYW5zaXRpb25lbmQnLCB7ICd2Tm9kZXMnOiAkY2hpbGRyZW4gfSwgdGhpcy5leHBhbmRWTm9kZXNFbmQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJGRlc2NlbmRhbnRzLmFkZENsYXNzKCdzbGlkaW5nIHNsaWRlLXVwJykuZXEoMCkub25lKCd0cmFuc2l0aW9uZW5kJywgeyAndk5vZGVzJzogJGRlc2NlbmRhbnRzIH0sIHRoaXMuY29sbGFwc2VWTm9kZXNFbmQpO1xuICAgICAgICAkZGVzY2VuZGFudHMuZmluZCgnLnRvZ2dsZUJ0bicpLnJlbW92ZUNsYXNzKCdmYS1taW51cy1zcXVhcmUnKS5hZGRDbGFzcygnZmEtcGx1cy1zcXVhcmUnKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vXG4gICAgY3JlYXRlR2hvc3ROb2RlOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHZhciAkbm9kZURpdiA9ICQoZXZlbnQudGFyZ2V0KTtcbiAgICAgIHZhciBvcHRzID0gdGhpcy5vcHRpb25zO1xuICAgICAgdmFyIG9yaWdFdmVudCA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQ7XG4gICAgICB2YXIgaXNGaXJlZm94ID0gL2ZpcmVmb3gvLnRlc3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSk7XG4gICAgICBpZiAoaXNGaXJlZm94KSB7XG4gICAgICAgIG9yaWdFdmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9odG1sJywgJ2hhY2sgZm9yIGZpcmVmb3gnKTtcbiAgICAgIH1cbiAgICAgIHZhciBnaG9zdE5vZGUsIG5vZGVDb3ZlcjtcbiAgICAgIGlmICghZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdob3N0LW5vZGUnKSkge1xuICAgICAgICBnaG9zdE5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInN2Z1wiKTtcbiAgICAgICAgZ2hvc3ROb2RlLmNsYXNzTGlzdC5hZGQoJ2dob3N0LW5vZGUnKTtcbiAgICAgICAgbm9kZUNvdmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsJ3JlY3QnKTtcbiAgICAgICAgZ2hvc3ROb2RlLmFwcGVuZENoaWxkKG5vZGVDb3Zlcik7XG4gICAgICAgICRub2RlRGl2LmNsb3Nlc3QoJy5vcmdjaGFydCcpLmFwcGVuZChnaG9zdE5vZGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZ2hvc3ROb2RlID0gJG5vZGVEaXYuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuY2hpbGRyZW4oJy5naG9zdC1ub2RlJykuZ2V0KDApO1xuICAgICAgICBub2RlQ292ZXIgPSAkKGdob3N0Tm9kZSkuY2hpbGRyZW4oKS5nZXQoMCk7XG4gICAgICB9XG4gICAgICB2YXIgdHJhbnNWYWx1ZXMgPSAkbm9kZURpdi5jbG9zZXN0KCcub3JnY2hhcnQnKS5jc3MoJ3RyYW5zZm9ybScpLnNwbGl0KCcsJyk7XG4gICAgICB2YXIgc2NhbGUgPSBNYXRoLmFicyh3aW5kb3cucGFyc2VGbG9hdCgob3B0cy5kaXJlY3Rpb24gPT09ICd0MmInIHx8IG9wdHMuZGlyZWN0aW9uID09PSAnYjJ0JykgPyB0cmFuc1ZhbHVlc1swXS5zbGljZSh0cmFuc1ZhbHVlc1swXS5pbmRleE9mKCcoJykgKyAxKSA6IHRyYW5zVmFsdWVzWzFdKSk7XG4gICAgICBnaG9zdE5vZGUuc2V0QXR0cmlidXRlKCd3aWR0aCcsICRub2RlRGl2Lm91dGVyV2lkdGgoZmFsc2UpKTtcbiAgICAgIGdob3N0Tm9kZS5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsICRub2RlRGl2Lm91dGVySGVpZ2h0KGZhbHNlKSk7XG4gICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCd4Jyw1ICogc2NhbGUpO1xuICAgICAgbm9kZUNvdmVyLnNldEF0dHJpYnV0ZSgneScsNSAqIHNjYWxlKTtcbiAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgMTIwICogc2NhbGUpO1xuICAgICAgbm9kZUNvdmVyLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgNDAgKiBzY2FsZSk7XG4gICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCdyeCcsIDQgKiBzY2FsZSk7XG4gICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCdyeScsIDQgKiBzY2FsZSk7XG4gICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAxICogc2NhbGUpO1xuICAgICAgdmFyIHhPZmZzZXQgPSBvcmlnRXZlbnQub2Zmc2V0WCAqIHNjYWxlO1xuICAgICAgdmFyIHlPZmZzZXQgPSBvcmlnRXZlbnQub2Zmc2V0WSAqIHNjYWxlO1xuICAgICAgaWYgKG9wdHMuZGlyZWN0aW9uID09PSAnbDJyJykge1xuICAgICAgICB4T2Zmc2V0ID0gb3JpZ0V2ZW50Lm9mZnNldFkgKiBzY2FsZTtcbiAgICAgICAgeU9mZnNldCA9IG9yaWdFdmVudC5vZmZzZXRYICogc2NhbGU7XG4gICAgICB9IGVsc2UgaWYgKG9wdHMuZGlyZWN0aW9uID09PSAncjJsJykge1xuICAgICAgICB4T2Zmc2V0ID0gJG5vZGVEaXYub3V0ZXJXaWR0aChmYWxzZSkgLSBvcmlnRXZlbnQub2Zmc2V0WSAqIHNjYWxlO1xuICAgICAgICB5T2Zmc2V0ID0gb3JpZ0V2ZW50Lm9mZnNldFggKiBzY2FsZTtcbiAgICAgIH0gZWxzZSBpZiAob3B0cy5kaXJlY3Rpb24gPT09ICdiMnQnKSB7XG4gICAgICAgIHhPZmZzZXQgPSAkbm9kZURpdi5vdXRlcldpZHRoKGZhbHNlKSAtIG9yaWdFdmVudC5vZmZzZXRYICogc2NhbGU7XG4gICAgICAgIHlPZmZzZXQgPSAkbm9kZURpdi5vdXRlckhlaWdodChmYWxzZSkgLSBvcmlnRXZlbnQub2Zmc2V0WSAqIHNjYWxlO1xuICAgICAgfVxuICAgICAgaWYgKGlzRmlyZWZveCkgeyAvLyBoYWNrIGZvciBvbGQgdmVyc2lvbiBvZiBGaXJlZm94KDwgNDguMClcbiAgICAgICAgbm9kZUNvdmVyLnNldEF0dHJpYnV0ZSgnZmlsbCcsICdyZ2IoMjU1LCAyNTUsIDI1NSknKTtcbiAgICAgICAgbm9kZUNvdmVyLnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgJ3JnYigxOTEsIDAsIDApJyk7XG4gICAgICAgIHZhciBnaG9zdE5vZGVXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgICAgIGdob3N0Tm9kZVdyYXBwZXIuc3JjID0gJ2RhdGE6aW1hZ2Uvc3ZnK3htbDt1dGY4LCcgKyAobmV3IFhNTFNlcmlhbGl6ZXIoKSkuc2VyaWFsaXplVG9TdHJpbmcoZ2hvc3ROb2RlKTtcbiAgICAgICAgb3JpZ0V2ZW50LmRhdGFUcmFuc2Zlci5zZXREcmFnSW1hZ2UoZ2hvc3ROb2RlV3JhcHBlciwgeE9mZnNldCwgeU9mZnNldCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvcmlnRXZlbnQuZGF0YVRyYW5zZmVyLnNldERyYWdJbWFnZShnaG9zdE5vZGUsIHhPZmZzZXQsIHlPZmZzZXQpO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy9cbiAgICBmaWx0ZXJBbGxvd2VkRHJvcE5vZGVzOiBmdW5jdGlvbiAoJGRyYWdnZWQpIHtcbiAgICAgIHZhciBvcHRzID0gdGhpcy5vcHRpb25zO1xuICAgICAgdmFyICRkcmFnWm9uZSA9ICRkcmFnZ2VkLmNsb3Nlc3QoJy5ub2RlcycpLnNpYmxpbmdzKCkuZXEoMCkuZmluZCgnLm5vZGU6Zmlyc3QnKTtcbiAgICAgIHZhciAkZHJhZ0hpZXIgPSAkZHJhZ2dlZC5jbG9zZXN0KCd0YWJsZScpLmZpbmQoJy5ub2RlJyk7XG4gICAgICB0aGlzLiRjaGFydC5kYXRhKCdkcmFnZ2VkJywgJGRyYWdnZWQpXG4gICAgICAgIC5maW5kKCcubm9kZScpLmVhY2goZnVuY3Rpb24gKGluZGV4LCBub2RlKSB7XG4gICAgICAgICAgaWYgKCRkcmFnSGllci5pbmRleChub2RlKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIGlmIChvcHRzLmRyb3BDcml0ZXJpYSkge1xuICAgICAgICAgICAgICBpZiAob3B0cy5kcm9wQ3JpdGVyaWEoJGRyYWdnZWQsICRkcmFnWm9uZSwgJChub2RlKSkpIHtcbiAgICAgICAgICAgICAgICAkKG5vZGUpLmFkZENsYXNzKCdhbGxvd2VkRHJvcCcpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAkKG5vZGUpLmFkZENsYXNzKCdhbGxvd2VkRHJvcCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICAvL1xuICAgIGRyYWdzdGFydEhhbmRsZXI6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgLy8gaWYgdXNlcnMgZW5hYmxlIHpvb20gb3IgZGlyZWN0aW9uIG9wdGlvbnNcbiAgICAgIGlmICh0aGlzLiRjaGFydC5jc3MoJ3RyYW5zZm9ybScpICE9PSAnbm9uZScpIHtcbiAgICAgICAgdGhpcy5jcmVhdGVHaG9zdE5vZGUoZXZlbnQpO1xuICAgICAgfVxuICAgICAgdGhpcy5maWx0ZXJBbGxvd2VkRHJvcE5vZGVzKCQoZXZlbnQudGFyZ2V0KSk7XG4gICAgfSxcbiAgICAvL1xuICAgIGRyYWdvdmVySGFuZGxlcjogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgaWYgKCEkKGV2ZW50LmRlbGVnYXRlVGFyZ2V0KS5pcygnLmFsbG93ZWREcm9wJykpIHtcbiAgICAgICAgZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9ICdub25lJztcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vXG4gICAgZHJhZ2VuZEhhbmRsZXI6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgdGhpcy4kY2hhcnQuZmluZCgnLmFsbG93ZWREcm9wJykucmVtb3ZlQ2xhc3MoJ2FsbG93ZWREcm9wJyk7XG4gICAgfSxcbiAgICAvL1xuICAgIGRyb3BIYW5kbGVyOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHZhciAkZHJvcFpvbmUgPSAkKGV2ZW50LmRlbGVnYXRlVGFyZ2V0KTtcbiAgICAgIHZhciAkZHJhZ2dlZCA9IHRoaXMuJGNoYXJ0LmRhdGEoJ2RyYWdnZWQnKTtcbiAgICAgIHZhciAkZHJhZ1pvbmUgPSAkZHJhZ2dlZC5jbG9zZXN0KCcubm9kZXMnKS5zaWJsaW5ncygpLmVxKDApLmNoaWxkcmVuKCk7XG4gICAgICB2YXIgZHJvcEV2ZW50ID0gJC5FdmVudCgnbm9kZWRyb3Aub3JnY2hhcnQnKTtcbiAgICAgIHRoaXMuJGNoYXJ0LnRyaWdnZXIoZHJvcEV2ZW50LCB7ICdkcmFnZ2VkTm9kZSc6ICRkcmFnZ2VkLCAnZHJhZ1pvbmUnOiAkZHJhZ1pvbmUuY2hpbGRyZW4oKSwgJ2Ryb3Bab25lJzogJGRyb3Bab25lIH0pO1xuICAgICAgaWYgKGRyb3BFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvLyBmaXJzdGx5LCBkZWFsIHdpdGggdGhlIGhpZXJhcmNoeSBvZiBkcm9wIHpvbmVcbiAgICAgIGlmICghJGRyb3Bab25lLmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoKS5sZW5ndGgpIHsgLy8gaWYgdGhlIGRyb3Agem9uZSBpcyBhIGxlYWYgbm9kZVxuICAgICAgICAkZHJvcFpvbmUuYXBwZW5kKCc8aSBjbGFzcz1cImVkZ2UgdmVydGljYWxFZGdlIGJvdHRvbUVkZ2UgZmFcIj48L2k+JylcbiAgICAgICAgICAucGFyZW50KCkuYXR0cignY29sc3BhbicsIDIpXG4gICAgICAgICAgLnBhcmVudCgpLmFmdGVyKCc8dHIgY2xhc3M9XCJsaW5lc1wiPjx0ZCBjb2xzcGFuPVwiMlwiPjxkaXYgY2xhc3M9XCJkb3duTGluZVwiPjwvZGl2PjwvdGQ+PC90cj4nXG4gICAgICAgICAgKyAnPHRyIGNsYXNzPVwibGluZXNcIj48dGQgY2xhc3M9XCJyaWdodExpbmVcIj48L3RkPjx0ZCBjbGFzcz1cImxlZnRMaW5lXCI+PC90ZD48L3RyPidcbiAgICAgICAgICArICc8dHIgY2xhc3M9XCJub2Rlc1wiPjwvdHI+JylcbiAgICAgICAgICAuc2libGluZ3MoJzpsYXN0JykuYXBwZW5kKCRkcmFnZ2VkLmZpbmQoJy5ob3Jpem9udGFsRWRnZScpLnJlbW92ZSgpLmVuZCgpLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGRyb3BDb2xzcGFuID0gcGFyc2VJbnQoJGRyb3Bab25lLnBhcmVudCgpLmF0dHIoJ2NvbHNwYW4nKSkgKyAyO1xuICAgICAgICB2YXIgaG9yaXpvbnRhbEVkZ2VzID0gJzxpIGNsYXNzPVwiZWRnZSBob3Jpem9udGFsRWRnZSByaWdodEVkZ2UgZmFcIj48L2k+PGkgY2xhc3M9XCJlZGdlIGhvcml6b250YWxFZGdlIGxlZnRFZGdlIGZhXCI+PC9pPic7XG4gICAgICAgICRkcm9wWm9uZS5jbG9zZXN0KCd0cicpLm5leHQoKS5hZGRCYWNrKCkuY2hpbGRyZW4oKS5hdHRyKCdjb2xzcGFuJywgZHJvcENvbHNwYW4pO1xuICAgICAgICBpZiAoISRkcmFnZ2VkLmZpbmQoJy5ob3Jpem9udGFsRWRnZScpLmxlbmd0aCkge1xuICAgICAgICAgICRkcmFnZ2VkLmFwcGVuZChob3Jpem9udGFsRWRnZXMpO1xuICAgICAgICB9XG4gICAgICAgICRkcm9wWm9uZS5jbG9zZXN0KCd0cicpLnNpYmxpbmdzKCkuZXEoMSkuY2hpbGRyZW4oJzpsYXN0JykuYmVmb3JlKCc8dGQgY2xhc3M9XCJsZWZ0TGluZSB0b3BMaW5lXCI+PC90ZD48dGQgY2xhc3M9XCJyaWdodExpbmUgdG9wTGluZVwiPjwvdGQ+JylcbiAgICAgICAgICAuZW5kKCkubmV4dCgpLmFwcGVuZCgkZHJhZ2dlZC5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpKTtcbiAgICAgICAgdmFyICRkcm9wU2licyA9ICRkcmFnZ2VkLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkuc2libGluZ3MoKS5maW5kKCcubm9kZTpmaXJzdCcpO1xuICAgICAgICBpZiAoJGRyb3BTaWJzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICRkcm9wU2licy5hcHBlbmQoaG9yaXpvbnRhbEVkZ2VzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gc2Vjb25kbHksIGRlYWwgd2l0aCB0aGUgaGllcmFyY2h5IG9mIGRyYWdnZWQgbm9kZVxuICAgICAgdmFyIGRyYWdDb2xzcGFuID0gcGFyc2VJbnQoJGRyYWdab25lLmF0dHIoJ2NvbHNwYW4nKSk7XG4gICAgICBpZiAoZHJhZ0NvbHNwYW4gPiAyKSB7XG4gICAgICAgICRkcmFnWm9uZS5hdHRyKCdjb2xzcGFuJywgZHJhZ0NvbHNwYW4gLSAyKVxuICAgICAgICAgIC5wYXJlbnQoKS5uZXh0KCkuY2hpbGRyZW4oKS5hdHRyKCdjb2xzcGFuJywgZHJhZ0NvbHNwYW4gLSAyKVxuICAgICAgICAgIC5lbmQoKS5uZXh0KCkuY2hpbGRyZW4oKS5zbGljZSgxLCAzKS5yZW1vdmUoKTtcbiAgICAgICAgdmFyICRkcmFnU2licyA9ICRkcmFnWm9uZS5wYXJlbnQoKS5zaWJsaW5ncygnLm5vZGVzJykuY2hpbGRyZW4oKS5maW5kKCcubm9kZTpmaXJzdCcpO1xuICAgICAgICBpZiAoJGRyYWdTaWJzLmxlbmd0aCA9PT0xKSB7XG4gICAgICAgICAgJGRyYWdTaWJzLmZpbmQoJy5ob3Jpem9udGFsRWRnZScpLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkZHJhZ1pvbmUucmVtb3ZlQXR0cignY29sc3BhbicpXG4gICAgICAgICAgLmZpbmQoJy5ib3R0b21FZGdlJykucmVtb3ZlKClcbiAgICAgICAgICAuZW5kKCkuZW5kKCkuc2libGluZ3MoKS5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vIGNyZWF0ZSBub2RlXG4gICAgY3JlYXRlTm9kZTogZnVuY3Rpb24gKG5vZGVEYXRhLCBsZXZlbCwgb3B0cykge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgaWYgKCFub2RlRGF0YS5jaGlsZHJlbikgeyBub2RlRGF0YS5jaGlsZHJlbiA9IFtdOyB9XG4gICAgICAkLmVhY2gobm9kZURhdGEuY2hpbGRyZW4sIGZ1bmN0aW9uIChpbmRleCwgY2hpbGQpIHtcbiAgICAgICAgY2hpbGQucGFyZW50SWQgPSBub2RlRGF0YS5pZDtcbiAgICAgIH0pO1xuICAgICAgdmFyIGR0ZCA9ICQuRGVmZXJyZWQoKTtcbiAgICAgIC8vIGNvbnN0cnVjdCB0aGUgY29udGVudCBvZiBub2RlXG4gICAgICB2YXIgJG5vZGVEaXYgPSAkKCc8ZGl2JyArIChvcHRzLmRyYWdnYWJsZSA/ICcgZHJhZ2dhYmxlPVwidHJ1ZVwiJyA6ICcnKSArIChub2RlRGF0YVtvcHRzLm5vZGVJZF0gPyAnIGlkPVwiJyArIG5vZGVEYXRhW29wdHMubm9kZUlkXSArICdcIicgOiAnJykgKyAobm9kZURhdGEucGFyZW50SWQgPyAnIGRhdGEtcGFyZW50PVwiJyArIG5vZGVEYXRhLnBhcmVudElkICsgJ1wiJyA6ICcnKSArICc+JylcbiAgICAgICAgLmFkZENsYXNzKCdub2RlICcgKyAobm9kZURhdGEuY2xhc3NOYW1lIHx8ICcnKSArICAobGV2ZWwgPj0gb3B0cy5kZXB0aCA/ICcgc2xpZGUtdXAnIDogJycpKTtcbiAgICAgIGlmIChvcHRzLm5vZGVUZW1wbGF0ZSkge1xuICAgICAgICAkbm9kZURpdi5hcHBlbmQob3B0cy5ub2RlVGVtcGxhdGUobm9kZURhdGEpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRub2RlRGl2LmFwcGVuZCgnPGRpdiBjbGFzcz1cInRpdGxlXCI+JyArIG5vZGVEYXRhW29wdHMubm9kZVRpdGxlXSArICc8L2Rpdj4nKVxuICAgICAgICAgIC5hcHBlbmQodHlwZW9mIG9wdHMubm9kZUNvbnRlbnQgIT09ICd1bmRlZmluZWQnID8gJzxkaXYgY2xhc3M9XCJjb250ZW50XCI+JyArIChub2RlRGF0YVtvcHRzLm5vZGVDb250ZW50XSB8fCAnJykgKyAnPC9kaXY+JyA6ICcnKTtcbiAgICAgIH1cbiAgICAgIC8vIGFwcGVuZCA0IGRpcmVjdGlvbiBhcnJvd3Mgb3IgZXhwYW5kL2NvbGxhcHNlIGJ1dHRvbnNcbiAgICAgIHZhciBmbGFncyA9IG5vZGVEYXRhLnJlbGF0aW9uc2hpcCB8fCAnJztcbiAgICAgIGlmIChvcHRzLnZlcnRpY2FsRGVwdGggJiYgKGxldmVsICsgMikgPiBvcHRzLnZlcnRpY2FsRGVwdGgpIHtcbiAgICAgICAgaWYgKChsZXZlbCArIDEpID49IG9wdHMudmVydGljYWxEZXB0aCAmJiBOdW1iZXIoZmxhZ3Muc3Vic3RyKDIsMSkpKSB7XG4gICAgICAgICAgdmFyIGljb24gPSBsZXZlbCArIDEgID49IG9wdHMuZGVwdGggPyAncGx1cycgOiAnbWludXMnO1xuICAgICAgICAgICRub2RlRGl2LmFwcGVuZCgnPGkgY2xhc3M9XCJ0b2dnbGVCdG4gZmEgZmEtJyArIGljb24gKyAnLXNxdWFyZVwiPjwvaT4nKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKE51bWJlcihmbGFncy5zdWJzdHIoMCwxKSkpIHtcbiAgICAgICAgICAkbm9kZURpdi5hcHBlbmQoJzxpIGNsYXNzPVwiZWRnZSB2ZXJ0aWNhbEVkZ2UgdG9wRWRnZSBmYVwiPjwvaT4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZihOdW1iZXIoZmxhZ3Muc3Vic3RyKDEsMSkpKSB7XG4gICAgICAgICAgJG5vZGVEaXYuYXBwZW5kKCc8aSBjbGFzcz1cImVkZ2UgaG9yaXpvbnRhbEVkZ2UgcmlnaHRFZGdlIGZhXCI+PC9pPicgK1xuICAgICAgICAgICAgJzxpIGNsYXNzPVwiZWRnZSBob3Jpem9udGFsRWRnZSBsZWZ0RWRnZSBmYVwiPjwvaT4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZihOdW1iZXIoZmxhZ3Muc3Vic3RyKDIsMSkpKSB7XG4gICAgICAgICAgJG5vZGVEaXYuYXBwZW5kKCc8aSBjbGFzcz1cImVkZ2UgdmVydGljYWxFZGdlIGJvdHRvbUVkZ2UgZmFcIj48L2k+JylcbiAgICAgICAgICAgIC5jaGlsZHJlbignLnRpdGxlJykucHJlcGVuZCgnPGkgY2xhc3M9XCJmYSAnKyBvcHRzLnBhcmVudE5vZGVTeW1ib2wgKyAnIHN5bWJvbFwiPjwvaT4nKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAkbm9kZURpdi5vbignbW91c2VlbnRlciBtb3VzZWxlYXZlJywgdGhpcy5ub2RlRW50ZXJMZWF2ZUhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgICAkbm9kZURpdi5vbignY2xpY2snLCB0aGlzLm5vZGVDbGlja0hhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgICAkbm9kZURpdi5vbignY2xpY2snLCAnLnRvcEVkZ2UnLCB7ICdub2RlRGF0YSc6IG5vZGVEYXRhIH0sIHRoaXMudG9wRWRnZUNsaWNrSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICAgICRub2RlRGl2Lm9uKCdjbGljaycsICcuYm90dG9tRWRnZScsIHsgJ25vZGVEYXRhJzogbm9kZURhdGEgfSwgdGhpcy5ib3R0b21FZGdlQ2xpY2tIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgICAgJG5vZGVEaXYub24oJ2NsaWNrJywgJy5sZWZ0RWRnZSwgLnJpZ2h0RWRnZScsIHsgJ25vZGVEYXRhJzogbm9kZURhdGEgfSwgdGhpcy5oRWRnZUNsaWNrSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICAgICRub2RlRGl2Lm9uKCdjbGljaycsICcudG9nZ2xlQnRuJywgdGhpcy50b2dnbGVWTm9kZXMuYmluZCh0aGlzKSk7XG5cbiAgICAgIGlmIChvcHRzLmRyYWdnYWJsZSkge1xuICAgICAgICAkbm9kZURpdi5vbignZHJhZ3N0YXJ0JywgdGhpcy5kcmFnc3RhcnRIYW5kbGVyLmJpbmQodGhpcykpXG4gICAgICAgIC5vbignZHJhZ292ZXInLCB0aGlzLmRyYWdvdmVySGFuZGxlci5iaW5kKHRoaXMpKVxuICAgICAgICAub24oJ2RyYWdlbmQnLCB0aGlzLmRyYWdlbmRIYW5kbGVyLmJpbmQodGhpcykpXG4gICAgICAgIC5vbignZHJvcCcsIHRoaXMuZHJvcEhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgICB9XG4gICAgICAvLyBhbGxvdyB1c2VyIHRvIGFwcGVuZCBkb20gbW9kaWZpY2F0aW9uIGFmdGVyIGZpbmlzaGluZyBub2RlIGNyZWF0ZSBvZiBvcmdjaGFydFxuICAgICAgaWYgKG9wdHMuY3JlYXRlTm9kZSkge1xuICAgICAgICBvcHRzLmNyZWF0ZU5vZGUoJG5vZGVEaXYsIG5vZGVEYXRhKTtcbiAgICAgIH1cbiAgICAgIGR0ZC5yZXNvbHZlKCRub2RlRGl2KTtcbiAgICAgIHJldHVybiBkdGQucHJvbWlzZSgpO1xuICAgIH0sXG4gICAgLy8gcmVjdXJzaXZlbHkgYnVpbGQgdGhlIHRyZWVcbiAgICBidWlsZEhpZXJhcmNoeTogZnVuY3Rpb24gKCRhcHBlbmRUbywgbm9kZURhdGEsIGxldmVsLCBvcHRzLCBjYWxsYmFjaykge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdmFyICRub2RlV3JhcHBlcjtcbiAgICAgIC8vIENvbnN0cnVjdCB0aGUgbm9kZVxuICAgICAgdmFyICRjaGlsZE5vZGVzID0gbm9kZURhdGEuY2hpbGRyZW47XG4gICAgICB2YXIgaGFzQ2hpbGRyZW4gPSAkY2hpbGROb2RlcyA/ICRjaGlsZE5vZGVzLmxlbmd0aCA6IGZhbHNlO1xuICAgICAgdmFyIGlzVmVydGljYWxOb2RlID0gKG9wdHMudmVydGljYWxEZXB0aCAmJiAobGV2ZWwgKyAxKSA+PSBvcHRzLnZlcnRpY2FsRGVwdGgpID8gdHJ1ZSA6IGZhbHNlO1xuICAgICAgaWYgKE9iamVjdC5rZXlzKG5vZGVEYXRhKS5sZW5ndGggPiAxKSB7IC8vIGlmIG5vZGVEYXRhIGhhcyBuZXN0ZWQgc3RydWN0dXJlXG4gICAgICAgICRub2RlV3JhcHBlciA9IGlzVmVydGljYWxOb2RlID8gJGFwcGVuZFRvIDogJCgnPHRhYmxlPicpO1xuICAgICAgICBpZiAoIWlzVmVydGljYWxOb2RlKSB7XG4gICAgICAgICAgJGFwcGVuZFRvLmFwcGVuZCgkbm9kZVdyYXBwZXIpO1xuICAgICAgICB9XG4gICAgICAgICQud2hlbih0aGlzLmNyZWF0ZU5vZGUobm9kZURhdGEsIGxldmVsLCBvcHRzKSlcbiAgICAgICAgLmRvbmUoZnVuY3Rpb24oJG5vZGVEaXYpIHtcbiAgICAgICAgICBpZiAoaXNWZXJ0aWNhbE5vZGUpIHtcbiAgICAgICAgICAgICRub2RlV3JhcHBlci5hcHBlbmQoJG5vZGVEaXYpO1xuICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICRub2RlV3JhcHBlci5hcHBlbmQoJCgnPHRyLz4nKS5hcHBlbmQoJCgnPHRkJyArIChoYXNDaGlsZHJlbiA/ICcgY29sc3Bhbj1cIicgKyAkY2hpbGROb2Rlcy5sZW5ndGggKiAyICsgJ1wiJyA6ICcnKSArICc+PC90ZD4nKS5hcHBlbmQoJG5vZGVEaXYpKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5mYWlsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdGYWlsZWQgdG8gY3JlYXQgbm9kZScpXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgLy8gQ29uc3RydWN0IHRoZSBpbmZlcmlvciBub2RlcyBhbmQgY29ubmVjdGlvbmcgbGluZXNcbiAgICAgIGlmIChoYXNDaGlsZHJlbikge1xuICAgICAgICBpZiAoT2JqZWN0LmtleXMobm9kZURhdGEpLmxlbmd0aCA9PT0gMSkgeyAvLyBpZiBub2RlRGF0YSBpcyBqdXN0IGFuIGFycmF5XG4gICAgICAgICAgJG5vZGVXcmFwcGVyID0gJGFwcGVuZFRvO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpc0hpZGRlbiA9IChsZXZlbCArIDEgPj0gb3B0cy5kZXB0aCB8fCBub2RlRGF0YS5jb2xsYXBzZWQpID8gJyBoaWRkZW4nIDogJyc7XG4gICAgICAgIHZhciBpc1ZlcnRpY2FsTGF5ZXIgPSAob3B0cy52ZXJ0aWNhbERlcHRoICYmIChsZXZlbCArIDIpID49IG9wdHMudmVydGljYWxEZXB0aCkgPyB0cnVlIDogZmFsc2U7XG5cbiAgICAgICAgLy8gZHJhdyB0aGUgbGluZSBjbG9zZSB0byBwYXJlbnQgbm9kZVxuICAgICAgICBpZiAoIWlzVmVydGljYWxMYXllcikge1xuICAgICAgICAgICRub2RlV3JhcHBlci5hcHBlbmQoJzx0ciBjbGFzcz1cImxpbmVzJyArIGlzSGlkZGVuICsgJ1wiPjx0ZCBjb2xzcGFuPVwiJyArICRjaGlsZE5vZGVzLmxlbmd0aCAqIDIgKyAnXCI+PGRpdiBjbGFzcz1cImRvd25MaW5lXCI+PC9kaXY+PC90ZD48L3RyPicpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGRyYXcgdGhlIGxpbmVzIGNsb3NlIHRvIGNoaWxkcmVuIG5vZGVzXG4gICAgICAgIHZhciBsaW5lTGF5ZXIgPSAnPHRyIGNsYXNzPVwibGluZXMnICsgaXNIaWRkZW4gKyAnXCI+PHRkIGNsYXNzPVwicmlnaHRMaW5lXCI+PC90ZD4nO1xuICAgICAgICBmb3IgKHZhciBpPTE7IGk8JGNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBsaW5lTGF5ZXIgKz0gJzx0ZCBjbGFzcz1cImxlZnRMaW5lIHRvcExpbmVcIj48L3RkPjx0ZCBjbGFzcz1cInJpZ2h0TGluZSB0b3BMaW5lXCI+PC90ZD4nO1xuICAgICAgICB9XG4gICAgICAgIGxpbmVMYXllciArPSAnPHRkIGNsYXNzPVwibGVmdExpbmVcIj48L3RkPjwvdHI+JztcbiAgICAgICAgdmFyICRub2RlTGF5ZXI7XG4gICAgICAgIGlmIChpc1ZlcnRpY2FsTGF5ZXIpIHtcbiAgICAgICAgICAkbm9kZUxheWVyID0gJCgnPHVsPicpO1xuICAgICAgICAgIGlmIChpc0hpZGRlbiAmJiBvcHRzLmRlcHRoICsgMSAhPT0gb3B0cy52ZXJ0aWNhbERlcHRoKSB7XG4gICAgICAgICAgICAkbm9kZUxheWVyLmFkZENsYXNzKGlzSGlkZGVuKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGxldmVsICsgMiA9PT0gb3B0cy52ZXJ0aWNhbERlcHRoKSB7XG4gICAgICAgICAgICAkbm9kZVdyYXBwZXIuYXBwZW5kKCc8dHIgY2xhc3M9XCJ2ZXJ0aWNhbE5vZGVzJyArIGlzSGlkZGVuICsgJ1wiPjx0ZD48L3RkPjwvdHI+JylcbiAgICAgICAgICAgICAgLmZpbmQoJy52ZXJ0aWNhbE5vZGVzJykuY2hpbGRyZW4oKS5hcHBlbmQoJG5vZGVMYXllcik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRub2RlV3JhcHBlci5hcHBlbmQoJG5vZGVMYXllcik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICRub2RlTGF5ZXIgPSAkKCc8dHIgY2xhc3M9XCJub2RlcycgKyBpc0hpZGRlbiArICdcIj4nKTtcbiAgICAgICAgICAkbm9kZVdyYXBwZXIuYXBwZW5kKGxpbmVMYXllcikuYXBwZW5kKCRub2RlTGF5ZXIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHJlY3Vyc2UgdGhyb3VnaCBjaGlsZHJlbiBub2Rlc1xuICAgICAgICAkLmVhY2goJGNoaWxkTm9kZXMsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciAkbm9kZUNlbGwgPSBpc1ZlcnRpY2FsTGF5ZXIgPyAkKCc8bGk+JykgOiAkKCc8dGQgY29sc3Bhbj1cIjJcIj4nKTtcbiAgICAgICAgICAkbm9kZUxheWVyLmFwcGVuZCgkbm9kZUNlbGwpO1xuICAgICAgICAgIHRoYXQuYnVpbGRIaWVyYXJjaHkoJG5vZGVDZWxsLCB0aGlzLCBsZXZlbCArIDEsIG9wdHMsIGNhbGxiYWNrKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSxcbiAgICAvLyBidWlsZCB0aGUgY2hpbGQgbm9kZXMgb2Ygc3BlY2lmaWMgbm9kZVxuICAgIGJ1aWxkQ2hpbGROb2RlOiBmdW5jdGlvbiAoJGFwcGVuZFRvLCBub2RlRGF0YSwgb3B0cywgY2FsbGJhY2spIHtcbiAgICAgIHZhciBvcHRzID0gb3B0cyB8fCAkYXBwZW5kVG8uY2xvc2VzdCgnLm9yZ2NoYXJ0JykuZGF0YSgnb3B0aW9ucycpO1xuICAgICAgdmFyIGRhdGEgPSBub2RlRGF0YS5jaGlsZHJlbiB8fCBub2RlRGF0YS5zaWJsaW5ncztcbiAgICAgICRhcHBlbmRUby5maW5kKCd0ZDpmaXJzdCcpLmF0dHIoJ2NvbHNwYW4nLCBkYXRhLmxlbmd0aCAqIDIpO1xuICAgICAgdGhpcy5idWlsZEhpZXJhcmNoeSgkYXBwZW5kVG8sIHsgJ2NoaWxkcmVuJzogZGF0YSB9LCAwLCBvcHRzLCBjYWxsYmFjayk7XG4gICAgfSxcbiAgICAvLyBleHBvc2VkIG1ldGhvZFxuICAgIGFkZENoaWxkcmVuOiBmdW5jdGlvbiAoJG5vZGUsIGRhdGEsIG9wdHMpIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHZhciBvcHRzID0gb3B0cyB8fCAkbm9kZS5jbG9zZXN0KCcub3JnY2hhcnQnKS5kYXRhKCdvcHRpb25zJyk7XG4gICAgICB2YXIgY291bnQgPSAwO1xuICAgICAgdGhpcy5idWlsZENoaWxkTm9kZSgkbm9kZS5jbG9zZXN0KCd0YWJsZScpLCBkYXRhLCBvcHRzLCBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCsrY291bnQgPT09IGRhdGEuY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgICAgaWYgKCEkbm9kZS5jaGlsZHJlbignLmJvdHRvbUVkZ2UnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICRub2RlLmFwcGVuZCgnPGkgY2xhc3M9XCJlZGdlIHZlcnRpY2FsRWRnZSBib3R0b21FZGdlIGZhXCI+PC9pPicpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoISRub2RlLmZpbmQoJy5zeW1ib2wnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICRub2RlLmNoaWxkcmVuKCcudGl0bGUnKS5wcmVwZW5kKCc8aSBjbGFzcz1cImZhICcrIG9wdHMucGFyZW50Tm9kZVN5bWJvbCArICcgc3ltYm9sXCI+PC9pPicpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGF0LnNob3dDaGlsZHJlbigkbm9kZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgLy8gYnVpbGQgdGhlIHBhcmVudCBub2RlIG9mIHNwZWNpZmljIG5vZGVcbiAgICBidWlsZFBhcmVudE5vZGU6IGZ1bmN0aW9uICgkY3VycmVudFJvb3QsIG5vZGVEYXRhLCBvcHRzLCBjYWxsYmFjaykge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdmFyICR0YWJsZSA9ICQoJzx0YWJsZT4nKTtcbiAgICAgIG5vZGVEYXRhLnJlbGF0aW9uc2hpcCA9IG5vZGVEYXRhLnJlbGF0aW9uc2hpcCB8fCAnMDAxJztcbiAgICAgICQud2hlbih0aGlzLmNyZWF0ZU5vZGUobm9kZURhdGEsIDAsIG9wdHMgfHwgJGN1cnJlbnRSb290LmNsb3Nlc3QoJy5vcmdjaGFydCcpLmRhdGEoJ29wdGlvbnMnKSkpXG4gICAgICAgIC5kb25lKGZ1bmN0aW9uKCRub2RlRGl2KSB7XG4gICAgICAgICAgJHRhYmxlLmFwcGVuZCgkKCc8dHIgY2xhc3M9XCJoaWRkZW5cIj4nKS5hcHBlbmQoJCgnPHRkIGNvbHNwYW49XCIyXCI+JykuYXBwZW5kKCRub2RlRGl2LnJlbW92ZUNsYXNzKCdzbGlkZS11cCcpLmFkZENsYXNzKCdzbGlkZS1kb3duJykpKSk7XG4gICAgICAgICAgJHRhYmxlLmFwcGVuZCgnPHRyIGNsYXNzPVwibGluZXMgaGlkZGVuXCI+PHRkIGNvbHNwYW49XCIyXCI+PGRpdiBjbGFzcz1cImRvd25MaW5lXCI+PC9kaXY+PC90ZD48L3RyPicpO1xuICAgICAgICAgIHZhciBsaW5lc1JvdyA9ICc8dGQgY2xhc3M9XCJyaWdodExpbmVcIj48L3RkPjx0ZCBjbGFzcz1cImxlZnRMaW5lXCI+PC90ZD4nO1xuICAgICAgICAgICR0YWJsZS5hcHBlbmQoJzx0ciBjbGFzcz1cImxpbmVzIGhpZGRlblwiPicgKyBsaW5lc1JvdyArICc8L3RyPicpO1xuICAgICAgICAgIHZhciAkY2hhcnQgPSB0aGF0LiRjaGFydDtcbiAgICAgICAgICAkY2hhcnQucHJlcGVuZCgkdGFibGUpXG4gICAgICAgICAgICAuY2hpbGRyZW4oJ3RhYmxlOmZpcnN0JykuYXBwZW5kKCc8dHIgY2xhc3M9XCJub2Rlc1wiPjx0ZCBjb2xzcGFuPVwiMlwiPjwvdGQ+PC90cj4nKVxuICAgICAgICAgICAgLmNoaWxkcmVuKCd0cjpsYXN0JykuY2hpbGRyZW4oKS5hcHBlbmQoJGNoYXJ0LmNoaWxkcmVuKCd0YWJsZScpLmxhc3QoKSk7XG4gICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmZhaWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ0ZhaWxlZCB0byBjcmVhdGUgcGFyZW50IG5vZGUnKTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICAvLyBleHBvc2VkIG1ldGhvZFxuICAgIGFkZFBhcmVudDogZnVuY3Rpb24gKCRjdXJyZW50Um9vdCwgZGF0YSwgb3B0cykge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdGhpcy5idWlsZFBhcmVudE5vZGUoJGN1cnJlbnRSb290LCBkYXRhLCBvcHRzLCBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCEkY3VycmVudFJvb3QuY2hpbGRyZW4oJy50b3BFZGdlJykubGVuZ3RoKSB7XG4gICAgICAgICAgJGN1cnJlbnRSb290LmNoaWxkcmVuKCcudGl0bGUnKS5hZnRlcignPGkgY2xhc3M9XCJlZGdlIHZlcnRpY2FsRWRnZSB0b3BFZGdlIGZhXCI+PC9pPicpO1xuICAgICAgICB9XG4gICAgICAgIHRoYXQuc2hvd1BhcmVudCgkY3VycmVudFJvb3QpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICAvLyBzdWJzZXF1ZW50IHByb2Nlc3Npbmcgb2YgYnVpbGQgc2libGluZyBub2Rlc1xuICAgIGNvbXBsZW1lbnRMaW5lOiBmdW5jdGlvbiAoJG9uZVNpYmxpbmcsIHNpYmxpbmdDb3VudCwgZXhpc3RpbmdTaWJsaWdDb3VudCkge1xuICAgICAgdmFyIGxpbmVzID0gJyc7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV4aXN0aW5nU2libGlnQ291bnQ7IGkrKykge1xuICAgICAgICBsaW5lcyArPSAnPHRkIGNsYXNzPVwibGVmdExpbmUgdG9wTGluZVwiPjwvdGQ+PHRkIGNsYXNzPVwicmlnaHRMaW5lIHRvcExpbmVcIj48L3RkPic7XG4gICAgICB9XG4gICAgICAkb25lU2libGluZy5wYXJlbnQoKS5wcmV2QWxsKCd0cjpndCgwKScpLmNoaWxkcmVuKCkuYXR0cignY29sc3BhbicsIHNpYmxpbmdDb3VudCAqIDIpXG4gICAgICAgIC5lbmQoKS5uZXh0KCkuY2hpbGRyZW4oJzpmaXJzdCcpLmFmdGVyKGxpbmVzKTtcbiAgICB9LFxuICAgIC8vIGJ1aWxkIHRoZSBzaWJsaW5nIG5vZGVzIG9mIHNwZWNpZmljIG5vZGVcbiAgICBidWlsZFNpYmxpbmdOb2RlOiBmdW5jdGlvbiAoJG5vZGVDaGFydCwgbm9kZURhdGEsIG9wdHMsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB2YXIgb3B0cyA9IG9wdHMgfHwgJG5vZGVDaGFydC5jbG9zZXN0KCcub3JnY2hhcnQnKS5kYXRhKCdvcHRpb25zJyk7XG4gICAgICB2YXIgbmV3U2libGluZ0NvdW50ID0gbm9kZURhdGEuc2libGluZ3MgPyBub2RlRGF0YS5zaWJsaW5ncy5sZW5ndGggOiBub2RlRGF0YS5jaGlsZHJlbi5sZW5ndGg7XG4gICAgICB2YXIgZXhpc3RpbmdTaWJsaWdDb3VudCA9ICRub2RlQ2hhcnQucGFyZW50KCkuaXMoJ3RkJykgPyAkbm9kZUNoYXJ0LmNsb3Nlc3QoJ3RyJykuY2hpbGRyZW4oKS5sZW5ndGggOiAxO1xuICAgICAgdmFyIHNpYmxpbmdDb3VudCA9IGV4aXN0aW5nU2libGlnQ291bnQgKyBuZXdTaWJsaW5nQ291bnQ7XG4gICAgICB2YXIgaW5zZXJ0UG9zdGlvbiA9IChzaWJsaW5nQ291bnQgPiAxKSA/IE1hdGguZmxvb3Ioc2libGluZ0NvdW50LzIgLSAxKSA6IDA7XG4gICAgICAvLyBqdXN0IGJ1aWxkIHRoZSBzaWJsaW5nIG5vZGVzIGZvciB0aGUgc3BlY2lmaWMgbm9kZVxuICAgICAgaWYgKCRub2RlQ2hhcnQucGFyZW50KCkuaXMoJ3RkJykpIHtcbiAgICAgICAgdmFyICRwYXJlbnQgPSAkbm9kZUNoYXJ0LmNsb3Nlc3QoJ3RyJykucHJldkFsbCgndHI6bGFzdCcpO1xuICAgICAgICAkbm9kZUNoYXJ0LmNsb3Nlc3QoJ3RyJykucHJldkFsbCgndHI6bHQoMiknKS5yZW1vdmUoKTtcbiAgICAgICAgdmFyIGNoaWxkQ291bnQgPSAwO1xuICAgICAgICB0aGlzLmJ1aWxkQ2hpbGROb2RlKCRub2RlQ2hhcnQucGFyZW50KCkuY2xvc2VzdCgndGFibGUnKSwgbm9kZURhdGEsIG9wdHMsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmICgrK2NoaWxkQ291bnQgPT09IG5ld1NpYmxpbmdDb3VudCkge1xuICAgICAgICAgICAgdmFyICRzaWJsaW5nVGRzID0gJG5vZGVDaGFydC5wYXJlbnQoKS5jbG9zZXN0KCd0YWJsZScpLmNoaWxkcmVuKCd0cjpsYXN0JykuY2hpbGRyZW4oJ3RkJyk7XG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdTaWJsaWdDb3VudCA+IDEpIHtcbiAgICAgICAgICAgICAgdGhhdC5jb21wbGVtZW50TGluZSgkc2libGluZ1Rkcy5lcSgwKS5iZWZvcmUoJG5vZGVDaGFydC5jbG9zZXN0KCd0ZCcpLnNpYmxpbmdzKCkuYWRkQmFjaygpLnVud3JhcCgpKSwgc2libGluZ0NvdW50LCBleGlzdGluZ1NpYmxpZ0NvdW50KTtcbiAgICAgICAgICAgICAgJHNpYmxpbmdUZHMuYWRkQ2xhc3MoJ2hpZGRlbicpLmZpbmQoJy5ub2RlJykuYWRkQ2xhc3MoJ3NsaWRlLWxlZnQnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoYXQuY29tcGxlbWVudExpbmUoJHNpYmxpbmdUZHMuZXEoaW5zZXJ0UG9zdGlvbikuYWZ0ZXIoJG5vZGVDaGFydC5jbG9zZXN0KCd0ZCcpLnVud3JhcCgpKSwgc2libGluZ0NvdW50LCAxKTtcbiAgICAgICAgICAgICAgJHNpYmxpbmdUZHMubm90KCc6ZXEoJyArIGluc2VydFBvc3Rpb24gKyAxICsgJyknKS5hZGRDbGFzcygnaGlkZGVuJylcbiAgICAgICAgICAgICAgICAuc2xpY2UoMCwgaW5zZXJ0UG9zdGlvbikuZmluZCgnLm5vZGUnKS5hZGRDbGFzcygnc2xpZGUtcmlnaHQnKVxuICAgICAgICAgICAgICAgIC5lbmQoKS5lbmQoKS5zbGljZShpbnNlcnRQb3N0aW9uKS5maW5kKCcubm9kZScpLmFkZENsYXNzKCdzbGlkZS1sZWZ0Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgeyAvLyBidWlsZCB0aGUgc2libGluZyBub2RlcyBhbmQgcGFyZW50IG5vZGUgZm9yIHRoZSBzcGVjaWZpYyBuZG9lXG4gICAgICAgIHZhciBub2RlQ291bnQgPSAwO1xuICAgICAgICB0aGlzLmJ1aWxkSGllcmFyY2h5KCRub2RlQ2hhcnQuY2xvc2VzdCgnLm9yZ2NoYXJ0JyksIG5vZGVEYXRhLCAwLCBvcHRzLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiAoKytub2RlQ291bnQgPT09IHNpYmxpbmdDb3VudCkge1xuICAgICAgICAgICAgdGhhdC5jb21wbGVtZW50TGluZSgkbm9kZUNoYXJ0Lm5leHQoKS5jaGlsZHJlbigndHI6bGFzdCcpXG4gICAgICAgICAgICAgIC5jaGlsZHJlbigpLmVxKGluc2VydFBvc3Rpb24pLmFmdGVyKCQoJzx0ZCBjb2xzcGFuPVwiMlwiPicpXG4gICAgICAgICAgICAgIC5hcHBlbmQoJG5vZGVDaGFydCkpLCBzaWJsaW5nQ291bnQsIDEpO1xuICAgICAgICAgICAgJG5vZGVDaGFydC5jbG9zZXN0KCd0cicpLnNpYmxpbmdzKCkuZXEoMCkuYWRkQ2xhc3MoJ2hpZGRlbicpLmZpbmQoJy5ub2RlJykuYWRkQ2xhc3MoJ3NsaWRlLWRvd24nKTtcbiAgICAgICAgICAgICRub2RlQ2hhcnQucGFyZW50KCkuc2libGluZ3MoKS5hZGRDbGFzcygnaGlkZGVuJylcbiAgICAgICAgICAgICAgLnNsaWNlKDAsIGluc2VydFBvc3Rpb24pLmZpbmQoJy5ub2RlJykuYWRkQ2xhc3MoJ3NsaWRlLXJpZ2h0JylcbiAgICAgICAgICAgICAgLmVuZCgpLmVuZCgpLnNsaWNlKGluc2VydFBvc3Rpb24pLmZpbmQoJy5ub2RlJykuYWRkQ2xhc3MoJ3NsaWRlLWxlZnQnKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vXG4gICAgYWRkU2libGluZ3M6IGZ1bmN0aW9uICgkbm9kZSwgZGF0YSwgb3B0cykge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdGhpcy5idWlsZFNpYmxpbmdOb2RlKCRub2RlLmNsb3Nlc3QoJ3RhYmxlJyksIGRhdGEsIG9wdHMsIGZ1bmN0aW9uKCkge1xuICAgICAgICAkbm9kZS5jbG9zZXN0KCcubm9kZXMnKS5kYXRhKCdzaWJsaW5nc0xvYWRlZCcsIHRydWUpO1xuICAgICAgICBpZiAoISRub2RlLmNoaWxkcmVuKCcubGVmdEVkZ2UnKS5sZW5ndGgpIHtcbiAgICAgICAgICAkbm9kZS5jaGlsZHJlbignLnRvcEVkZ2UnKS5hZnRlcignPGkgY2xhc3M9XCJlZGdlIGhvcml6b250YWxFZGdlIHJpZ2h0RWRnZSBmYVwiPjwvaT48aSBjbGFzcz1cImVkZ2UgaG9yaXpvbnRhbEVkZ2UgbGVmdEVkZ2UgZmFcIj48L2k+Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhhdC5zaG93U2libGluZ3MoJG5vZGUpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICAvL1xuICAgIHJlbW92ZU5vZGVzOiBmdW5jdGlvbiAoJG5vZGUpIHtcbiAgICAgIHZhciAkcGFyZW50ID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKTtcbiAgICAgIHZhciAkc2licyA9ICRwYXJlbnQucGFyZW50KCkuc2libGluZ3MoKTtcbiAgICAgIGlmICgkcGFyZW50LmlzKCd0ZCcpKSB7XG4gICAgICAgIGlmICh0aGlzLmdldE5vZGVTdGF0ZSgkbm9kZSwgJ3NpYmxpbmdzJykuZXhpc3QpIHtcbiAgICAgICAgICAkc2licy5lcSgyKS5jaGlsZHJlbignLnRvcExpbmU6bHQoMiknKS5yZW1vdmUoKTtcbiAgICAgICAgICAkc2licy5zbGljZSgwLCAyKS5jaGlsZHJlbigpLmF0dHIoJ2NvbHNwYW4nLCAkc2licy5lcSgyKS5jaGlsZHJlbigpLmxlbmd0aCk7XG4gICAgICAgICAgJHBhcmVudC5yZW1vdmUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkc2licy5lcSgwKS5jaGlsZHJlbigpLnJlbW92ZUF0dHIoJ2NvbHNwYW4nKVxuICAgICAgICAgICAgLmZpbmQoJy5ib3R0b21FZGdlJykucmVtb3ZlKClcbiAgICAgICAgICAgIC5lbmQoKS5lbmQoKS5zaWJsaW5ncygpLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkcGFyZW50LmFkZCgkcGFyZW50LnNpYmxpbmdzKCkpLnJlbW92ZSgpO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy9cbiAgICBleHBvcnQ6IGZ1bmN0aW9uIChleHBvcnRGaWxlbmFtZSwgZXhwb3J0RmlsZWV4dGVuc2lvbikge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgZXhwb3J0RmlsZW5hbWUgPSAodHlwZW9mIGV4cG9ydEZpbGVuYW1lICE9PSAndW5kZWZpbmVkJykgPyAgZXhwb3J0RmlsZW5hbWUgOiB0aGlzLm9wdGlvbnMuZXhwb3J0RmlsZW5hbWU7XG4gICAgICBleHBvcnRGaWxlZXh0ZW5zaW9uID0gKHR5cGVvZiBleHBvcnRGaWxlZXh0ZW5zaW9uICE9PSAndW5kZWZpbmVkJykgPyAgZXhwb3J0RmlsZWV4dGVuc2lvbiA6IHRoaXMub3B0aW9ucy5leHBvcnRGaWxlZXh0ZW5zaW9uO1xuICAgICAgaWYgKCQodGhpcykuY2hpbGRyZW4oJy5zcGlubmVyJykubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHZhciAkY2hhcnRDb250YWluZXIgPSB0aGlzLiRjaGFydENvbnRhaW5lcjtcbiAgICAgIHZhciAkbWFzayA9ICRjaGFydENvbnRhaW5lci5maW5kKCcubWFzaycpO1xuICAgICAgaWYgKCEkbWFzay5sZW5ndGgpIHtcbiAgICAgICAgJGNoYXJ0Q29udGFpbmVyLmFwcGVuZCgnPGRpdiBjbGFzcz1cIm1hc2tcIj48aSBjbGFzcz1cImZhIGZhLWNpcmNsZS1vLW5vdGNoIGZhLXNwaW4gc3Bpbm5lclwiPjwvaT48L2Rpdj4nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRtYXNrLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgIH1cbiAgICAgIHZhciBzb3VyY2VDaGFydCA9ICRjaGFydENvbnRhaW5lci5hZGRDbGFzcygnY2FudmFzQ29udGFpbmVyJykuZmluZCgnLm9yZ2NoYXJ0Om5vdChcIi5oaWRkZW5cIiknKS5nZXQoMCk7XG4gICAgICB2YXIgZmxhZyA9IHRoYXQub3B0aW9ucy5kaXJlY3Rpb24gPT09ICdsMnInIHx8IHRoYXQub3B0aW9ucy5kaXJlY3Rpb24gPT09ICdyMmwnO1xuICAgICAgaHRtbDJjYW52YXMoc291cmNlQ2hhcnQsIHtcbiAgICAgICAgJ3dpZHRoJzogZmxhZyA/IHNvdXJjZUNoYXJ0LmNsaWVudEhlaWdodCA6IHNvdXJjZUNoYXJ0LmNsaWVudFdpZHRoLFxuICAgICAgICAnaGVpZ2h0JzogZmxhZyA/IHNvdXJjZUNoYXJ0LmNsaWVudFdpZHRoIDogc291cmNlQ2hhcnQuY2xpZW50SGVpZ2h0LFxuICAgICAgICAnb25jbG9uZSc6IGZ1bmN0aW9uIChjbG9uZURvYykge1xuICAgICAgICAgICQoY2xvbmVEb2MpLmZpbmQoJy5jYW52YXNDb250YWluZXInKS5jc3MoJ292ZXJmbG93JywgJ3Zpc2libGUnKVxuICAgICAgICAgICAgLmZpbmQoJy5vcmdjaGFydDpub3QoXCIuaGlkZGVuXCIpOmZpcnN0JykuY3NzKCd0cmFuc2Zvcm0nLCAnJyk7XG4gICAgICAgIH0sXG4gICAgICAgICdvbnJlbmRlcmVkJzogZnVuY3Rpb24gKGNhbnZhcykge1xuICAgICAgICAgICRjaGFydENvbnRhaW5lci5maW5kKCcubWFzaycpLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICBpZiAoZXhwb3J0RmlsZWV4dGVuc2lvbi50b0xvd2VyQ2FzZSgpID09PSAncGRmJykge1xuICAgICAgICAgICAgdmFyIGRvYyA9IHt9O1xuICAgICAgICAgICAgdmFyIGRvY1dpZHRoID0gTWF0aC5mbG9vcihjYW52YXMud2lkdGggKiAwLjI2NDYpO1xuICAgICAgICAgICAgdmFyIGRvY0hlaWdodCA9IE1hdGguZmxvb3IoY2FudmFzLmhlaWdodCAqIDAuMjY0Nik7XG4gICAgICAgICAgICBpZiAoZG9jV2lkdGggPiBkb2NIZWlnaHQpIHtcbiAgICAgICAgICAgICAgZG9jID0gbmV3IGpzUERGKCdsJywgJ21tJywgW2RvY1dpZHRoLCBkb2NIZWlnaHRdKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGRvYyA9IG5ldyBqc1BERigncCcsICdtbScsIFtkb2NIZWlnaHQsIGRvY1dpZHRoXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkb2MuYWRkSW1hZ2UoY2FudmFzLnRvRGF0YVVSTCgpLCAncG5nJywgMCwgMCk7XG4gICAgICAgICAgICBkb2Muc2F2ZShleHBvcnRGaWxlbmFtZSArICcucGRmJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBpc1dlYmtpdCA9ICdXZWJraXRBcHBlYXJhbmNlJyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGU7XG4gICAgICAgICAgICB2YXIgaXNGZiA9ICEhd2luZG93LnNpZGViYXI7XG4gICAgICAgICAgICB2YXIgaXNFZGdlID0gbmF2aWdhdG9yLmFwcE5hbWUgPT09ICdNaWNyb3NvZnQgSW50ZXJuZXQgRXhwbG9yZXInIHx8IChuYXZpZ2F0b3IuYXBwTmFtZSA9PT0gXCJOZXRzY2FwZVwiICYmIG5hdmlnYXRvci5hcHBWZXJzaW9uLmluZGV4T2YoJ0VkZ2UnKSA+IC0xKTtcblxuICAgICAgICAgICAgaWYgKCghaXNXZWJraXQgJiYgIWlzRmYpIHx8IGlzRWRnZSkge1xuICAgICAgICAgICAgICB3aW5kb3cubmF2aWdhdG9yLm1zU2F2ZUJsb2IoY2FudmFzLm1zVG9CbG9iKCksIGV4cG9ydEZpbGVuYW1lICsgJy5wbmcnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHZhciBzZWxlY3RvciA9ICcub2MtZG93bmxvYWQtYnRuJyArICh0aGF0Lm9wdGlvbnMuY2hhcnRDbGFzcyAhPT0gJycgPyAnLicgKyB0aGF0Lm9wdGlvbnMuY2hhcnRDbGFzcyA6ICcnKTtcbiAgICAgICAgICAgICAgaWYgKCEkY2hhcnRDb250YWluZXIuZmluZChzZWxlY3RvcikubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgJGNoYXJ0Q29udGFpbmVyLmFwcGVuZCgnPGEgY2xhc3M9XCJvYy1kb3dubG9hZC1idG4nICsgKHRoYXQub3B0aW9ucy5jaGFydENsYXNzICE9PSAnJyA/ICcgJyArIHRoYXQub3B0aW9ucy5jaGFydENsYXNzIDogJycpICsgJ1wiJ1xuICAgICAgICAgICAgICAgICAgKyAnIGRvd25sb2FkPVwiJyArIGV4cG9ydEZpbGVuYW1lICsgJy5wbmdcIj48L2E+Jyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgJGNoYXJ0Q29udGFpbmVyLmZpbmQoc2VsZWN0b3IpLmF0dHIoJ2hyZWYnLCBjYW52YXMudG9EYXRhVVJMKCkpWzBdLmNsaWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAkY2hhcnRDb250YWluZXIucmVtb3ZlQ2xhc3MoJ2NhbnZhc0NvbnRhaW5lcicpO1xuICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAkY2hhcnRDb250YWluZXIucmVtb3ZlQ2xhc3MoJ2NhbnZhc0NvbnRhaW5lcicpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gICQuZm4ub3JnY2hhcnQgPSBmdW5jdGlvbiAob3B0cykge1xuICAgIHJldHVybiBuZXcgT3JnQ2hhcnQodGhpcywgb3B0cykuaW5pdCgpO1xuICB9O1xuXG59KSk7XG4iXX0=
