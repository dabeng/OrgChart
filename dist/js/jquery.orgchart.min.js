"use strict";!function(e){"object"==typeof module&&"object"==typeof module.exports?e(require("jquery"),window,document):e(jQuery,window,document)}(function(e,t,i,n){var s=function(t,i){this.$chartContainer=e(t),this.opts=i,this.defaultOptions={nodeTitle:"name",nodeId:"id",toggleSiblingsResp:!1,depth:999,chartClass:"",exportButton:!1,exportFilename:"OrgChart",exportFileextension:"png",parentNodeSymbol:"fa-users",draggable:!1,direction:"t2b",pan:!1,zoom:!1,zoominLimit:7,zoomoutLimit:.5}};s.prototype={init:function(t){var i=this;this.options=e.extend({},this.defaultOptions,this.opts,t);var n=this.$chartContainer;this.$chart&&this.$chart.remove();var s=this.options.data,a=this.$chart=e("<div>",{data:{options:this.options},class:"orgchart"+(""!==this.options.chartClass?" "+this.options.chartClass:"")+("t2b"!==this.options.direction?" "+this.options.direction:""),click:function(t){e(t.target).closest(".node").length||a.find(".node.focused").removeClass("focused")}});return"undefined"!=typeof MutationObserver&&this.triggerInitEvent(),"object"===e.type(s)?s instanceof e?this.buildHierarchy(a,this.buildJsonDS(s.children()),0,this.options):this.buildHierarchy(a,this.options.ajaxURL?s:this.attachRel(s,"00"),0,this.options):(a.append('<i class="fa fa-circle-o-notch fa-spin spinner"></i>'),e.ajax({url:s,dataType:"json"}).done(function(e,t,n){i.buildHierarchy(a,i.options.ajaxURL?e:i.attachRel(e,"00"),0,i.options)}).fail(function(e,t,i){console.log(i)}).always(function(){a.children(".spinner").remove()})),n.append(a),this.options.exportButton&&!n.find(".oc-export-btn").length&&this.attachExportButton(),this.options.pan&&this.bindPan(),this.options.zoom&&this.bindZoom(),this},triggerInitEvent:function(){var t=this,i=new MutationObserver(function(n){i.disconnect();e:for(var s=0;s<n.length;s++)for(var a=0;a<n[s].addedNodes.length;a++)if(n[s].addedNodes[a].classList.contains("orgchart")&&t.options.initCompleted&&"function"==typeof t.options.initCompleted){t.options.initCompleted(t.$chart);var d=e.Event("init.orgchart");t.$chart.trigger(d);break e}});i.observe(this.$chartContainer[0],{childList:!0})},attachExportButton:function(){var t=this,i=e("<button>",{class:"oc-export-btn"+(""!==this.options.chartClass?" "+this.options.chartClass:""),text:"Export",click:function(e){e.preventDefault(),t.export()}});this.$chartContainer.append(i)},setOptions:function(e,t){return"string"==typeof e&&("pan"===e&&(t?this.bindPan():this.unbindPan()),"zoom"===e&&(t?this.bindZoom():this.unbindZoom())),"object"==typeof e&&(e.data?this.init(e):(void 0!==e.pan&&(e.pan?this.bindPan():this.unbindPan()),void 0!==e.zoom&&(e.zoom?this.bindZoom():this.unbindZoom()))),this},panStartHandler:function(t){var i=e(t.delegateTarget);if(e(t.target).closest(".node").length||t.touches&&t.touches.length>1)i.data("panning",!1);else{i.css("cursor","move").data("panning",!0);var n=0,s=0,a=i.css("transform");if("none"!==a){var d=a.split(",");-1===a.indexOf("3d")?(n=parseInt(d[4]),s=parseInt(d[5])):(n=parseInt(d[12]),s=parseInt(d[13]))}var o=0,r=0;if(t.targetTouches){if(1===t.targetTouches.length)o=t.targetTouches[0].pageX-n,r=t.targetTouches[0].pageY-s;else if(t.targetTouches.length>1)return}else o=t.pageX-n,r=t.pageY-s;i.on("mousemove touchmove",function(e){if(i.data("panning")){var t=0,n=0;if(e.targetTouches){if(1===e.targetTouches.length)t=e.targetTouches[0].pageX-o,n=e.targetTouches[0].pageY-r;else if(e.targetTouches.length>1)return}else t=e.pageX-o,n=e.pageY-r;var s=i.css("transform");if("none"===s)-1===s.indexOf("3d")?i.css("transform","matrix(1, 0, 0, 1, "+t+", "+n+")"):i.css("transform","matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+t+", "+n+", 0, 1)");else{var a=s.split(",");-1===s.indexOf("3d")?(a[4]=" "+t,a[5]=" "+n+")"):(a[12]=" "+t,a[13]=" "+n),i.css("transform",a.join(","))}}})}},panEndHandler:function(e){e.data.chart.data("panning")&&e.data.chart.data("panning",!1).css("cursor","default").off("mousemove")},bindPan:function(){this.$chartContainer.css("overflow","hidden"),this.$chart.on("mousedown touchstart",this.panStartHandler),e(i).on("mouseup touchend",{chart:this.$chart},this.panEndHandler)},unbindPan:function(){this.$chartContainer.css("overflow","auto"),this.$chart.off("mousedown touchstart",this.panStartHandler),e(i).off("mouseup touchend",this.panEndHandler)},zoomWheelHandler:function(e){var t=e.data.oc;e.preventDefault();var i=1+(e.originalEvent.deltaY>0?-.2:.2);t.setChartScale(t.$chart,i)},zoomStartHandler:function(e){if(e.touches&&2===e.touches.length){var t=e.data.oc;t.$chart.data("pinching",!0);var i=t.getPinchDist(e);t.$chart.data("pinchDistStart",i)}},zoomingHandler:function(e){var t=e.data.oc;if(t.$chart.data("pinching")){var i=t.getPinchDist(e);t.$chart.data("pinchDistEnd",i)}},zoomEndHandler:function(e){var t=e.data.oc;if(t.$chart.data("pinching")){t.$chart.data("pinching",!1);var i=t.$chart.data("pinchDistEnd")-t.$chart.data("pinchDistStart");i>0?t.setChartScale(t.$chart,1.2):i<0&&t.setChartScale(t.$chart,.8)}},bindZoom:function(){this.$chartContainer.on("wheel",{oc:this},this.zoomWheelHandler),this.$chartContainer.on("touchstart",{oc:this},this.zoomStartHandler),e(i).on("touchmove",{oc:this},this.zoomingHandler),e(i).on("touchend",{oc:this},this.zoomEndHandler)},unbindZoom:function(){this.$chartContainer.off("wheel",this.zoomWheelHandler),this.$chartContainer.off("touchstart",this.zoomStartHandler),e(i).off("touchmove",this.zoomingHandler),e(i).off("touchend",this.zoomEndHandler)},getPinchDist:function(e){return Math.sqrt((e.touches[0].clientX-e.touches[1].clientX)*(e.touches[0].clientX-e.touches[1].clientX)+(e.touches[0].clientY-e.touches[1].clientY)*(e.touches[0].clientY-e.touches[1].clientY))},setChartScale:function(e,i){var n=e.data("options"),s=e.css("transform"),a="",d=1;"none"===s?e.css("transform","scale("+i+","+i+")"):(a=s.split(","),-1===s.indexOf("3d")?(d=Math.abs(t.parseFloat(a[3])*i))>n.zoomoutLimit&&d<n.zoominLimit&&e.css("transform",s+" scale("+i+","+i+")"):(d=Math.abs(t.parseFloat(a[1])*i))>n.zoomoutLimit&&d<n.zoominLimit&&e.css("transform",s+" scale3d("+i+","+i+", 1)"))},buildJsonDS:function(t){var i=this,n={name:t.contents().eq(0).text().trim(),relationship:(t.parent().parent().is("li")?"1":"0")+(t.siblings("li").length?1:0)+(t.children("ul").length?1:0)};return t.attr("data-id")&&(n.id=t.attr("data-id")),t.children("ul").children().each(function(){n.children||(n.children=[]),n.children.push(i.buildJsonDS(e(this)))}),n},attachRel:function(e,t){var i=this;return e.relationship=t+(e.children&&e.children.length>0?1:0),e.children&&e.children.forEach(function(t){i.attachRel(t,"1"+(e.children.length>1?1:0))}),e},loopChart:function(t){var i=this,n=t.find("tr:first"),s={id:n.find(".node")[0].id};return n.siblings(":last").children().each(function(){s.children||(s.children=[]),s.children.push(i.loopChart(e(this)))}),s},getHierarchy:function(){if(void 0===this.$chart)return"Error: orgchart does not exist";if(!this.$chart.find(".node").length)return"Error: nodes do not exist";var e=!0;return this.$chart.find(".node").each(function(){if(!this.id)return e=!1,!1}),e?this.loopChart(this.$chart):"Error: All nodes of orghcart to be exported must have data-id attribute!"},getNodeState:function(e,t){var i={};if("parent"===(t=t||"self")){if((i=e.closest(".nodes").siblings(":first")).length)return i.is(".hidden")||!i.is(".hidden")&&i.closest(".nodes").is(".hidden")?{exist:!0,visible:!1}:{exist:!0,visible:!0}}else if("children"===t){if((i=e.closest("tr").siblings(":last")).length)return i.is(".hidden")?{exist:!0,visible:!1}:{exist:!0,visible:!0}}else if("siblings"===t){if((i=e.closest("table").parent().siblings()).length)return i.is(".hidden")||i.parent().is(".hidden")?{exist:!0,visible:!1}:{exist:!0,visible:!0}}else if((i=e).length)return i.closest(".nodes").length&&i.closest(".nodes").is(".hidden")||i.closest("table").parent().length&&i.closest("table").parent().is(".hidden")||i.parent().is("li")&&(i.closest("ul").is(".hidden")||i.closest("verticalNodes").is(".hidden"))?{exist:!0,visible:!1}:{exist:!0,visible:!0};return{exist:!1,visible:!1}},getRelatedNodes:function(t,i){return t&&t instanceof e&&t.is(".node")?"parent"===i?t.closest(".nodes").parent().children(":first").find(".node"):"children"===i?t.closest("tr").siblings(".nodes").children().find(".node:first"):"siblings"===i?t.closest("table").parent().siblings().find(".node:first"):e():e()},hideParentEnd:function(t){e(t.target).removeClass("sliding"),t.data.upperLevel.addClass("hidden").slice(1).removeAttr("style")},hideParent:function(e){var t=e.closest(".nodes").siblings();t.eq(0).find(".spinner").length&&e.closest(".orgchart").data("inAjax",!1),this.getNodeState(e,"siblings").visible&&this.hideSiblings(e);t.slice(1).css("visibility","hidden");var i=t.eq(0).find(".node");this.getNodeState(i).visible&&i.addClass("sliding slide-down").one("transitionend",{upperLevel:t},this.hideParentEnd),this.getNodeState(i,"parent").visible&&this.hideParent(i)},showParentEnd:function(t){var i=t.data.node;e(t.target).removeClass("sliding"),this.isInAction(i)&&this.switchVerticalArrow(i.children(".topEdge"))},showParent:function(e){var t=e.closest(".nodes").siblings().removeClass("hidden");t.eq(2).children().slice(1,-1).addClass("hidden");var i=t.eq(0).find(".node");this.repaint(i[0]),i.addClass("sliding").removeClass("slide-down").one("transitionend",{node:e},this.showParentEnd.bind(this))},stopAjax:function(e){e.find(".spinner").length&&e.closest(".orgchart").data("inAjax",!1)},isVisibleNode:function(t,i){return this.getNodeState(e(i)).visible},hideChildrenEnd:function(e){e.data.animatedNodes.removeClass("sliding"),e.data.isVerticalDesc?e.data.lowerLevel.addClass("hidden"):(e.data.animatedNodes.closest(".nodes").prevAll(".lines").removeAttr("style").addBack().addClass("hidden"),e.data.lowerLevel.last().find(".verticalNodes").addClass("hidden")),this.isInAction(e.data.node)&&this.switchVerticalArrow(e.data.node.children(".bottomEdge"))},hideChildren:function(e){var t=e.closest("tr").siblings();this.stopAjax(t.last());var i=t.last().find(".node").filter(this.isVisibleNode.bind(this)),n=!!t.last().is(".verticalNodes");n||i.closest("table").closest("tr").prevAll(".lines").css("visibility","hidden"),this.repaint(i.get(0)),i.addClass("sliding slide-up").eq(0).one("transitionend",{animatedNodes:i,lowerLevel:t,isVerticalDesc:n,node:e},this.hideChildrenEnd.bind(this))},showChildrenEnd:function(e){var t=e.data.node;e.data.animatedNodes.removeClass("sliding"),this.isInAction(t)&&this.switchVerticalArrow(t.children(".bottomEdge"))},showChildren:function(e){var t=e.closest("tr").siblings(),i=!!t.is(".verticalNodes")?t.removeClass("hidden").find(".node").filter(this.isVisibleNode.bind(this)):t.removeClass("hidden").eq(2).children().find(".node:first").filter(this.isVisibleNode.bind(this));this.repaint(i.get(0)),i.addClass("sliding").removeClass("slide-up").eq(0).one("transitionend",{node:e,animatedNodes:i},this.showChildrenEnd.bind(this))},hideSiblingsEnd:function(e){var t=e.data.node,i=e.data.nodeContainer,n=e.data.direction;e.data.lines.removeAttr("style");var s=n?"left"===n?i.prevAll(":not(.hidden)"):i.nextAll(":not(.hidden)"):i.siblings();i.closest(".nodes").prev().children(":not(.hidden)").slice(1,n?2*s.length+1:-1).addClass("hidden"),e.data.animatedNodes.removeClass("sliding"),s.find(".node:gt(0)").filter(this.isVisibleNode.bind(this)).removeClass("slide-left slide-right").addClass("slide-up"),s.find(".lines, .nodes, .verticalNodes").addClass("hidden").end().addClass("hidden"),this.isInAction(t)&&this.switchHorizontalArrow(t)},hideSiblings:function(e,t){var i=e.closest("table").parent();i.siblings().find(".spinner").length&&e.closest(".orgchart").data("inAjax",!1),t?"left"===t?i.prevAll().find(".node").filter(this.isVisibleNode.bind(this)).addClass("sliding slide-right"):i.nextAll().find(".node").filter(this.isVisibleNode.bind(this)).addClass("sliding slide-left"):(i.prevAll().find(".node").filter(this.isVisibleNode.bind(this)).addClass("sliding slide-right"),i.nextAll().find(".node").filter(this.isVisibleNode.bind(this)).addClass("sliding slide-left"));var n=i.siblings().find(".sliding"),s=n.closest(".nodes").prevAll(".lines").css("visibility","hidden");n.eq(0).one("transitionend",{node:e,nodeContainer:i,direction:t,animatedNodes:n,lines:s},this.hideSiblingsEnd.bind(this))},showSiblingsEnd:function(e){var t=e.data.node;e.data.visibleNodes.removeClass("sliding"),this.isInAction(t)&&(this.switchHorizontalArrow(t),t.children(".topEdge").removeClass("fa-chevron-up").addClass("fa-chevron-down"))},showRelatedParentEnd:function(t){e(t.target).removeClass("sliding")},showSiblings:function(t,i){var n=e();n=i?"left"===i?t.closest("table").parent().prevAll().removeClass("hidden"):t.closest("table").parent().nextAll().removeClass("hidden"):t.closest("table").parent().siblings().removeClass("hidden");var s=t.closest("table").closest("tr").siblings();if(i?s.eq(2).children(".hidden").slice(0,2*n.length).removeClass("hidden"):s.eq(2).children(".hidden").removeClass("hidden"),!this.getNodeState(t,"parent").visible){s.removeClass("hidden");var a=s.find(".node")[0];this.repaint(a),e(a).addClass("sliding").removeClass("slide-down").one("transitionend",this.showRelatedParentEnd)}var d=n.find(".node").filter(this.isVisibleNode.bind(this));this.repaint(d.get(0)),d.addClass("sliding").removeClass("slide-left slide-right"),d.eq(0).one("transitionend",{node:t,visibleNodes:d},this.showSiblingsEnd.bind(this))},startLoading:function(t){var i=this.$chart;return(void 0===i.data("inAjax")||!0!==i.data("inAjax"))&&(t.addClass("hidden"),t.parent().append('<i class="fa fa-circle-o-notch fa-spin spinner"></i>').children().not(".spinner").css("opacity",.2),i.data("inAjax",!0),e(".oc-export-btn"+(""!==this.options.chartClass?"."+this.options.chartClass:"")).prop("disabled",!0),!0)},endLoading:function(t){var i=t.parent();t.removeClass("hidden"),i.find(".spinner").remove(),i.children().removeAttr("style"),this.$chart.data("inAjax",!1),e(".oc-export-btn"+(""!==this.options.chartClass?"."+this.options.chartClass:"")).prop("disabled",!1)},isInAction:function(e){return e.children(".edge").attr("class").indexOf("fa-")>-1},switchVerticalArrow:function(e){e.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down")},switchHorizontalArrow:function(e){var t=e.closest(".orgchart").data("options");if(t.toggleSiblingsResp&&(void 0===t.ajaxURL||e.closest(".nodes").data("siblingsLoaded"))){var i=e.closest("table").parent().prev();i.length&&(i.is(".hidden")?e.children(".leftEdge").addClass("fa-chevron-left").removeClass("fa-chevron-right"):e.children(".leftEdge").addClass("fa-chevron-right").removeClass("fa-chevron-left"));var n=e.closest("table").parent().next();n.length&&(n.is(".hidden")?e.children(".rightEdge").addClass("fa-chevron-right").removeClass("fa-chevron-left"):e.children(".rightEdge").addClass("fa-chevron-left").removeClass("fa-chevron-right"))}else{var s=e.closest("table").parent().siblings(),a=!!s.length&&!s.is(".hidden");e.children(".leftEdge").toggleClass("fa-chevron-right",a).toggleClass("fa-chevron-left",!a),e.children(".rightEdge").toggleClass("fa-chevron-left",a).toggleClass("fa-chevron-right",!a)}},repaint:function(e){e&&(e.style.offsetWidth=e.offsetWidth)},nodeEnterLeaveHandler:function(t){var i=e(t.delegateTarget),n=!1,s=i.children(".topEdge"),a=(i.children(".rightEdge"),i.children(".bottomEdge")),d=i.children(".leftEdge");"mouseenter"===t.type?(s.length&&(n=this.getNodeState(i,"parent").visible,s.toggleClass("fa-chevron-up",!n).toggleClass("fa-chevron-down",n)),a.length&&(n=this.getNodeState(i,"children").visible,a.toggleClass("fa-chevron-down",!n).toggleClass("fa-chevron-up",n)),d.length&&this.switchHorizontalArrow(i)):i.children(".edge").removeClass("fa-chevron-up fa-chevron-down fa-chevron-right fa-chevron-left")},nodeClickHandler:function(t){this.$chart.find(".focused").removeClass("focused"),e(t.delegateTarget).addClass("focused")},loadNodes:function(t,i,n){var s=this,a=this.options;e.ajax({url:i,dataType:"json"}).done(function(i){s.$chart.data("inAjax")&&("parent"===t?e.isEmptyObject(i)||s.addParent(n.parent(),i,a):"children"===t?i.children.length&&s.addChildren(n.parent(),i,e.extend({},a,{depth:0})):(i.siblings||i.children)&&s.addSiblings(n.parent(),i,a))}).fail(function(){console.log("Failed to get "+t+" data")}).always(function(){s.endLoading(n)})},HideFirstParentEnd:function(e){var t=e.data.topEdge,i=t.parent();this.isInAction(i)&&(this.switchVerticalArrow(t),this.switchHorizontalArrow(i))},topEdgeClickHandler:function(t){t.stopPropagation();var i=e(t.target),n=e(t.delegateTarget),s=this.getNodeState(n,"parent");if(s.exist){var a=n.closest("table").closest("tr").siblings(":first").find(".node");if(a.is(".sliding"))return;s.visible?(this.hideParent(n),a.one("transitionend",{topEdge:i},this.HideFirstParentEnd.bind(this))):this.showParent(n)}else if(this.startLoading(i)){var d=this.options,o=e.isFunction(d.ajaxURL.parent)?d.ajaxURL.parent(t.data.nodeData):d.ajaxURL.parent+n[0].id;this.loadNodes("parent",o,i)}},bottomEdgeClickHandler:function(t){t.stopPropagation();var i=e(t.target),n=e(t.delegateTarget),s=this.getNodeState(n,"children");if(s.exist){if(n.closest("tr").siblings(":last").find(".sliding").length)return;s.visible?this.hideChildren(n):this.showChildren(n)}else if(this.startLoading(i)){var a=this.options,d=e.isFunction(a.ajaxURL.children)?a.ajaxURL.children(t.data.nodeData):a.ajaxURL.children+n[0].id;this.loadNodes("children",d,i)}},hEdgeClickHandler:function(t){t.stopPropagation();var i=e(t.target),n=e(t.delegateTarget),s=this.options,a=this.getNodeState(n,"siblings");if(a.exist){if(n.closest("table").parent().siblings().find(".sliding").length)return;if(s.toggleSiblingsResp){var d=n.closest("table").parent().prev(),o=n.closest("table").parent().next();i.is(".leftEdge")?d.is(".hidden")?this.showSiblings(n,"left"):this.hideSiblings(n,"left"):o.is(".hidden")?this.showSiblings(n,"right"):this.hideSiblings(n,"right")}else a.visible?this.hideSiblings(n):this.showSiblings(n)}else if(this.startLoading(i)){var r=n[0].id,l=this.getNodeState(n,"parent").exist?e.isFunction(s.ajaxURL.siblings)?s.ajaxURL.siblings(t.data.nodeData):s.ajaxURL.siblings+r:e.isFunction(s.ajaxURL.families)?s.ajaxURL.families(t.data.nodeData):s.ajaxURL.families+r;this.loadNodes("siblings",l,i)}},expandVNodesEnd:function(e){e.data.vNodes.removeClass("sliding")},collapseVNodesEnd:function(e){e.data.vNodes.removeClass("sliding").closest("ul").addClass("hidden")},toggleVNodes:function(t){var i=e(t.target),n=i.parent().next(),s=n.find(".node"),a=n.children().children(".node");a.is(".sliding")||(i.toggleClass("fa-plus-square fa-minus-square"),s.eq(0).is(".slide-up")?(n.removeClass("hidden"),this.repaint(a.get(0)),a.addClass("sliding").removeClass("slide-up").eq(0).one("transitionend",{vNodes:a},this.expandVNodesEnd)):(s.addClass("sliding slide-up").eq(0).one("transitionend",{vNodes:s},this.collapseVNodesEnd),s.find(".toggleBtn").removeClass("fa-minus-square").addClass("fa-plus-square")))},createGhostNode:function(n){var s=e(n.target),a=this.options,d=n.originalEvent,o=/firefox/.test(t.navigator.userAgent.toLowerCase());o&&d.dataTransfer.setData("text/html","hack for firefox");var r,l;i.querySelector(".ghost-node")?(r=s.closest(".orgchart").children(".ghost-node").get(0),l=e(r).children().get(0)):((r=i.createElementNS("http://www.w3.org/2000/svg","svg")).classList.add("ghost-node"),l=i.createElementNS("http://www.w3.org/2000/svg","rect"),r.appendChild(l),s.closest(".orgchart").append(r));var h=s.closest(".orgchart").css("transform").split(","),c=Math.abs(t.parseFloat("t2b"===a.direction||"b2t"===a.direction?h[0].slice(h[0].indexOf("(")+1):h[1]));r.setAttribute("width",s.outerWidth(!1)),r.setAttribute("height",s.outerHeight(!1)),l.setAttribute("x",5*c),l.setAttribute("y",5*c),l.setAttribute("width",120*c),l.setAttribute("height",40*c),l.setAttribute("rx",4*c),l.setAttribute("ry",4*c),l.setAttribute("stroke-width",1*c);var g=d.offsetX*c,p=d.offsetY*c;if("l2r"===a.direction?(g=d.offsetY*c,p=d.offsetX*c):"r2l"===a.direction?(g=s.outerWidth(!1)-d.offsetY*c,p=d.offsetX*c):"b2t"===a.direction&&(g=s.outerWidth(!1)-d.offsetX*c,p=s.outerHeight(!1)-d.offsetY*c),o){l.setAttribute("fill","rgb(255, 255, 255)"),l.setAttribute("stroke","rgb(191, 0, 0)");var f=i.createElement("img");f.src="data:image/svg+xml;utf8,"+(new XMLSerializer).serializeToString(r),d.dataTransfer.setDragImage(f,g,p)}else d.dataTransfer.setDragImage(r,g,p)},filterAllowedDropNodes:function(t){var i=this.options,n=t.closest(".nodes").siblings().eq(0).find(".node:first"),s=t.closest("table").find(".node");this.$chart.data("dragged",t).find(".node").each(function(a,d){-1===s.index(d)&&(i.dropCriteria?i.dropCriteria(t,n,e(d))&&e(d).addClass("allowedDrop"):e(d).addClass("allowedDrop"))})},dragstartHandler:function(t){"none"!==this.$chart.css("transform")&&this.createGhostNode(t),this.filterAllowedDropNodes(e(t.target))},dragoverHandler:function(t){t.preventDefault(),e(t.delegateTarget).is(".allowedDrop")||(t.originalEvent.dataTransfer.dropEffect="none")},dragendHandler:function(e){this.$chart.find(".allowedDrop").removeClass("allowedDrop")},dropHandler:function(t){var i=e(t.delegateTarget),n=this.$chart.data("dragged"),s=n.closest(".nodes").siblings().eq(0).children(),a=e.Event("nodedrop.orgchart");if(this.$chart.trigger(a,{draggedNode:n,dragZone:s.children(),dropZone:i}),!a.isDefaultPrevented()){if(i.closest("tr").siblings().length){var d=parseInt(i.parent().attr("colspan"))+2,o='<i class="edge horizontalEdge rightEdge fa"></i><i class="edge horizontalEdge leftEdge fa"></i>';i.closest("tr").next().addBack().children().attr("colspan",d),n.find(".horizontalEdge").length||n.append(o),i.closest("tr").siblings().eq(1).children(":last").before('<td class="leftLine topLine"></td><td class="rightLine topLine"></td>').end().next().append(n.closest("table").parent());var r=n.closest("table").parent().siblings().find(".node:first");1===r.length&&r.append(o)}else i.append('<i class="edge verticalEdge bottomEdge fa"></i>').parent().attr("colspan",2).parent().after('<tr class="lines"><td colspan="2"><div class="downLine"></div></td></tr><tr class="lines"><td class="rightLine"></td><td class="leftLine"></td></tr><tr class="nodes"></tr>').siblings(":last").append(n.find(".horizontalEdge").remove().end().closest("table").parent());var l=parseInt(s.attr("colspan"));if(l>2){s.attr("colspan",l-2).parent().next().children().attr("colspan",l-2).end().next().children().slice(1,3).remove();var h=s.parent().siblings(".nodes").children().find(".node:first");1===h.length&&h.find(".horizontalEdge").remove()}else s.removeAttr("colspan").find(".bottomEdge").remove().end().end().siblings().remove()}},createNode:function(t,i,n){t.children||(t.children=[]),e.each(t.children,function(e,i){i.parentId=t.id});var s=e.Deferred(),a=e("<div"+(n.draggable?' draggable="true"':"")+(t[n.nodeId]?' id="'+t[n.nodeId]+'"':"")+(t.parentId?' data-parent="'+t.parentId+'"':"")+">").addClass("node "+(t.className||"")+(i>=n.depth?" slide-up":""));if(n.nodeTemplate)a.append(n.nodeTemplate(t));else{var d=void 0!==n.nodeContent;a.addClass(d?"withContent":"").append('<div class="title '+(d?"withContent":"")+'">'+t[n.nodeTitle]+"</div>").append(d?'<div class="content">'+(t[n.nodeContent]||"")+"</div>":"")}var o=t.relationship||"";if(n.verticalDepth&&i+2>n.verticalDepth){if(i+1>=n.verticalDepth&&Number(o.substr(2,1))){var r=i+1>=n.depth?"plus":"minus";a.append('<i class="toggleBtn fa fa-'+r+'-square"></i>')}}else Number(o.substr(0,1))&&a.append('<i class="edge verticalEdge topEdge fa"></i>'),Number(o.substr(1,1))&&a.append('<i class="edge horizontalEdge rightEdge fa"></i><i class="edge horizontalEdge leftEdge fa"></i>'),Number(o.substr(2,1))&&a.append('<i class="edge verticalEdge bottomEdge fa"></i>').children(".title").prepend('<i class="fa '+n.parentNodeSymbol+' symbol"></i>');return a.on("mouseenter mouseleave",this.nodeEnterLeaveHandler.bind(this)),a.on("click",this.nodeClickHandler.bind(this)),a.on("click",".topEdge",{nodeData:t},this.topEdgeClickHandler.bind(this)),a.on("click",".bottomEdge",{nodeData:t},this.bottomEdgeClickHandler.bind(this)),a.on("click",".leftEdge, .rightEdge",{nodeData:t},this.hEdgeClickHandler.bind(this)),a.on("click",".toggleBtn",this.toggleVNodes.bind(this)),n.draggable&&a.on("dragstart",this.dragstartHandler.bind(this)).on("dragover",this.dragoverHandler.bind(this)).on("dragend",this.dragendHandler.bind(this)).on("drop",this.dropHandler.bind(this)),n.createNode&&n.createNode(a,t),s.resolve(a),s.promise()},buildHierarchy:function(t,i,n,s,a){var d,o=this,r=i.children,l=!!r&&r.length,h=!!(s.verticalDepth&&n+1>=s.verticalDepth);if(Object.keys(i).length>1&&(d=h?t:e("<table>"),h||t.append(d),e.when(this.createNode(i,n,s)).done(function(t){h?d.append(t):d.append(e("<tr/>").append(e("<td"+(l?' colspan="'+2*r.length+'"':"")+"></td>").append(t))),a&&a()}).fail(function(){console.log("Failed to creat node")})),l){1===Object.keys(i).length&&(d=t);var c=n+1>=s.depth||i.collapsed?" hidden":"",g=!!(s.verticalDepth&&n+2>=s.verticalDepth);g||d.append('<tr class="lines'+c+'"><td colspan="'+2*r.length+'"><div class="downLine"></div></td></tr>');for(var p='<tr class="lines'+c+'"><td class="rightLine"></td>',f=1;f<r.length;f++)p+='<td class="leftLine topLine"></td><td class="rightLine topLine"></td>';p+='<td class="leftLine"></td></tr>';var v;g?(v=e("<ul>"),c&&s.depth+1!==s.verticalDepth&&v.addClass(c),n+2===s.verticalDepth?d.append('<tr class="verticalNodes'+c+'"><td></td></tr>').find(".verticalNodes").children().append(v):d.append(v)):(v=e('<tr class="nodes'+c+'">'),d.append(p).append(v)),e.each(r,function(){var t=e(g?"<li>":'<td colspan="2">');v.append(t),o.buildHierarchy(t,this,n+1,s,a)})}},buildChildNode:function(e,t,i,n){i=i||e.closest(".orgchart").data("options");var s=t.children||t.siblings;e.find("td:first").attr("colspan",2*s.length),this.buildHierarchy(e,{children:s},0,i,n)},addChildren:function(e,t,i){var n=this,s=(i=i||e.closest(".orgchart").data("options"),0);this.buildChildNode(e.closest("table"),t,i,function(){++s===t.children.length&&(e.children(".bottomEdge").length||e.append('<i class="edge verticalEdge bottomEdge fa"></i>'),e.find(".symbol").length||e.children(".title").prepend('<i class="fa '+i.parentNodeSymbol+' symbol"></i>'),n.showChildren(e))})},buildParentNode:function(t,i,n,s){var a=this,d=e("<table>");i.relationship=i.relationship||"001",e.when(this.createNode(i,0,n||t.closest(".orgchart").data("options"))).done(function(t){d.append(e('<tr class="hidden">').append(e('<td colspan="2">').append(t.removeClass("slide-up").addClass("slide-down")))),d.append('<tr class="lines hidden"><td colspan="2"><div class="downLine"></div></td></tr>');d.append('<tr class="lines hidden"><td class="rightLine"></td><td class="leftLine"></td></tr>');var i=a.$chart;i.prepend(d).children("table:first").append('<tr class="nodes"><td colspan="2"></td></tr>').children("tr:last").children().append(i.children("table").last()),s()}).fail(function(){console.log("Failed to create parent node")})},addParent:function(e,t,i){var n=this;this.buildParentNode(e,t,i,function(){e.children(".topEdge").length||e.children(".title").after('<i class="edge verticalEdge topEdge fa"></i>'),n.showParent(e)})},complementLine:function(e,t,i){for(var n="",s=0;s<i;s++)n+='<td class="leftLine topLine"></td><td class="rightLine topLine"></td>';e.parent().prevAll("tr:gt(0)").children().attr("colspan",2*t).end().next().children(":first").after(n)},buildSiblingNode:function(t,i,n,s){var a=this,d=(n=n||t.closest(".orgchart").data("options"),i.siblings?i.siblings.length:i.children.length),o=t.parent().is("td")?t.closest("tr").children().length:1,r=o+d,l=r>1?Math.floor(r/2-1):0;if(t.parent().is("td")){t.closest("tr").prevAll("tr:last");t.closest("tr").prevAll("tr:lt(2)").remove();var h=0;this.buildChildNode(t.parent().closest("table"),i,n,function(){if(++h===d){var e=t.parent().closest("table").children("tr:last").children("td");o>1?(a.complementLine(e.eq(0).before(t.closest("td").siblings().addBack().unwrap()),r,o),e.addClass("hidden").find(".node").addClass("slide-left")):(a.complementLine(e.eq(l).after(t.closest("td").unwrap()),r,1),e.not(":eq("+l+"1)").addClass("hidden").slice(0,l).find(".node").addClass("slide-right").end().end().slice(l).find(".node").addClass("slide-left")),s()}})}else{var c=0;this.buildHierarchy(t.closest(".orgchart"),i,0,n,function(){++c===r&&(a.complementLine(t.next().children("tr:last").children().eq(l).after(e('<td colspan="2">').append(t)),r,1),t.closest("tr").siblings().eq(0).addClass("hidden").find(".node").addClass("slide-down"),t.parent().siblings().addClass("hidden").slice(0,l).find(".node").addClass("slide-right").end().end().slice(l).find(".node").addClass("slide-left"),s())})}},addSiblings:function(e,t,i){var n=this;this.buildSiblingNode(e.closest("table"),t,i,function(){e.closest(".nodes").data("siblingsLoaded",!0),e.children(".leftEdge").length||e.children(".topEdge").after('<i class="edge horizontalEdge rightEdge fa"></i><i class="edge horizontalEdge leftEdge fa"></i>'),n.showSiblings(e)})},removeNodes:function(e){var t=e.closest("table").parent(),i=t.parent().siblings();t.is("td")?this.getNodeState(e,"siblings").exist?(i.eq(2).children(".topLine:lt(2)").remove(),i.slice(0,2).children().attr("colspan",i.eq(2).children().length),t.remove()):i.eq(0).children().removeAttr("colspan").find(".bottomEdge").remove().end().end().siblings().remove():t.add(t.siblings()).remove()},export:function(n,s){var a=this;if(n=void 0!==n?n:this.options.exportFilename,s=void 0!==s?s:this.options.exportFileextension,e(this).children(".spinner").length)return!1;var d=this.$chartContainer,o=d.find(".mask");o.length?o.removeClass("hidden"):d.append('<div class="mask"><i class="fa fa-circle-o-notch fa-spin spinner"></i></div>');var r=d.addClass("canvasContainer").find('.orgchart:not(".hidden")').get(0),l="l2r"===a.options.direction||"r2l"===a.options.direction;html2canvas(r,{width:l?r.clientHeight:r.clientWidth,height:l?r.clientWidth:r.clientHeight,onclone:function(t){e(t).find(".canvasContainer").css("overflow","visible").find('.orgchart:not(".hidden"):first').css("transform","")},onrendered:function(e){if(d.find(".mask").addClass("hidden"),"pdf"===s.toLowerCase()){var o={},r=Math.floor(.2646*e.width),l=Math.floor(.2646*e.height);(o=r>l?new jsPDF("l","mm",[r,l]):new jsPDF("p","mm",[l,r])).addImage(e.toDataURL(),"png",0,0),o.save(n+".pdf")}else{var h="WebkitAppearance"in i.documentElement.style,c=!!t.sidebar,g="Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&navigator.appVersion.indexOf("Edge")>-1;if(!h&&!c||g)t.navigator.msSaveBlob(e.msToBlob(),n+".png");else{var p=".oc-download-btn"+(""!==a.options.chartClass?"."+a.options.chartClass:"");d.find(p).length||d.append('<a class="oc-download-btn'+(""!==a.options.chartClass?" "+a.options.chartClass:"")+'" download="'+n+'.png"></a>'),d.find(p).attr("href",e.toDataURL())[0].click()}}}}).then(function(){d.removeClass("canvasContainer")},function(){d.removeClass("canvasContainer")})}},e.fn.orgchart=function(e){return new s(this,e).init()}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5vcmdjaGFydC5qcyJdLCJuYW1lcyI6WyJmYWN0b3J5IiwibW9kdWxlIiwiZXhwb3J0cyIsInJlcXVpcmUiLCJ3aW5kb3ciLCJkb2N1bWVudCIsImpRdWVyeSIsIiQiLCJ1bmRlZmluZWQiLCJPcmdDaGFydCIsImVsZW0iLCJvcHRzIiwidGhpcyIsIiRjaGFydENvbnRhaW5lciIsImRlZmF1bHRPcHRpb25zIiwibm9kZVRpdGxlIiwibm9kZUlkIiwidG9nZ2xlU2libGluZ3NSZXNwIiwiZGVwdGgiLCJjaGFydENsYXNzIiwiZXhwb3J0QnV0dG9uIiwiZXhwb3J0RmlsZW5hbWUiLCJleHBvcnRGaWxlZXh0ZW5zaW9uIiwicGFyZW50Tm9kZVN5bWJvbCIsImRyYWdnYWJsZSIsImRpcmVjdGlvbiIsInBhbiIsInpvb20iLCJ6b29taW5MaW1pdCIsInpvb21vdXRMaW1pdCIsInByb3RvdHlwZSIsImluaXQiLCJ0aGF0Iiwib3B0aW9ucyIsImV4dGVuZCIsIiRjaGFydCIsInJlbW92ZSIsImRhdGEiLCJjbGFzcyIsImNsaWNrIiwiZXZlbnQiLCJ0YXJnZXQiLCJjbG9zZXN0IiwibGVuZ3RoIiwiZmluZCIsInJlbW92ZUNsYXNzIiwiTXV0YXRpb25PYnNlcnZlciIsInRyaWdnZXJJbml0RXZlbnQiLCJ0eXBlIiwiYnVpbGRIaWVyYXJjaHkiLCJidWlsZEpzb25EUyIsImNoaWxkcmVuIiwiYWpheFVSTCIsImF0dGFjaFJlbCIsImFwcGVuZCIsImFqYXgiLCJ1cmwiLCJkYXRhVHlwZSIsImRvbmUiLCJ0ZXh0U3RhdHVzIiwianFYSFIiLCJmYWlsIiwiZXJyb3JUaHJvd24iLCJjb25zb2xlIiwibG9nIiwiYWx3YXlzIiwiYXR0YWNoRXhwb3J0QnV0dG9uIiwiYmluZFBhbiIsImJpbmRab29tIiwibW8iLCJtdXRhdGlvbnMiLCJkaXNjb25uZWN0IiwiaW5pdFRpbWUiLCJpIiwiaiIsImFkZGVkTm9kZXMiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImluaXRDb21wbGV0ZWQiLCJpbml0RXZlbnQiLCJFdmVudCIsInRyaWdnZXIiLCJvYnNlcnZlIiwiY2hpbGRMaXN0IiwiJGV4cG9ydEJ0biIsInRleHQiLCJlIiwicHJldmVudERlZmF1bHQiLCJleHBvcnQiLCJzZXRPcHRpb25zIiwidmFsIiwidW5iaW5kUGFuIiwidW5iaW5kWm9vbSIsInBhblN0YXJ0SGFuZGxlciIsImRlbGVnYXRlVGFyZ2V0IiwidG91Y2hlcyIsImNzcyIsImxhc3RYIiwibGFzdFkiLCJsYXN0VGYiLCJ0ZW1wIiwic3BsaXQiLCJpbmRleE9mIiwicGFyc2VJbnQiLCJzdGFydFgiLCJzdGFydFkiLCJ0YXJnZXRUb3VjaGVzIiwicGFnZVgiLCJwYWdlWSIsIm9uIiwibmV3WCIsIm5ld1kiLCJtYXRyaXgiLCJqb2luIiwicGFuRW5kSGFuZGxlciIsImNoYXJ0Iiwib2ZmIiwiem9vbVdoZWVsSGFuZGxlciIsIm9jIiwibmV3U2NhbGUiLCJvcmlnaW5hbEV2ZW50IiwiZGVsdGFZIiwic2V0Q2hhcnRTY2FsZSIsInpvb21TdGFydEhhbmRsZXIiLCJkaXN0IiwiZ2V0UGluY2hEaXN0Iiwiem9vbWluZ0hhbmRsZXIiLCJ6b29tRW5kSGFuZGxlciIsImRpZmYiLCJNYXRoIiwic3FydCIsImNsaWVudFgiLCJjbGllbnRZIiwidGFyZ2V0U2NhbGUiLCJhYnMiLCJwYXJzZUZsb2F0IiwiJGxpIiwic3ViT2JqIiwibmFtZSIsImNvbnRlbnRzIiwiZXEiLCJ0cmltIiwicmVsYXRpb25zaGlwIiwicGFyZW50IiwiaXMiLCJzaWJsaW5ncyIsImF0dHIiLCJpZCIsImVhY2giLCJwdXNoIiwiZmxhZ3MiLCJmb3JFYWNoIiwiaXRlbSIsImxvb3BDaGFydCIsIiR0ciIsImdldEhpZXJhcmNoeSIsInZhbGlkIiwiZ2V0Tm9kZVN0YXRlIiwiJG5vZGUiLCJyZWxhdGlvbiIsIiR0YXJnZXQiLCJleGlzdCIsInZpc2libGUiLCJnZXRSZWxhdGVkTm9kZXMiLCJoaWRlUGFyZW50RW5kIiwidXBwZXJMZXZlbCIsImFkZENsYXNzIiwic2xpY2UiLCJyZW1vdmVBdHRyIiwiaGlkZVBhcmVudCIsIiR1cHBlckxldmVsIiwiaGlkZVNpYmxpbmdzIiwiJHBhcmVudCIsIm9uZSIsInNob3dQYXJlbnRFbmQiLCJub2RlIiwiaXNJbkFjdGlvbiIsInN3aXRjaFZlcnRpY2FsQXJyb3ciLCJzaG93UGFyZW50IiwicmVwYWludCIsImJpbmQiLCJzdG9wQWpheCIsIiRub2RlTGV2ZWwiLCJpc1Zpc2libGVOb2RlIiwiaW5kZXgiLCJoaWRlQ2hpbGRyZW5FbmQiLCJhbmltYXRlZE5vZGVzIiwiaXNWZXJ0aWNhbERlc2MiLCJsb3dlckxldmVsIiwicHJldkFsbCIsImFkZEJhY2siLCJsYXN0IiwiaGlkZUNoaWxkcmVuIiwiJGxvd2VyTGV2ZWwiLCIkYW5pbWF0ZWROb2RlcyIsImZpbHRlciIsImdldCIsInNob3dDaGlsZHJlbkVuZCIsInNob3dDaGlsZHJlbiIsIiRsZXZlbHMiLCJoaWRlU2libGluZ3NFbmQiLCIkbm9kZUNvbnRhaW5lciIsIm5vZGVDb250YWluZXIiLCJsaW5lcyIsIiRzaWJsaW5ncyIsIm5leHRBbGwiLCJwcmV2IiwiZW5kIiwic3dpdGNoSG9yaXpvbnRhbEFycm93IiwiJGxpbmVzIiwic2hvd1NpYmxpbmdzRW5kIiwidmlzaWJsZU5vZGVzIiwic2hvd1JlbGF0ZWRQYXJlbnRFbmQiLCJzaG93U2libGluZ3MiLCIkdmlzaWJsZU5vZGVzIiwic3RhcnRMb2FkaW5nIiwiJGVkZ2UiLCJub3QiLCJwcm9wIiwiZW5kTG9hZGluZyIsIiRhcnJvdyIsInRvZ2dsZUNsYXNzIiwiJHByZXZTaWIiLCIkbmV4dFNpYiIsIm5leHQiLCIkc2licyIsInNpYnNWaXNpYmxlIiwic3R5bGUiLCJvZmZzZXRXaWR0aCIsIm5vZGVFbnRlckxlYXZlSGFuZGxlciIsImZsYWciLCIkdG9wRWRnZSIsIiRib3R0b21FZGdlIiwiJGxlZnRFZGdlIiwibm9kZUNsaWNrSGFuZGxlciIsImxvYWROb2RlcyIsInJlbCIsImlzRW1wdHlPYmplY3QiLCJhZGRQYXJlbnQiLCJhZGRDaGlsZHJlbiIsImFkZFNpYmxpbmdzIiwiSGlkZUZpcnN0UGFyZW50RW5kIiwidG9wRWRnZSIsInRvcEVkZ2VDbGlja0hhbmRsZXIiLCJzdG9wUHJvcGFnYXRpb24iLCJwYXJlbnRTdGF0ZSIsImlzRnVuY3Rpb24iLCJub2RlRGF0YSIsImJvdHRvbUVkZ2VDbGlja0hhbmRsZXIiLCJjaGlsZHJlblN0YXRlIiwiaEVkZ2VDbGlja0hhbmRsZXIiLCIkaEVkZ2UiLCJzaWJsaW5nc1N0YXRlIiwiZmFtaWxpZXMiLCJleHBhbmRWTm9kZXNFbmQiLCJ2Tm9kZXMiLCJjb2xsYXBzZVZOb2Rlc0VuZCIsInRvZ2dsZVZOb2RlcyIsIiR0b2dnbGVCdG4iLCIkZGVzY1dyYXBwZXIiLCIkZGVzY2VuZGFudHMiLCIkY2hpbGRyZW4iLCJjcmVhdGVHaG9zdE5vZGUiLCIkbm9kZURpdiIsIm9yaWdFdmVudCIsImlzRmlyZWZveCIsInRlc3QiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ0b0xvd2VyQ2FzZSIsImRhdGFUcmFuc2ZlciIsInNldERhdGEiLCJnaG9zdE5vZGUiLCJub2RlQ292ZXIiLCJxdWVyeVNlbGVjdG9yIiwiY3JlYXRlRWxlbWVudE5TIiwiYWRkIiwiYXBwZW5kQ2hpbGQiLCJ0cmFuc1ZhbHVlcyIsInNjYWxlIiwic2V0QXR0cmlidXRlIiwib3V0ZXJXaWR0aCIsIm91dGVySGVpZ2h0IiwieE9mZnNldCIsIm9mZnNldFgiLCJ5T2Zmc2V0Iiwib2Zmc2V0WSIsImdob3N0Tm9kZVdyYXBwZXIiLCJjcmVhdGVFbGVtZW50Iiwic3JjIiwiWE1MU2VyaWFsaXplciIsInNlcmlhbGl6ZVRvU3RyaW5nIiwic2V0RHJhZ0ltYWdlIiwiZmlsdGVyQWxsb3dlZERyb3BOb2RlcyIsIiRkcmFnZ2VkIiwiJGRyYWdab25lIiwiJGRyYWdIaWVyIiwiZHJvcENyaXRlcmlhIiwiZHJhZ3N0YXJ0SGFuZGxlciIsImRyYWdvdmVySGFuZGxlciIsImRyb3BFZmZlY3QiLCJkcmFnZW5kSGFuZGxlciIsImRyb3BIYW5kbGVyIiwiJGRyb3Bab25lIiwiZHJvcEV2ZW50IiwiZHJhZ2dlZE5vZGUiLCJkcmFnWm9uZSIsImRyb3Bab25lIiwiaXNEZWZhdWx0UHJldmVudGVkIiwiZHJvcENvbHNwYW4iLCJob3Jpem9udGFsRWRnZXMiLCJiZWZvcmUiLCIkZHJvcFNpYnMiLCJhZnRlciIsImRyYWdDb2xzcGFuIiwiJGRyYWdTaWJzIiwiY3JlYXRlTm9kZSIsImxldmVsIiwiY2hpbGQiLCJwYXJlbnRJZCIsImR0ZCIsIkRlZmVycmVkIiwiY2xhc3NOYW1lIiwibm9kZVRlbXBsYXRlIiwiaXNTZXROb2RlQ29udGVudCIsIm5vZGVDb250ZW50IiwidmVydGljYWxEZXB0aCIsIk51bWJlciIsInN1YnN0ciIsImljb24iLCJwcmVwZW5kIiwicmVzb2x2ZSIsInByb21pc2UiLCIkYXBwZW5kVG8iLCJjYWxsYmFjayIsIiRub2RlV3JhcHBlciIsIiRjaGlsZE5vZGVzIiwiaGFzQ2hpbGRyZW4iLCJpc1ZlcnRpY2FsTm9kZSIsIk9iamVjdCIsImtleXMiLCJ3aGVuIiwiaXNIaWRkZW4iLCJjb2xsYXBzZWQiLCJpc1ZlcnRpY2FsTGF5ZXIiLCJsaW5lTGF5ZXIiLCIkbm9kZUxheWVyIiwiJG5vZGVDZWxsIiwiYnVpbGRDaGlsZE5vZGUiLCJjb3VudCIsImJ1aWxkUGFyZW50Tm9kZSIsIiRjdXJyZW50Um9vdCIsIiR0YWJsZSIsImNvbXBsZW1lbnRMaW5lIiwiJG9uZVNpYmxpbmciLCJzaWJsaW5nQ291bnQiLCJleGlzdGluZ1NpYmxpZ0NvdW50IiwiYnVpbGRTaWJsaW5nTm9kZSIsIiRub2RlQ2hhcnQiLCJuZXdTaWJsaW5nQ291bnQiLCJpbnNlcnRQb3N0aW9uIiwiZmxvb3IiLCJjaGlsZENvdW50IiwiJHNpYmxpbmdUZHMiLCJ1bndyYXAiLCJub2RlQ291bnQiLCJyZW1vdmVOb2RlcyIsIiRtYXNrIiwic291cmNlQ2hhcnQiLCJodG1sMmNhbnZhcyIsIndpZHRoIiwiY2xpZW50SGVpZ2h0IiwiY2xpZW50V2lkdGgiLCJoZWlnaHQiLCJvbmNsb25lIiwiY2xvbmVEb2MiLCJvbnJlbmRlcmVkIiwiY2FudmFzIiwiZG9jIiwiZG9jV2lkdGgiLCJkb2NIZWlnaHQiLCJqc1BERiIsImFkZEltYWdlIiwidG9EYXRhVVJMIiwic2F2ZSIsImlzV2Via2l0IiwiZG9jdW1lbnRFbGVtZW50IiwiaXNGZiIsInNpZGViYXIiLCJpc0VkZ2UiLCJhcHBOYW1lIiwiYXBwVmVyc2lvbiIsIm1zU2F2ZUJsb2IiLCJtc1RvQmxvYiIsInNlbGVjdG9yIiwidGhlbiIsImZuIiwib3JnY2hhcnQiXSwibWFwcGluZ3MiOiJBQVVBLGNBRUMsU0FBVUEsR0FDYSxpQkFBWEMsUUFBaUQsaUJBQW5CQSxPQUFPQyxRQUM5Q0YsRUFBUUcsUUFBUSxVQUFXQyxPQUFRQyxVQUVuQ0wsRUFBUU0sT0FBUUYsT0FBUUMsVUFKNUIsQ0FNRSxTQUFVRSxFQUFHSCxFQUFRQyxFQUFVRyxHQUMvQixJQUFJQyxFQUFXLFNBQVVDLEVBQU1DLEdBQzdCQyxLQUFLQyxnQkFBa0JOLEVBQUVHLEdBQ3pCRSxLQUFLRCxLQUFPQSxFQUNaQyxLQUFLRSxnQkFDSEMsVUFBYSxPQUNiQyxPQUFVLEtBQ1ZDLG9CQUFzQixFQUN0QkMsTUFBUyxJQUNUQyxXQUFjLEdBQ2RDLGNBQWdCLEVBQ2hCQyxlQUFrQixXQUNsQkMsb0JBQXVCLE1BQ3ZCQyxpQkFBb0IsV0FDcEJDLFdBQWEsRUFDYkMsVUFBYSxNQUNiQyxLQUFPLEVBQ1BDLE1BQVEsRUFDUkMsWUFBZSxFQUNmQyxhQUFnQixLQUlwQnBCLEVBQVNxQixXQUVQQyxLQUFNLFNBQVVwQixHQUNkLElBQUlxQixFQUFPcEIsS0FDWEEsS0FBS3FCLFFBQVUxQixFQUFFMkIsVUFBV3RCLEtBQUtFLGVBQWdCRixLQUFLRCxLQUFNQSxHQUU1RCxJQUFJRSxFQUFrQkQsS0FBS0MsZ0JBQ3ZCRCxLQUFLdUIsUUFDUHZCLEtBQUt1QixPQUFPQyxTQUVkLElBQUlDLEVBQU96QixLQUFLcUIsUUFBUUksS0FDcEJGLEVBQVN2QixLQUFLdUIsT0FBUzVCLEVB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QlUsRUFBWTNQLEtBQUt3TyxNQUFzQixNQUFoQmdCLEVBQU9KLFNBRWhDSyxFQURFQyxFQUFXQyxFQUNQLElBQUlDLE1BQU0sSUFBSyxNQUFPRixFQUFVQyxJQUVoQyxJQUFJQyxNQUFNLElBQUssTUFBT0QsRUFBV0QsS0FFckNHLFNBQVNMLEVBQU9NLFlBQWEsTUFBTyxFQUFHLEdBQzNDTCxFQUFJTSxLQUFLM1csRUFBaUIsWUFDckIsQ0FDTCxJQUFJNFcsRUFBVyxxQkFBc0I1WCxFQUFTNlgsZ0JBQWdCL0osTUFDMURnSyxJQUFTL1gsRUFBT2dZLFFBQ2hCQyxFQUErQixnQ0FBdEIxSCxVQUFVMkgsU0FBb0UsYUFBdEIzSCxVQUFVMkgsU0FBMEIzSCxVQUFVNEgsV0FBV2pTLFFBQVEsU0FBVyxFQUVqSixJQUFNMlIsSUFBYUUsR0FBU0UsRUFDMUJqWSxFQUFPdVEsVUFBVTZILFdBQVdmLEVBQU9nQixXQUFZcFgsRUFBaUIsWUFDM0QsQ0FDTCxJQUFJcVgsRUFBVyxvQkFBa0QsS0FBNUIxVyxFQUFLQyxRQUFRZCxXQUFvQixJQUFNYSxFQUFLQyxRQUFRZCxXQUFhLElBQ2pHTixFQUFnQitCLEtBQUs4VixHQUFVL1YsUUFDbEM5QixFQUFnQnlDLE9BQU8sNkJBQTJELEtBQTVCdEIsRUFBS0MsUUFBUWQsV0FBb0IsSUFBTWEsRUFBS0MsUUFBUWQsV0FBYSxJQUFNLGVBQ3pHRSxFQUFpQixjQUV2Q1IsRUFBZ0IrQixLQUFLOFYsR0FBVXhQLEtBQUssT0FBUXVPLEVBQU9NLGFBQWEsR0FBR3hWLGFBSzFFb1csS0FBSyxXQUNKOVgsRUFBZ0JnQyxZQUFZLG9CQUMzQixXQUNEaEMsRUFBZ0JnQyxZQUFZLHVCQUtsQ3RDLEVBQUVxWSxHQUFHQyxTQUFXLFNBQVVsWSxHQUN4QixPQUFPLElBQUlGLEVBQVNHLEtBQU1ELEdBQU1vQiIsImZpbGUiOiJqcXVlcnkub3JnY2hhcnQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcclxuICogalF1ZXJ5IE9yZ0NoYXJ0IFBsdWdpblxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZGFiZW5nL09yZ0NoYXJ0XHJcbiAqXHJcbiAqIENvcHlyaWdodCAyMDE2LCBkYWJlbmdcclxuICogaHR0cHM6Ly9naXRodWIuY29tL2RhYmVuZ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2U6XHJcbiAqIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlUXHJcbiAqL1xyXG4ndXNlIHN0cmljdCc7XHJcblxyXG4oZnVuY3Rpb24gKGZhY3RvcnkpIHtcclxuICBpZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSAnb2JqZWN0Jykge1xyXG4gICAgZmFjdG9yeShyZXF1aXJlKCdqcXVlcnknKSwgd2luZG93LCBkb2N1bWVudCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGZhY3RvcnkoalF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50KTtcclxuICB9XHJcbn0oZnVuY3Rpb24gKCQsIHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCkge1xyXG4gIHZhciBPcmdDaGFydCA9IGZ1bmN0aW9uIChlbGVtLCBvcHRzKSB7XHJcbiAgICB0aGlzLiRjaGFydENvbnRhaW5lciA9ICQoZWxlbSk7XHJcbiAgICB0aGlzLm9wdHMgPSBvcHRzO1xyXG4gICAgdGhpcy5kZWZhdWx0T3B0aW9ucyA9IHtcclxuICAgICAgJ25vZGVUaXRsZSc6ICduYW1lJyxcclxuICAgICAgJ25vZGVJZCc6ICdpZCcsXHJcbiAgICAgICd0b2dnbGVTaWJsaW5nc1Jlc3AnOiBmYWxzZSxcclxuICAgICAgJ2RlcHRoJzogOTk5LFxyXG4gICAgICAnY2hhcnRDbGFzcyc6ICcnLFxyXG4gICAgICAnZXhwb3J0QnV0dG9uJzogZmFsc2UsXHJcbiAgICAgICdleHBvcnRGaWxlbmFtZSc6ICdPcmdDaGFydCcsXHJcbiAgICAgICdleHBvcnRGaWxlZXh0ZW5zaW9uJzogJ3BuZycsXHJcbiAgICAgICdwYXJlbnROb2RlU3ltYm9sJzogJ2ZhLXVzZXJzJyxcclxuICAgICAgJ2RyYWdnYWJsZSc6IGZhbHNlLFxyXG4gICAgICAnZGlyZWN0aW9uJzogJ3QyYicsXHJcbiAgICAgICdwYW4nOiBmYWxzZSxcclxuICAgICAgJ3pvb20nOiBmYWxzZSxcclxuICAgICAgJ3pvb21pbkxpbWl0JzogNyxcclxuICAgICAgJ3pvb21vdXRMaW1pdCc6IDAuNVxyXG4gICAgfTtcclxuICB9O1xyXG4gIC8vXHJcbiAgT3JnQ2hhcnQucHJvdG90eXBlID0ge1xyXG4gICAgLy9cclxuICAgIGluaXQ6IGZ1bmN0aW9uIChvcHRzKSB7XHJcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgdGhpcy5vcHRpb25zID0gJC5leHRlbmQoe30sIHRoaXMuZGVmYXVsdE9wdGlvbnMsIHRoaXMub3B0cywgb3B0cyk7XHJcbiAgICAgIC8vIGJ1aWxkIHRoZSBvcmctY2hhcnRcclxuICAgICAgdmFyICRjaGFydENvbnRhaW5lciA9IHRoaXMuJGNoYXJ0Q29udGFpbmVyO1xyXG4gICAgICBpZiAodGhpcy4kY2hhcnQpIHtcclxuICAgICAgICB0aGlzLiRjaGFydC5yZW1vdmUoKTtcclxuICAgICAgfVxyXG4gICAgICB2YXIgZGF0YSA9IHRoaXMub3B0aW9ucy5kYXRhO1xyXG4gICAgICB2YXIgJGNoYXJ0ID0gdGhpcy4kY2hhcnQgPSAkKCc8ZGl2PicsIHtcclxuICAgICAgICAnZGF0YSc6IHsgJ29wdGlvbnMnOiB0aGlzLm9wdGlvbnMgfSxcclxuICAgICAgICAnY2xhc3MnOiAnb3JnY2hhcnQnICsgKHRoaXMub3B0aW9ucy5jaGFydENsYXNzICE9PSAnJyA/ICcgJyArIHRoaXMub3B0aW9ucy5jaGFydENsYXNzIDogJycpICsgKHRoaXMub3B0aW9ucy5kaXJlY3Rpb24gIT09ICd0MmInID8gJyAnICsgdGhpcy5vcHRpb25zLmRpcmVjdGlvbiA6ICcnKSxcclxuICAgICAgICAnY2xpY2snOiBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgICAgaWYgKCEkKGV2ZW50LnRhcmdldCkuY2xvc2VzdCgnLm5vZGUnKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgJGNoYXJ0LmZpbmQoJy5ub2RlLmZvY3VzZWQnKS5yZW1vdmVDbGFzcygnZm9jdXNlZCcpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIGlmICh0eXBlb2YgTXV0YXRpb25PYnNlcnZlciAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICB0aGlzLnRyaWdnZXJJbml0RXZlbnQoKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoJC50eXBlKGRhdGEpID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIGlmIChkYXRhIGluc3RhbmNlb2YgJCkgeyAvLyB1bCBkYXRhc291cmNlXHJcbiAgICAgICAgICB0aGlzLmJ1aWxkSGllcmFyY2h5KCRjaGFydCwgdGhpcy5idWlsZEpzb25EUyhkYXRhLmNoaWxkcmVuKCkpLCAwLCB0aGlzLm9wdGlvbnMpO1xyXG4gICAgICAgIH0gZWxzZSB7IC8vIGxvY2FsIGpzb24gZGF0YXNvdXJjZVxyXG4gICAgICAgICAgdGhpcy5idWlsZEhpZXJhcmNoeSgkY2hhcnQsIHRoaXMub3B0aW9ucy5hamF4VVJMID8gZGF0YSA6IHRoaXMuYXR0YWNoUmVsKGRhdGEsICcwMCcpLCAwLCB0aGlzLm9wdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAkY2hhcnQuYXBwZW5kKCc8aSBjbGFzcz1cImZhIGZhLWNpcmNsZS1vLW5vdGNoIGZhLXNwaW4gc3Bpbm5lclwiPjwvaT4nKTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgJ3VybCc6IGRhdGEsXHJcbiAgICAgICAgICAnZGF0YVR5cGUnOiAnanNvbidcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5kb25lKGZ1bmN0aW9uKGRhdGEsIHRleHRTdGF0dXMsIGpxWEhSKSB7XHJcbiAgICAgICAgICB0aGF0LmJ1aWxkSGllcmFyY2h5KCRjaGFydCwgdGhhdC5vcHRpb25zLmFqYXhVUkwgPyBkYXRhIDogdGhhdC5hdHRhY2hSZWwoZGF0YSwgJzAwJyksIDAsIHRoYXQub3B0aW9ucyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuZmFpbChmdW5jdGlvbihqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yVGhyb3duKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5hbHdheXMoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAkY2hhcnQuY2hpbGRyZW4oJy5zcGlubmVyJykucmVtb3ZlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgJGNoYXJ0Q29udGFpbmVyLmFwcGVuZCgkY2hhcnQpO1xyXG5cclxuICAgICAgLy8gYXBwZW5kIHRoZSBleHBvcnQgYnV0dG9uXHJcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZXhwb3J0QnV0dG9uICYmICEkY2hhcnRDb250YWluZXIuZmluZCgnLm9jLWV4cG9ydC1idG4nKS5sZW5ndGgpIHtcclxuICAgICAgICB0aGlzLmF0dGFjaEV4cG9ydEJ1dHRvbigpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy5vcHRpb25zLnBhbikge1xyXG4gICAgICAgIHRoaXMuYmluZFBhbigpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy5vcHRpb25zLnpvb20pIHtcclxuICAgICAgICB0aGlzLmJpbmRab29tKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfSxcclxuICAgIC8vXHJcbiAgICB0cmlnZ2VySW5pdEV2ZW50OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgdmFyIG1vID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24gKG11dGF0aW9ucykge1xyXG4gICAgICAgIG1vLmRpc2Nvbm5lY3QoKTtcclxuICAgICAgICBpbml0VGltZTpcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG11dGF0aW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBtdXRhdGlvbnNbaV0uYWRkZWROb2Rlcy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICBpZiAobXV0YXRpb25zW2ldLmFkZGVkTm9kZXNbal0uY2xhc3NMaXN0LmNvbnRhaW5zKCdvcmdjaGFydCcpKSB7XHJcbiAgICAgICAgICAgICAgaWYgKHRoYXQub3B0aW9ucy5pbml0Q29tcGxldGVkICYmIHR5cGVvZiB0aGF0Lm9wdGlvbnMuaW5pdENvbXBsZXRlZCA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgdGhhdC5vcHRpb25zLmluaXRDb21wbGV0ZWQodGhhdC4kY2hhcnQpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGluaXRFdmVudCA9ICQuRXZlbnQoJ2luaXQub3JnY2hhcnQnKTtcclxuICAgICAgICAgICAgICAgIHRoYXQuJGNoYXJ0LnRyaWdnZXIoaW5pdEV2ZW50KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrIGluaXRUaW1lO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIG1vLm9ic2VydmUodGhpcy4kY2hhcnRDb250YWluZXJbMF0sIHsgY2hpbGRMaXN0OiB0cnVlIH0pO1xyXG4gICAgfSxcclxuICAgIC8vXHJcbiAgICBhdHRhY2hFeHBvcnRCdXR0b246IGZ1bmN0aW9uICgpIHtcclxuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICB2YXIgJGV4cG9ydEJ0biA9ICQoJzxidXR0b24+Jywge1xyXG4gICAgICAgICdjbGFzcyc6ICdvYy1leHBvcnQtYnRuJyArICh0aGlzLm9wdGlvbnMuY2hhcnRDbGFzcyAhPT0gJycgPyAnICcgKyB0aGlzLm9wdGlvbnMuY2hhcnRDbGFzcyA6ICcnKSxcclxuICAgICAgICAndGV4dCc6ICdFeHBvcnQnLFxyXG4gICAgICAgICdjbGljayc6IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgIHRoYXQuZXhwb3J0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy4kY2hhcnRDb250YWluZXIuYXBwZW5kKCRleHBvcnRCdG4pO1xyXG4gICAgfSxcclxuICAgIHNldE9wdGlvbnM6IGZ1bmN0aW9uIChvcHRzLCB2YWwpIHtcclxuICAgICAgaWYgKHR5cGVvZiBvcHRzID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIGlmIChvcHRzID09PSAncGFuJykge1xyXG4gICAgICAgICAgaWYgKHZhbCkge1xyXG4gICAgICAgICAgICB0aGlzLmJpbmRQYW4oKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudW5iaW5kUGFuKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvcHRzID09PSAnem9vbScpIHtcclxuICAgICAgICAgIGlmICh2YWwpIHtcclxuICAgICAgICAgICAgdGhpcy5iaW5kWm9vbSgpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy51bmJpbmRab29tKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmICh0eXBlb2Ygb3B0cyA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICBpZiAob3B0cy5kYXRhKSB7XHJcbiAgICAgICAgICB0aGlzLmluaXQob3B0cyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGlmICh0eXBlb2Ygb3B0cy5wYW4gIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgIGlmIChvcHRzLnBhbikge1xyXG4gICAgICAgICAgICAgIHRoaXMuYmluZFBhbigpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHRoaXMudW5iaW5kUGFuKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmICh0eXBlb2Ygb3B0cy56b29tICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICBpZiAob3B0cy56b29tKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5iaW5kWm9vbSgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHRoaXMudW5iaW5kWm9vbSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH0sXHJcbiAgICAvL1xyXG4gICAgcGFuU3RhcnRIYW5kbGVyOiBmdW5jdGlvbiAoZSkge1xyXG4gICAgICB2YXIgJGNoYXJ0ID0gJChlLmRlbGVnYXRlVGFyZ2V0KTtcclxuICAgICAgaWYgKCQoZS50YXJnZXQpLmNsb3Nlc3QoJy5ub2RlJykubGVuZ3RoIHx8IChlLnRvdWNoZXMgJiYgZS50b3VjaGVzLmxlbmd0aCA+IDEpKSB7XHJcbiAgICAgICAgJGNoYXJ0LmRhdGEoJ3Bhbm5pbmcnLCBmYWxzZSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICRjaGFydC5jc3MoJ2N1cnNvcicsICdtb3ZlJykuZGF0YSgncGFubmluZycsIHRydWUpO1xyXG4gICAgICB9XHJcbiAgICAgIHZhciBsYXN0WCA9IDA7XHJcbiAgICAgIHZhciBsYXN0WSA9IDA7XHJcbiAgICAgIHZhciBsYXN0VGYgPSAkY2hhcnQuY3NzKCd0cmFuc2Zvcm0nKTtcclxuICAgICAgaWYgKGxhc3RUZiAhPT0gJ25vbmUnKSB7XHJcbiAgICAgICAgdmFyIHRlbXAgPSBsYXN0VGYuc3BsaXQoJywnKTtcclxuICAgICAgICBpZiAobGFzdFRmLmluZGV4T2YoJzNkJykgPT09IC0xKSB7XHJcbiAgICAgICAgICBsYXN0WCA9IHBhcnNlSW50KHRlbXBbNF0pO1xyXG4gICAgICAgICAgbGFzdFkgPSBwYXJzZUludCh0ZW1wWzVdKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgbGFzdFggPSBwYXJzZUludCh0ZW1wWzEyXSk7XHJcbiAgICAgICAgICBsYXN0WSA9IHBhcnNlSW50KHRlbXBbMTNdKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgdmFyIHN0YXJ0WCA9IDA7XHJcbiAgICAgIHZhciBzdGFydFkgPSAwO1xyXG4gICAgICBpZiAoIWUudGFyZ2V0VG91Y2hlcykgeyAvLyBwYW5kIG9uIGRlc2t0b3BcclxuICAgICAgICBzdGFydFggPSBlLnBhZ2VYIC0gbGFzdFg7XHJcbiAgICAgICAgc3RhcnRZID0gZS5wYWdlWSAtIGxhc3RZO1xyXG4gICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0VG91Y2hlcy5sZW5ndGggPT09IDEpIHsgLy8gcGFuIG9uIG1vYmlsZSBkZXZpY2VcclxuICAgICAgICBzdGFydFggPSBlLnRhcmdldFRvdWNoZXNbMF0ucGFnZVggLSBsYXN0WDtcclxuICAgICAgICBzdGFydFkgPSBlLnRhcmdldFRvdWNoZXNbMF0ucGFnZVkgLSBsYXN0WTtcclxuICAgICAgfSBlbHNlIGlmIChlLnRhcmdldFRvdWNoZXMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICAkY2hhcnQub24oJ21vdXNlbW92ZSB0b3VjaG1vdmUnLGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBpZiAoISRjaGFydC5kYXRhKCdwYW5uaW5nJykpIHtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG5ld1ggPSAwO1xyXG4gICAgICAgIHZhciBuZXdZID0gMDtcclxuICAgICAgICBpZiAoIWUudGFyZ2V0VG91Y2hlcykgeyAvLyBwYW5kIG9uIGRlc2t0b3BcclxuICAgICAgICAgIG5ld1ggPSBlLnBhZ2VYIC0gc3RhcnRYO1xyXG4gICAgICAgICAgbmV3WSA9IGUucGFnZVkgLSBzdGFydFk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLnRhcmdldFRvdWNoZXMubGVuZ3RoID09PSAxKSB7IC8vIHBhbiBvbiBtb2JpbGUgZGV2aWNlXHJcbiAgICAgICAgICBuZXdYID0gZS50YXJnZXRUb3VjaGVzWzBdLnBhZ2VYIC0gc3RhcnRYO1xyXG4gICAgICAgICAgbmV3WSA9IGUudGFyZ2V0VG91Y2hlc1swXS5wYWdlWSAtIHN0YXJ0WTtcclxuICAgICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0VG91Y2hlcy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBsYXN0VGYgPSAkY2hhcnQuY3NzKCd0cmFuc2Zvcm0nKTtcclxuICAgICAgICBpZiAobGFzdFRmID09PSAnbm9uZScpIHtcclxuICAgICAgICAgIGlmIChsYXN0VGYuaW5kZXhPZignM2QnKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgJGNoYXJ0LmNzcygndHJhbnNmb3JtJywgJ21hdHJpeCgxLCAwLCAwLCAxLCAnICsgbmV3WCArICcsICcgKyBuZXdZICsgJyknKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICRjaGFydC5jc3MoJ3RyYW5zZm9ybScsICdtYXRyaXgzZCgxLCAwLCAwLCAwLCAwLCAxLCAwLCAwLCAwLCAwLCAxLCAwLCAnICsgbmV3WCArICcsICcgKyBuZXdZICsgJywgMCwgMSknKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdmFyIG1hdHJpeCA9IGxhc3RUZi5zcGxpdCgnLCcpO1xyXG4gICAgICAgICAgaWYgKGxhc3RUZi5pbmRleE9mKCczZCcpID09PSAtMSkge1xyXG4gICAgICAgICAgICBtYXRyaXhbNF0gPSAnICcgKyBuZXdYO1xyXG4gICAgICAgICAgICBtYXRyaXhbNV0gPSAnICcgKyBuZXdZICsgJyknO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbWF0cml4WzEyXSA9ICcgJyArIG5ld1g7XHJcbiAgICAgICAgICAgIG1hdHJpeFsxM10gPSAnICcgKyBuZXdZO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgJGNoYXJ0LmNzcygndHJhbnNmb3JtJywgbWF0cml4LmpvaW4oJywnKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0sXHJcbiAgICAvL1xyXG4gICAgcGFuRW5kSGFuZGxlcjogZnVuY3Rpb24gKGUpIHtcclxuICAgICAgaWYgKGUuZGF0YS5jaGFydC5kYXRhKCdwYW5uaW5nJykpIHtcclxuICAgICAgICBlLmRhdGEuY2hhcnQuZGF0YSgncGFubmluZycsIGZhbHNlKS5jc3MoJ2N1cnNvcicsICdkZWZhdWx0Jykub2ZmKCdtb3VzZW1vdmUnKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8vXHJcbiAgICBiaW5kUGFuOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHRoaXMuJGNoYXJ0Q29udGFpbmVyLmNzcygnb3ZlcmZsb3cnLCAnaGlkZGVuJyk7XHJcbiAgICAgIHRoaXMuJGNoYXJ0Lm9uKCdtb3VzZWRvd24gdG91Y2hzdGFydCcsIHRoaXMucGFuU3RhcnRIYW5kbGVyKTtcclxuICAgICAgJChkb2N1bWVudCkub24oJ21vdXNldXAgdG91Y2hlbmQnLCB7ICdjaGFydCc6IHRoaXMuJGNoYXJ0IH0sIHRoaXMucGFuRW5kSGFuZGxlcik7XHJcbiAgICB9LFxyXG4gICAgLy9cclxuICAgIHVuYmluZFBhbjogZnVuY3Rpb24gKCkge1xyXG4gICAgICB0aGlzLiRjaGFydENvbnRhaW5lci5jc3MoJ292ZXJmbG93JywgJ2F1dG8nKTtcclxuICAgICAgdGhpcy4kY2hhcnQub2ZmKCdtb3VzZWRvd24gdG91Y2hzdGFydCcsIHRoaXMucGFuU3RhcnRIYW5kbGVyKTtcclxuICAgICAgJChkb2N1bWVudCkub2ZmKCdtb3VzZXVwIHRvdWNoZW5kJywgdGhpcy5wYW5FbmRIYW5kbGVyKTtcclxuICAgIH0sXHJcbiAgICAvL1xyXG4gICAgem9vbVdoZWVsSGFuZGxlcjogZnVuY3Rpb24gKGUpIHtcclxuICAgICAgdmFyIG9jID0gZS5kYXRhLm9jO1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHZhciBuZXdTY2FsZSAgPSAxICsgKGUub3JpZ2luYWxFdmVudC5kZWx0YVkgPiAwID8gLTAuMiA6IDAuMik7XHJcbiAgICAgIG9jLnNldENoYXJ0U2NhbGUob2MuJGNoYXJ0LCBuZXdTY2FsZSk7XHJcbiAgICB9LFxyXG4gICAgLy9cclxuICAgIHpvb21TdGFydEhhbmRsZXI6IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgIGlmKGUudG91Y2hlcyAmJiBlLnRvdWNoZXMubGVuZ3RoID09PSAyKSB7XHJcbiAgICAgICAgdmFyIG9jID0gZS5kYXRhLm9jO1xyXG4gICAgICAgIG9jLiRjaGFydC5kYXRhKCdwaW5jaGluZycsIHRydWUpO1xyXG4gICAgICAgIHZhciBkaXN0ID0gb2MuZ2V0UGluY2hEaXN0KGUpO1xyXG4gICAgICAgIG9jLiRjaGFydC5kYXRhKCdwaW5jaERpc3RTdGFydCcsIGRpc3QpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgem9vbWluZ0hhbmRsZXI6IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgIHZhciBvYyA9IGUuZGF0YS5vYztcclxuICAgICAgaWYob2MuJGNoYXJ0LmRhdGEoJ3BpbmNoaW5nJykpIHtcclxuICAgICAgICB2YXIgZGlzdCA9IG9jLmdldFBpbmNoRGlzdChlKTtcclxuICAgICAgICBvYy4kY2hhcnQuZGF0YSgncGluY2hEaXN0RW5kJywgZGlzdCk7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICB6b29tRW5kSGFuZGxlcjogZnVuY3Rpb24gKGUpIHtcclxuICAgICAgdmFyIG9jID0gZS5kYXRhLm9jO1xyXG4gICAgICBpZihvYy4kY2hhcnQuZGF0YSgncGluY2hpbmcnKSkge1xyXG4gICAgICAgIG9jLiRjaGFydC5kYXRhKCdwaW5jaGluZycsIGZhbHNlKTtcclxuICAgICAgICB2YXIgZGlmZiA9IG9jLiRjaGFydC5kYXRhKCdwaW5jaERpc3RFbmQnKSAtIG9jLiRjaGFydC5kYXRhKCdwaW5jaERpc3RTdGFydCcpO1xyXG4gICAgICAgIGlmIChkaWZmID4gMCkge1xyXG4gICAgICAgICAgb2Muc2V0Q2hhcnRTY2FsZShvYy4kY2hhcnQsIDEuMik7XHJcbiAgICAgICAgfSBlbHNlIGlmIChkaWZmIDwgMCkge1xyXG4gICAgICAgICAgb2Muc2V0Q2hhcnRTY2FsZShvYy4kY2hhcnQsIDAuOCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy9cclxuICAgIGJpbmRab29tOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHRoaXMuJGNoYXJ0Q29udGFpbmVyLm9uKCd3aGVlbCcsIHsgJ29jJzogdGhpcyB9LCB0aGlzLnpvb21XaGVlbEhhbmRsZXIpO1xyXG4gICAgICB0aGlzLiRjaGFydENvbnRhaW5lci5vbigndG91Y2hzdGFydCcsIHsgJ29jJzogdGhpcyB9LCB0aGlzLnpvb21TdGFydEhhbmRsZXIpO1xyXG4gICAgICAkKGRvY3VtZW50KS5vbigndG91Y2htb3ZlJywgeyAnb2MnOiB0aGlzIH0sIHRoaXMuem9vbWluZ0hhbmRsZXIpO1xyXG4gICAgICAkKGRvY3VtZW50KS5vbigndG91Y2hlbmQnLCB7ICdvYyc6IHRoaXMgfSwgdGhpcy56b29tRW5kSGFuZGxlcik7XHJcbiAgICB9LFxyXG4gICAgdW5iaW5kWm9vbTogZnVuY3Rpb24gKCkge1xyXG4gICAgICB0aGlzLiRjaGFydENvbnRhaW5lci5vZmYoJ3doZWVsJywgdGhpcy56b29tV2hlZWxIYW5kbGVyKTtcclxuICAgICAgdGhpcy4kY2hhcnRDb250YWluZXIub2ZmKCd0b3VjaHN0YXJ0JywgdGhpcy56b29tU3RhcnRIYW5kbGVyKTtcclxuICAgICAgJChkb2N1bWVudCkub2ZmKCd0b3VjaG1vdmUnLCB0aGlzLnpvb21pbmdIYW5kbGVyKTtcclxuICAgICAgJChkb2N1bWVudCkub2ZmKCd0b3VjaGVuZCcsIHRoaXMuem9vbUVuZEhhbmRsZXIpO1xyXG4gICAgfSxcclxuICAgIC8vXHJcbiAgICBnZXRQaW5jaERpc3Q6IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgIHJldHVybiBNYXRoLnNxcnQoKGUudG91Y2hlc1swXS5jbGllbnRYIC0gZS50b3VjaGVzWzFdLmNsaWVudFgpICogKGUudG91Y2hlc1swXS5jbGllbnRYIC0gZS50b3VjaGVzWzFdLmNsaWVudFgpICtcclxuICAgICAgKGUudG91Y2hlc1swXS5jbGllbnRZIC0gZS50b3VjaGVzWzFdLmNsaWVudFkpICogKGUudG91Y2hlc1swXS5jbGllbnRZIC0gZS50b3VjaGVzWzFdLmNsaWVudFkpKTtcclxuICAgIH0sXHJcbiAgICAvL1xyXG4gICAgc2V0Q2hhcnRTY2FsZTogZnVuY3Rpb24gKCRjaGFydCwgbmV3U2NhbGUpIHtcclxuICAgICAgdmFyIG9wdHMgPSAkY2hhcnQuZGF0YSgnb3B0aW9ucycpO1xyXG4gICAgICB2YXIgbGFzdFRmID0gJGNoYXJ0LmNzcygndHJhbnNmb3JtJyk7XHJcbiAgICAgIHZhciBtYXRyaXggPSAnJztcclxuICAgICAgdmFyIHRhcmdldFNjYWxlID0gMTtcclxuICAgICAgaWYgKGxhc3RUZiA9PT0gJ25vbmUnKSB7XHJcbiAgICAgICAgJGNoYXJ0LmNzcygndHJhbnNmb3JtJywgJ3NjYWxlKCcgKyBuZXdTY2FsZSArICcsJyArIG5ld1NjYWxlICsgJyknKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBtYXRyaXggPSBsYXN0VGYuc3BsaXQoJywnKTtcclxuICAgICAgICBpZiAobGFzdFRmLmluZGV4T2YoJzNkJykgPT09IC0xKSB7XHJcbiAgICAgICAgICB0YXJnZXRTY2FsZSA9IE1hdGguYWJzKHdpbmRvdy5wYXJzZUZsb2F0KG1hdHJpeFszXSkgKiBuZXdTY2FsZSk7XHJcbiAgICAgICAgICBpZiAodGFyZ2V0U2NhbGUgPiBvcHRzLnpvb21vdXRMaW1pdCAmJiB0YXJnZXRTY2FsZSA8IG9wdHMuem9vbWluTGltaXQpIHtcclxuICAgICAgICAgICAgJGNoYXJ0LmNzcygndHJhbnNmb3JtJywgbGFzdFRmICsgJyBzY2FsZSgnICsgbmV3U2NhbGUgKyAnLCcgKyBuZXdTY2FsZSArICcpJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRhcmdldFNjYWxlID0gTWF0aC5hYnMod2luZG93LnBhcnNlRmxvYXQobWF0cml4WzFdKSAqIG5ld1NjYWxlKTtcclxuICAgICAgICAgIGlmICh0YXJnZXRTY2FsZSA+IG9wdHMuem9vbW91dExpbWl0ICYmIHRhcmdldFNjYWxlIDwgb3B0cy56b29taW5MaW1pdCkge1xyXG4gICAgICAgICAgICAkY2hhcnQuY3NzKCd0cmFuc2Zvcm0nLCBsYXN0VGYgKyAnIHNjYWxlM2QoJyArIG5ld1NjYWxlICsgJywnICsgbmV3U2NhbGUgKyAnLCAxKScpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8vXHJcbiAgICBidWlsZEpzb25EUzogZnVuY3Rpb24gKCRsaSkge1xyXG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgIHZhciBzdWJPYmogPSB7XHJcbiAgICAgICAgJ25hbWUnOiAkbGkuY29udGVudHMoKS5lcSgwKS50ZXh0KCkudHJpbSgpLFxyXG4gICAgICAgICdyZWxhdGlvbnNoaXAnOiAoJGxpLnBhcmVudCgpLnBhcmVudCgpLmlzKCdsaScpID8gJzEnOiAnMCcpICsgKCRsaS5zaWJsaW5ncygnbGknKS5sZW5ndGggPyAxOiAwKSArICgkbGkuY2hpbGRyZW4oJ3VsJykubGVuZ3RoID8gMSA6IDApXHJcbiAgICAgIH07XHJcbiAgICAgIGlmICgkbGkuYXR0cignZGF0YS1pZCcpKSB7XHJcbiAgICAgICAgc3ViT2JqLmlkID0gJGxpLmF0dHIoJ2RhdGEtaWQnKTtcclxuICAgICAgfVxyXG4gICAgICAkbGkuY2hpbGRyZW4oJ3VsJykuY2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmICghc3ViT2JqLmNoaWxkcmVuKSB7IHN1Yk9iai5jaGlsZHJlbiA9IFtdOyB9XHJcbiAgICAgICAgc3ViT2JqLmNoaWxkcmVuLnB1c2godGhhdC5idWlsZEpzb25EUygkKHRoaXMpKSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gc3ViT2JqO1xyXG4gICAgfSxcclxuICAgIC8vXHJcbiAgICBhdHRhY2hSZWw6IGZ1bmN0aW9uIChkYXRhLCBmbGFncykge1xyXG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgIGRhdGEucmVsYXRpb25zaGlwID0gZmxhZ3MgKyAoZGF0YS5jaGlsZHJlbiAmJiBkYXRhLmNoaWxkcmVuLmxlbmd0aCA+IDAgPyAxIDogMCk7XHJcbiAgICAgIGlmIChkYXRhLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgZGF0YS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgICAgICAgIHRoYXQuYXR0YWNoUmVsKGl0ZW0sICcxJyArIChkYXRhLmNoaWxkcmVuLmxlbmd0aCA+IDEgPyAxIDogMCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfSxcclxuICAgIC8vXHJcbiAgICBsb29wQ2hhcnQ6IGZ1bmN0aW9uICgkY2hhcnQpIHtcclxuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICB2YXIgJHRyID0gJGNoYXJ0LmZpbmQoJ3RyOmZpcnN0Jyk7XHJcbiAgICAgIHZhciBzdWJPYmogPSB7ICdpZCc6ICR0ci5maW5kKCcubm9kZScpWzBdLmlkIH07XHJcbiAgICAgICR0ci5zaWJsaW5ncygnOmxhc3QnKS5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKCFzdWJPYmouY2hpbGRyZW4pIHsgc3ViT2JqLmNoaWxkcmVuID0gW107IH1cclxuICAgICAgICBzdWJPYmouY2hpbGRyZW4ucHVzaCh0aGF0Lmxvb3BDaGFydCgkKHRoaXMpKSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gc3ViT2JqO1xyXG4gICAgfSxcclxuICAgIC8vXHJcbiAgICBnZXRIaWVyYXJjaHk6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgaWYgKHR5cGVvZiB0aGlzLiRjaGFydCA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm4gJ0Vycm9yOiBvcmdjaGFydCBkb2VzIG5vdCBleGlzdCdcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoIXRoaXMuJGNoYXJ0LmZpbmQoJy5ub2RlJykubGVuZ3RoKSB7XHJcbiAgICAgICAgICByZXR1cm4gJ0Vycm9yOiBub2RlcyBkbyBub3QgZXhpc3QnXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHZhciB2YWxpZCA9IHRydWU7XHJcbiAgICAgICAgICB0aGlzLiRjaGFydC5maW5kKCcubm9kZScpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaWQpIHtcclxuICAgICAgICAgICAgICB2YWxpZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBpZiAoIXZhbGlkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnRXJyb3I6IEFsbCBub2RlcyBvZiBvcmdoY2FydCB0byBiZSBleHBvcnRlZCBtdXN0IGhhdmUgZGF0YS1pZCBhdHRyaWJ1dGUhJztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRoaXMubG9vcENoYXJ0KHRoaXMuJGNoYXJ0KTtcclxuICAgIH0sXHJcbiAgICAvLyBkZXRlY3QgdGhlIGV4aXN0L2Rpc3BsYXkgc3RhdGUgb2YgcmVsYXRlZCBub2RlXHJcbiAgICBnZXROb2RlU3RhdGU6IGZ1bmN0aW9uICgkbm9kZSwgcmVsYXRpb24pIHtcclxuICAgICAgdmFyICR0YXJnZXQgPSB7fTtcclxuICAgICAgdmFyIHJlbGF0aW9uID0gcmVsYXRpb24gfHwgJ3NlbGYnO1xyXG4gICAgICBpZiAocmVsYXRpb24gPT09ICdwYXJlbnQnKSB7XHJcbiAgICAgICAgJHRhcmdldCA9ICRub2RlLmNsb3Nlc3QoJy5ub2RlcycpLnNpYmxpbmdzKCc6Zmlyc3QnKTtcclxuICAgICAgICBpZiAoJHRhcmdldC5sZW5ndGgpIHtcclxuICAgICAgICAgIGlmICgkdGFyZ2V0LmlzKCcuaGlkZGVuJykgfHwgKCEkdGFyZ2V0LmlzKCcuaGlkZGVuJykgJiYgJHRhcmdldC5jbG9zZXN0KCcubm9kZXMnKS5pcygnLmhpZGRlbicpKSkge1xyXG4gICAgICAgICAgICByZXR1cm4geyAnZXhpc3QnOiB0cnVlLCAndmlzaWJsZSc6IGZhbHNlIH07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4geyAnZXhpc3QnOiB0cnVlLCAndmlzaWJsZSc6IHRydWUgfTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSBpZiAocmVsYXRpb24gPT09ICdjaGlsZHJlbicpIHtcclxuICAgICAgICAkdGFyZ2V0ID0gJG5vZGUuY2xvc2VzdCgndHInKS5zaWJsaW5ncygnOmxhc3QnKTtcclxuICAgICAgICBpZiAoJHRhcmdldC5sZW5ndGgpIHtcclxuICAgICAgICAgIGlmICghJHRhcmdldC5pcygnLmhpZGRlbicpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7ICdleGlzdCc6IHRydWUsICd2aXNpYmxlJzogdHJ1ZSB9O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIHsgJ2V4aXN0JzogdHJ1ZSwgJ3Zpc2libGUnOiBmYWxzZSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIGlmIChyZWxhdGlvbiA9PT0gJ3NpYmxpbmdzJykge1xyXG4gICAgICAgICR0YXJnZXQgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLnNpYmxpbmdzKCk7XHJcbiAgICAgICAgaWYgKCR0YXJnZXQubGVuZ3RoKSB7XHJcbiAgICAgICAgICBpZiAoISR0YXJnZXQuaXMoJy5oaWRkZW4nKSAmJiAhJHRhcmdldC5wYXJlbnQoKS5pcygnLmhpZGRlbicpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7ICdleGlzdCc6IHRydWUsICd2aXNpYmxlJzogdHJ1ZSB9O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIHsgJ2V4aXN0JzogdHJ1ZSwgJ3Zpc2libGUnOiBmYWxzZSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAkdGFyZ2V0ID0gJG5vZGU7XHJcbiAgICAgICAgaWYgKCR0YXJnZXQubGVuZ3RoKSB7XHJcbiAgICAgICAgICBpZiAoISgoJHRhcmdldC5jbG9zZXN0KCcubm9kZXMnKS5sZW5ndGggJiYgJHRhcmdldC5jbG9zZXN0KCcubm9kZXMnKS5pcygnLmhpZGRlbicpKSB8fFxyXG4gICAgICAgICAgICAoJHRhcmdldC5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLmxlbmd0aCAmJiAkdGFyZ2V0LmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkuaXMoJy5oaWRkZW4nKSkgfHxcclxuICAgICAgICAgICAgKCR0YXJnZXQucGFyZW50KCkuaXMoJ2xpJykgJiYgKCR0YXJnZXQuY2xvc2VzdCgndWwnKS5pcygnLmhpZGRlbicpIHx8ICR0YXJnZXQuY2xvc2VzdCgndmVydGljYWxOb2RlcycpLmlzKCcuaGlkZGVuJykpKVxyXG4gICAgICAgICAgKSkge1xyXG4gICAgICAgICAgICByZXR1cm4geyAnZXhpc3QnOiB0cnVlLCAndmlzaWJsZSc6IHRydWUgfTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiB7ICdleGlzdCc6IHRydWUsICd2aXNpYmxlJzogZmFsc2UgfTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHsgJ2V4aXN0JzogZmFsc2UsICd2aXNpYmxlJzogZmFsc2UgfTtcclxuICAgIH0sXHJcbiAgICAvLyBmaW5kIHRoZSByZWxhdGVkIG5vZGVzXHJcbiAgICBnZXRSZWxhdGVkTm9kZXM6IGZ1bmN0aW9uICgkbm9kZSwgcmVsYXRpb24pIHtcclxuICAgICAgaWYgKCEkbm9kZSB8fCAhKCRub2RlIGluc3RhbmNlb2YgJCkgfHwgISRub2RlLmlzKCcubm9kZScpKSB7XHJcbiAgICAgICAgcmV0dXJuICQoKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAocmVsYXRpb24gPT09ICdwYXJlbnQnKSB7XHJcbiAgICAgICAgcmV0dXJuICRub2RlLmNsb3Nlc3QoJy5ub2RlcycpLnBhcmVudCgpLmNoaWxkcmVuKCc6Zmlyc3QnKS5maW5kKCcubm9kZScpO1xyXG4gICAgICB9IGVsc2UgaWYgKHJlbGF0aW9uID09PSAnY2hpbGRyZW4nKSB7XHJcbiAgICAgICAgcmV0dXJuICRub2RlLmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoJy5ub2RlcycpLmNoaWxkcmVuKCkuZmluZCgnLm5vZGU6Zmlyc3QnKTtcclxuICAgICAgfSBlbHNlIGlmIChyZWxhdGlvbiA9PT0gJ3NpYmxpbmdzJykge1xyXG4gICAgICAgIHJldHVybiAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLnNpYmxpbmdzKCkuZmluZCgnLm5vZGU6Zmlyc3QnKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gJCgpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgaGlkZVBhcmVudEVuZDogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICQoZXZlbnQudGFyZ2V0KS5yZW1vdmVDbGFzcygnc2xpZGluZycpO1xyXG4gICAgICBldmVudC5kYXRhLnVwcGVyTGV2ZWwuYWRkQ2xhc3MoJ2hpZGRlbicpLnNsaWNlKDEpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XHJcbiAgICB9LFxyXG4gICAgLy8gcmVjdXJzaXZlbHkgaGlkZSB0aGUgYW5jZXN0b3Igbm9kZSBhbmQgc2libGluZyBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGVcclxuICAgIGhpZGVQYXJlbnQ6IGZ1bmN0aW9uICgkbm9kZSkge1xyXG4gICAgICB2YXIgJHVwcGVyTGV2ZWwgPSAkbm9kZS5jbG9zZXN0KCcubm9kZXMnKS5zaWJsaW5ncygpO1xyXG4gICAgICBpZiAoJHVwcGVyTGV2ZWwuZXEoMCkuZmluZCgnLnNwaW5uZXInKS5sZW5ndGgpIHtcclxuICAgICAgICAkbm9kZS5jbG9zZXN0KCcub3JnY2hhcnQnKS5kYXRhKCdpbkFqYXgnLCBmYWxzZSk7XHJcbiAgICAgIH1cclxuICAgICAgLy8gaGlkZSB0aGUgc2libGluZyBub2Rlc1xyXG4gICAgICBpZiAodGhpcy5nZXROb2RlU3RhdGUoJG5vZGUsICdzaWJsaW5ncycpLnZpc2libGUpIHtcclxuICAgICAgICB0aGlzLmhpZGVTaWJsaW5ncygkbm9kZSk7XHJcbiAgICAgIH1cclxuICAgICAgLy8gaGlkZSB0aGUgbGluZXNcclxuICAgICAgdmFyICRsaW5lcyA9ICR1cHBlckxldmVsLnNsaWNlKDEpO1xyXG4gICAgICAkbGluZXMuY3NzKCd2aXNpYmlsaXR5JywgJ2hpZGRlbicpO1xyXG4gICAgICAvLyBoaWRlIHRoZSBzdXBlcmlvciBub2RlcyB3aXRoIHRyYW5zaXRpb25cclxuICAgICAgdmFyICRwYXJlbnQgPSAkdXBwZXJMZXZlbC5lcSgwKS5maW5kKCcubm9kZScpO1xyXG4gICAgICBpZiAodGhpcy5nZXROb2RlU3RhdGUoJHBhcmVudCkudmlzaWJsZSkge1xyXG4gICAgICAgICRwYXJlbnQuYWRkQ2xhc3MoJ3NsaWRpbmcgc2xpZGUtZG93bicpLm9uZSgndHJhbnNpdGlvbmVuZCcsIHsgJ3VwcGVyTGV2ZWwnOiAkdXBwZXJMZXZlbCB9LCB0aGlzLmhpZGVQYXJlbnRFbmQpO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIGlmIHRoZSBjdXJyZW50IG5vZGUgaGFzIHRoZSBwYXJlbnQgbm9kZSwgaGlkZSBpdCByZWN1cnNpdmVseVxyXG4gICAgICBpZiAodGhpcy5nZXROb2RlU3RhdGUoJHBhcmVudCwgJ3BhcmVudCcpLnZpc2libGUpIHtcclxuICAgICAgICB0aGlzLmhpZGVQYXJlbnQoJHBhcmVudCk7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBzaG93UGFyZW50RW5kOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgdmFyICRub2RlID0gZXZlbnQuZGF0YS5ub2RlO1xyXG4gICAgICAkKGV2ZW50LnRhcmdldCkucmVtb3ZlQ2xhc3MoJ3NsaWRpbmcnKTtcclxuICAgICAgaWYgKHRoaXMuaXNJbkFjdGlvbigkbm9kZSkpIHtcclxuICAgICAgICB0aGlzLnN3aXRjaFZlcnRpY2FsQXJyb3coJG5vZGUuY2hpbGRyZW4oJy50b3BFZGdlJykpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy8gc2hvdyB0aGUgcGFyZW50IG5vZGUgb2YgdGhlIHNwZWNpZmllZCBub2RlXHJcbiAgICBzaG93UGFyZW50OiBmdW5jdGlvbiAoJG5vZGUpIHtcclxuICAgICAgLy8ganVzdCBzaG93IG9ubHkgb25lIHN1cGVyaW9yIGxldmVsXHJcbiAgICAgIHZhciAkdXBwZXJMZXZlbCA9ICRub2RlLmNsb3Nlc3QoJy5ub2RlcycpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xyXG4gICAgICAvLyBqdXN0IHNob3cgb25seSBvbmUgbGluZVxyXG4gICAgICAkdXBwZXJMZXZlbC5lcSgyKS5jaGlsZHJlbigpLnNsaWNlKDEsIC0xKS5hZGRDbGFzcygnaGlkZGVuJyk7XHJcbiAgICAgIC8vIHNob3cgcGFyZW50IG5vZGUgd2l0aCBhbmltYXRpb25cclxuICAgICAgdmFyICRwYXJlbnQgPSAkdXBwZXJMZXZlbC5lcSgwKS5maW5kKCcubm9kZScpO1xyXG4gICAgICB0aGlzLnJlcGFpbnQoJHBhcmVudFswXSk7XHJcbiAgICAgICRwYXJlbnQuYWRkQ2xhc3MoJ3NsaWRpbmcnKS5yZW1vdmVDbGFzcygnc2xpZGUtZG93bicpLm9uZSgndHJhbnNpdGlvbmVuZCcsIHsgJ25vZGUnOiAkbm9kZSB9LCB0aGlzLnNob3dQYXJlbnRFbmQuYmluZCh0aGlzKSk7XHJcbiAgICB9LFxyXG4gICAgc3RvcEFqYXg6IGZ1bmN0aW9uICgkbm9kZUxldmVsKSB7XHJcbiAgICAgIGlmICgkbm9kZUxldmVsLmZpbmQoJy5zcGlubmVyJykubGVuZ3RoKSB7XHJcbiAgICAgICAgJG5vZGVMZXZlbC5jbG9zZXN0KCcub3JnY2hhcnQnKS5kYXRhKCdpbkFqYXgnLCBmYWxzZSk7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBpc1Zpc2libGVOb2RlOiBmdW5jdGlvbiAoaW5kZXgsIGVsZW0pIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZ2V0Tm9kZVN0YXRlKCQoZWxlbSkpLnZpc2libGU7XHJcbiAgICB9LFxyXG4gICAgLy9cclxuICAgIGhpZGVDaGlsZHJlbkVuZDogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgIGV2ZW50LmRhdGEuYW5pbWF0ZWROb2Rlcy5yZW1vdmVDbGFzcygnc2xpZGluZycpO1xyXG4gICAgICBpZiAoZXZlbnQuZGF0YS5pc1ZlcnRpY2FsRGVzYykge1xyXG4gICAgICAgIGV2ZW50LmRhdGEubG93ZXJMZXZlbC5hZGRDbGFzcygnaGlkZGVuJyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZXZlbnQuZGF0YS5hbmltYXRlZE5vZGVzLmNsb3Nlc3QoJy5ub2RlcycpLnByZXZBbGwoJy5saW5lcycpLnJlbW92ZUF0dHIoJ3N0eWxlJykuYWRkQmFjaygpLmFkZENsYXNzKCdoaWRkZW4nKTtcclxuICAgICAgICBldmVudC5kYXRhLmxvd2VyTGV2ZWwubGFzdCgpLmZpbmQoJy52ZXJ0aWNhbE5vZGVzJykuYWRkQ2xhc3MoJ2hpZGRlbicpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLmlzSW5BY3Rpb24oZXZlbnQuZGF0YS5ub2RlKSkge1xyXG4gICAgICAgIHRoaXMuc3dpdGNoVmVydGljYWxBcnJvdyhldmVudC5kYXRhLm5vZGUuY2hpbGRyZW4oJy5ib3R0b21FZGdlJykpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy8gcmVjdXJzaXZlbHkgaGlkZSB0aGUgZGVzY2VuZGFudCBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGVcclxuICAgIGhpZGVDaGlsZHJlbjogZnVuY3Rpb24gKCRub2RlKSB7XHJcbiAgICAgIHZhciAkbG93ZXJMZXZlbCA9ICRub2RlLmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoKTtcclxuICAgICAgdGhpcy5zdG9wQWpheCgkbG93ZXJMZXZlbC5sYXN0KCkpO1xyXG4gICAgICB2YXIgJGFuaW1hdGVkTm9kZXMgPSAkbG93ZXJMZXZlbC5sYXN0KCkuZmluZCgnLm5vZGUnKS5maWx0ZXIodGhpcy5pc1Zpc2libGVOb2RlLmJpbmQodGhpcykpO1xyXG4gICAgICB2YXIgaXNWZXJ0aWNhbERlc2MgPSAkbG93ZXJMZXZlbC5sYXN0KCkuaXMoJy52ZXJ0aWNhbE5vZGVzJykgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgIGlmICghaXNWZXJ0aWNhbERlc2MpIHtcclxuICAgICAgICAkYW5pbWF0ZWROb2Rlcy5jbG9zZXN0KCd0YWJsZScpLmNsb3Nlc3QoJ3RyJykucHJldkFsbCgnLmxpbmVzJykuY3NzKCd2aXNpYmlsaXR5JywgJ2hpZGRlbicpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMucmVwYWludCgkYW5pbWF0ZWROb2Rlcy5nZXQoMCkpO1xyXG4gICAgICAkYW5pbWF0ZWROb2Rlcy5hZGRDbGFzcygnc2xpZGluZyBzbGlkZS11cCcpLmVxKDApLm9uZSgndHJhbnNpdGlvbmVuZCcsIHsgJ2FuaW1hdGVkTm9kZXMnOiAkYW5pbWF0ZWROb2RlcywgJ2xvd2VyTGV2ZWwnOiAkbG93ZXJMZXZlbCwgJ2lzVmVydGljYWxEZXNjJzogaXNWZXJ0aWNhbERlc2MsICdub2RlJzogJG5vZGUgfSwgdGhpcy5oaWRlQ2hpbGRyZW5FbmQuYmluZCh0aGlzKSk7XHJcbiAgICB9LFxyXG4gICAgLy9cclxuICAgIHNob3dDaGlsZHJlbkVuZDogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgIHZhciAkbm9kZSA9IGV2ZW50LmRhdGEubm9kZTtcclxuICAgICAgZXZlbnQuZGF0YS5hbmltYXRlZE5vZGVzLnJlbW92ZUNsYXNzKCdzbGlkaW5nJyk7XHJcbiAgICAgIGlmICh0aGlzLmlzSW5BY3Rpb24oJG5vZGUpKSB7XHJcbiAgICAgICAgdGhpcy5zd2l0Y2hWZXJ0aWNhbEFycm93KCRub2RlLmNoaWxkcmVuKCcuYm90dG9tRWRnZScpKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8vIHNob3cgdGhlIGNoaWxkcmVuIG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxyXG4gICAgc2hvd0NoaWxkcmVuOiBmdW5jdGlvbiAoJG5vZGUpIHtcclxuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICB2YXIgJGxldmVscyA9ICRub2RlLmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoKTtcclxuICAgICAgdmFyIGlzVmVydGljYWxEZXNjID0gJGxldmVscy5pcygnLnZlcnRpY2FsTm9kZXMnKSA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgdmFyICRhbmltYXRlZE5vZGVzID0gaXNWZXJ0aWNhbERlc2NcclxuICAgICAgICA/ICRsZXZlbHMucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpLmZpbmQoJy5ub2RlJykuZmlsdGVyKHRoaXMuaXNWaXNpYmxlTm9kZS5iaW5kKHRoaXMpKVxyXG4gICAgICAgIDogJGxldmVscy5yZW1vdmVDbGFzcygnaGlkZGVuJykuZXEoMikuY2hpbGRyZW4oKS5maW5kKCcubm9kZTpmaXJzdCcpLmZpbHRlcih0aGlzLmlzVmlzaWJsZU5vZGUuYmluZCh0aGlzKSk7XHJcbiAgICAgIC8vIHRoZSB0d28gZm9sbG93aW5nIHN0YXRlbWVudHMgYXJlIHVzZWQgdG8gZW5mb3JjZSBicm93c2VyIHRvIHJlcGFpbnRcclxuICAgICAgdGhpcy5yZXBhaW50KCRhbmltYXRlZE5vZGVzLmdldCgwKSk7XHJcbiAgICAgICRhbmltYXRlZE5vZGVzLmFkZENsYXNzKCdzbGlkaW5nJykucmVtb3ZlQ2xhc3MoJ3NsaWRlLXVwJykuZXEoMCkub25lKCd0cmFuc2l0aW9uZW5kJywgeyAnbm9kZSc6ICRub2RlLCAnYW5pbWF0ZWROb2Rlcyc6ICRhbmltYXRlZE5vZGVzIH0sIHRoaXMuc2hvd0NoaWxkcmVuRW5kLmJpbmQodGhpcykpO1xyXG4gICAgfSxcclxuICAgIC8vXHJcbiAgICBoaWRlU2libGluZ3NFbmQ6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICB2YXIgJG5vZGUgPSBldmVudC5kYXRhLm5vZGU7XHJcbiAgICAgIHZhciAkbm9kZUNvbnRhaW5lciA9IGV2ZW50LmRhdGEubm9kZUNvbnRhaW5lcjtcclxuICAgICAgdmFyIGRpcmVjdGlvbiA9IGV2ZW50LmRhdGEuZGlyZWN0aW9uO1xyXG4gICAgICBldmVudC5kYXRhLmxpbmVzLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XHJcbiAgICAgIHZhciAkc2libGluZ3MgPSBkaXJlY3Rpb24gPyAoZGlyZWN0aW9uID09PSAnbGVmdCcgPyAkbm9kZUNvbnRhaW5lci5wcmV2QWxsKCc6bm90KC5oaWRkZW4pJykgOiAkbm9kZUNvbnRhaW5lci5uZXh0QWxsKCc6bm90KC5oaWRkZW4pJykpIDogJG5vZGVDb250YWluZXIuc2libGluZ3MoKTtcclxuICAgICAgJG5vZGVDb250YWluZXIuY2xvc2VzdCgnLm5vZGVzJykucHJldigpLmNoaWxkcmVuKCc6bm90KC5oaWRkZW4pJylcclxuICAgICAgICAuc2xpY2UoMSwgZGlyZWN0aW9uID8gJHNpYmxpbmdzLmxlbmd0aCAqIDIgKyAxIDogLTEpLmFkZENsYXNzKCdoaWRkZW4nKTtcclxuICAgICAgZXZlbnQuZGF0YS5hbmltYXRlZE5vZGVzLnJlbW92ZUNsYXNzKCdzbGlkaW5nJyk7XHJcbiAgICAgICRzaWJsaW5ncy5maW5kKCcubm9kZTpndCgwKScpLmZpbHRlcih0aGlzLmlzVmlzaWJsZU5vZGUuYmluZCh0aGlzKSlcclxuICAgICAgICAucmVtb3ZlQ2xhc3MoJ3NsaWRlLWxlZnQgc2xpZGUtcmlnaHQnKS5hZGRDbGFzcygnc2xpZGUtdXAnKTtcclxuICAgICAgJHNpYmxpbmdzLmZpbmQoJy5saW5lcywgLm5vZGVzLCAudmVydGljYWxOb2RlcycpLmFkZENsYXNzKCdoaWRkZW4nKVxyXG4gICAgICAgIC5lbmQoKS5hZGRDbGFzcygnaGlkZGVuJyk7XHJcblxyXG4gICAgICBpZiAodGhpcy5pc0luQWN0aW9uKCRub2RlKSkge1xyXG4gICAgICAgIHRoaXMuc3dpdGNoSG9yaXpvbnRhbEFycm93KCRub2RlKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8vIGhpZGUgdGhlIHNpYmxpbmcgbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlXHJcbiAgICBoaWRlU2libGluZ3M6IGZ1bmN0aW9uICgkbm9kZSwgZGlyZWN0aW9uKSB7XHJcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgdmFyICRub2RlQ29udGFpbmVyID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKTtcclxuICAgICAgaWYgKCRub2RlQ29udGFpbmVyLnNpYmxpbmdzKCkuZmluZCgnLnNwaW5uZXInKS5sZW5ndGgpIHtcclxuICAgICAgICAkbm9kZS5jbG9zZXN0KCcub3JnY2hhcnQnKS5kYXRhKCdpbkFqYXgnLCBmYWxzZSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGRpcmVjdGlvbikge1xyXG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdsZWZ0Jykge1xyXG4gICAgICAgICAgJG5vZGVDb250YWluZXIucHJldkFsbCgpLmZpbmQoJy5ub2RlJykuZmlsdGVyKHRoaXMuaXNWaXNpYmxlTm9kZS5iaW5kKHRoaXMpKS5hZGRDbGFzcygnc2xpZGluZyBzbGlkZS1yaWdodCcpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAkbm9kZUNvbnRhaW5lci5uZXh0QWxsKCkuZmluZCgnLm5vZGUnKS5maWx0ZXIodGhpcy5pc1Zpc2libGVOb2RlLmJpbmQodGhpcykpLmFkZENsYXNzKCdzbGlkaW5nIHNsaWRlLWxlZnQnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJG5vZGVDb250YWluZXIucHJldkFsbCgpLmZpbmQoJy5ub2RlJykuZmlsdGVyKHRoaXMuaXNWaXNpYmxlTm9kZS5iaW5kKHRoaXMpKS5hZGRDbGFzcygnc2xpZGluZyBzbGlkZS1yaWdodCcpO1xyXG4gICAgICAgICRub2RlQ29udGFpbmVyLm5leHRBbGwoKS5maW5kKCcubm9kZScpLmZpbHRlcih0aGlzLmlzVmlzaWJsZU5vZGUuYmluZCh0aGlzKSkuYWRkQ2xhc3MoJ3NsaWRpbmcgc2xpZGUtbGVmdCcpO1xyXG4gICAgICB9XHJcbiAgICAgIHZhciAkYW5pbWF0ZWROb2RlcyA9ICRub2RlQ29udGFpbmVyLnNpYmxpbmdzKCkuZmluZCgnLnNsaWRpbmcnKTtcclxuICAgICAgdmFyICRsaW5lcyA9ICRhbmltYXRlZE5vZGVzLmNsb3Nlc3QoJy5ub2RlcycpLnByZXZBbGwoJy5saW5lcycpLmNzcygndmlzaWJpbGl0eScsICdoaWRkZW4nKTtcclxuICAgICAgJGFuaW1hdGVkTm9kZXMuZXEoMCkub25lKCd0cmFuc2l0aW9uZW5kJywgeyAnbm9kZSc6ICRub2RlLCAnbm9kZUNvbnRhaW5lcic6ICRub2RlQ29udGFpbmVyLCAnZGlyZWN0aW9uJzogZGlyZWN0aW9uLCAnYW5pbWF0ZWROb2Rlcyc6ICRhbmltYXRlZE5vZGVzLCAnbGluZXMnOiAkbGluZXMgfSwgdGhpcy5oaWRlU2libGluZ3NFbmQuYmluZCh0aGlzKSk7XHJcbiAgICB9LFxyXG4gICAgLy9cclxuICAgIHNob3dTaWJsaW5nc0VuZDogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgIHZhciAkbm9kZSA9IGV2ZW50LmRhdGEubm9kZTtcclxuICAgICAgZXZlbnQuZGF0YS52aXNpYmxlTm9kZXMucmVtb3ZlQ2xhc3MoJ3NsaWRpbmcnKTtcclxuICAgICAgaWYgKHRoaXMuaXNJbkFjdGlvbigkbm9kZSkpIHtcclxuICAgICAgICB0aGlzLnN3aXRjaEhvcml6b250YWxBcnJvdygkbm9kZSk7XHJcbiAgICAgICAgJG5vZGUuY2hpbGRyZW4oJy50b3BFZGdlJykucmVtb3ZlQ2xhc3MoJ2ZhLWNoZXZyb24tdXAnKS5hZGRDbGFzcygnZmEtY2hldnJvbi1kb3duJyk7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvL1xyXG4gICAgc2hvd1JlbGF0ZWRQYXJlbnRFbmQ6IGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICQoZXZlbnQudGFyZ2V0KS5yZW1vdmVDbGFzcygnc2xpZGluZycpO1xyXG4gICAgfSxcclxuICAgIC8vIHNob3cgdGhlIHNpYmxpbmcgbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlXHJcbiAgICBzaG93U2libGluZ3M6IGZ1bmN0aW9uICgkbm9kZSwgZGlyZWN0aW9uKSB7XHJcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgLy8gZmlyc3RseSwgc2hvdyB0aGUgc2libGluZyB0ZCB0YWdzXHJcbiAgICAgIHZhciAkc2libGluZ3MgPSAkKCk7XHJcbiAgICAgIGlmIChkaXJlY3Rpb24pIHtcclxuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAnbGVmdCcpIHtcclxuICAgICAgICAgICRzaWJsaW5ncyA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkucHJldkFsbCgpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgJHNpYmxpbmdzID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5uZXh0QWxsKCkucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAkc2libGluZ3MgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIHNlY29uZGx5LCBzaG93IHRoZSBsaW5lc1xyXG4gICAgICB2YXIgJHVwcGVyTGV2ZWwgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoKTtcclxuICAgICAgaWYgKGRpcmVjdGlvbikge1xyXG4gICAgICAgICR1cHBlckxldmVsLmVxKDIpLmNoaWxkcmVuKCcuaGlkZGVuJykuc2xpY2UoMCwgJHNpYmxpbmdzLmxlbmd0aCAqIDIpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAkdXBwZXJMZXZlbC5lcSgyKS5jaGlsZHJlbignLmhpZGRlbicpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcclxuICAgICAgfVxyXG4gICAgICAvLyB0aGlyZGx5LCBkbyBzb21lIGNsZWFuaW5nIHN0dWZmXHJcbiAgICAgIGlmICghdGhpcy5nZXROb2RlU3RhdGUoJG5vZGUsICdwYXJlbnQnKS52aXNpYmxlKSB7XHJcbiAgICAgICAgJHVwcGVyTGV2ZWwucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xyXG4gICAgICAgIHZhciBwYXJlbnQgPSAkdXBwZXJMZXZlbC5maW5kKCcubm9kZScpWzBdO1xyXG4gICAgICAgIHRoaXMucmVwYWludChwYXJlbnQpO1xyXG4gICAgICAgICQocGFyZW50KS5hZGRDbGFzcygnc2xpZGluZycpLnJlbW92ZUNsYXNzKCdzbGlkZS1kb3duJykub25lKCd0cmFuc2l0aW9uZW5kJywgdGhpcy5zaG93UmVsYXRlZFBhcmVudEVuZCk7XHJcbiAgICAgIH1cclxuICAgICAgLy8gbGFzdGx5LCBzaG93IHRoZSBzaWJsaW5nIG5vZGVzIHdpdGggYW5pbWF0aW9uXHJcbiAgICAgIHZhciAkdmlzaWJsZU5vZGVzID0gJHNpYmxpbmdzLmZpbmQoJy5ub2RlJykuZmlsdGVyKHRoaXMuaXNWaXNpYmxlTm9kZS5iaW5kKHRoaXMpKTtcclxuICAgICAgdGhpcy5yZXBhaW50KCR2aXNpYmxlTm9kZXMuZ2V0KDApKTtcclxuICAgICAgJHZpc2libGVOb2Rlcy5hZGRDbGFzcygnc2xpZGluZycpLnJlbW92ZUNsYXNzKCdzbGlkZS1sZWZ0IHNsaWRlLXJpZ2h0Jyk7XHJcbiAgICAgICR2aXNpYmxlTm9kZXMuZXEoMCkub25lKCd0cmFuc2l0aW9uZW5kJywgeyAnbm9kZSc6ICRub2RlLCAndmlzaWJsZU5vZGVzJzogJHZpc2libGVOb2RlcyB9LCB0aGlzLnNob3dTaWJsaW5nc0VuZC5iaW5kKHRoaXMpKTtcclxuICAgIH0sXHJcbiAgICAvLyBzdGFydCB1cCBsb2FkaW5nIHN0YXR1cyBmb3IgcmVxdWVzdGluZyBuZXcgbm9kZXNcclxuICAgIHN0YXJ0TG9hZGluZzogZnVuY3Rpb24gKCRlZGdlKSB7XHJcbiAgICAgIHZhciAkY2hhcnQgPSB0aGlzLiRjaGFydDtcclxuICAgICAgaWYgKHR5cGVvZiAkY2hhcnQuZGF0YSgnaW5BamF4JykgIT09ICd1bmRlZmluZWQnICYmICRjaGFydC5kYXRhKCdpbkFqYXgnKSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgJGVkZ2UuYWRkQ2xhc3MoJ2hpZGRlbicpO1xyXG4gICAgICAkZWRnZS5wYXJlbnQoKS5hcHBlbmQoJzxpIGNsYXNzPVwiZmEgZmEtY2lyY2xlLW8tbm90Y2ggZmEtc3BpbiBzcGlubmVyXCI+PC9pPicpXHJcbiAgICAgICAgLmNoaWxkcmVuKCkubm90KCcuc3Bpbm5lcicpLmNzcygnb3BhY2l0eScsIDAuMik7XHJcbiAgICAgICRjaGFydC5kYXRhKCdpbkFqYXgnLCB0cnVlKTtcclxuICAgICAgJCgnLm9jLWV4cG9ydC1idG4nICsgKHRoaXMub3B0aW9ucy5jaGFydENsYXNzICE9PSAnJyA/ICcuJyArIHRoaXMub3B0aW9ucy5jaGFydENsYXNzIDogJycpKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0sXHJcbiAgICAvLyB0ZXJtaW5hdGUgbG9hZGluZyBzdGF0dXMgZm9yIHJlcXVlc3RpbmcgbmV3IG5vZGVzXHJcbiAgICBlbmRMb2FkaW5nOiBmdW5jdGlvbiAoJGVkZ2UpIHtcclxuICAgICAgdmFyICRub2RlID0gJGVkZ2UucGFyZW50KCk7XHJcbiAgICAgICRlZGdlLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcclxuICAgICAgJG5vZGUuZmluZCgnLnNwaW5uZXInKS5yZW1vdmUoKTtcclxuICAgICAgJG5vZGUuY2hpbGRyZW4oKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xyXG4gICAgICB0aGlzLiRjaGFydC5kYXRhKCdpbkFqYXgnLCBmYWxzZSk7XHJcbiAgICAgICQoJy5vYy1leHBvcnQtYnRuJyArICh0aGlzLm9wdGlvbnMuY2hhcnRDbGFzcyAhPT0gJycgPyAnLicgKyB0aGlzLm9wdGlvbnMuY2hhcnRDbGFzcyA6ICcnKSkucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XHJcbiAgICB9LFxyXG4gICAgLy8gd2hldGhlciB0aGUgY3Vyc29yIGlzIGhvdmVyaW5nIG92ZXIgdGhlIG5vZGVcclxuICAgIGlzSW5BY3Rpb246IGZ1bmN0aW9uICgkbm9kZSkge1xyXG4gICAgICByZXR1cm4gJG5vZGUuY2hpbGRyZW4oJy5lZGdlJykuYXR0cignY2xhc3MnKS5pbmRleE9mKCdmYS0nKSA+IC0xID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgfSxcclxuICAgIC8vXHJcbiAgICBzd2l0Y2hWZXJ0aWNhbEFycm93OiBmdW5jdGlvbiAoJGFycm93KSB7XHJcbiAgICAgICRhcnJvdy50b2dnbGVDbGFzcygnZmEtY2hldnJvbi11cCcpLnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLWRvd24nKTtcclxuICAgIH0sXHJcbiAgICAvL1xyXG4gICAgc3dpdGNoSG9yaXpvbnRhbEFycm93OiBmdW5jdGlvbiAoJG5vZGUpIHtcclxuICAgICAgdmFyIG9wdHMgPSAkbm9kZS5jbG9zZXN0KCcub3JnY2hhcnQnKS5kYXRhKCdvcHRpb25zJyk7XHJcbiAgICAgIGlmIChvcHRzLnRvZ2dsZVNpYmxpbmdzUmVzcCAmJiAodHlwZW9mIG9wdHMuYWpheFVSTCA9PT0gJ3VuZGVmaW5lZCcgfHwgJG5vZGUuY2xvc2VzdCgnLm5vZGVzJykuZGF0YSgnc2libGluZ3NMb2FkZWQnKSkpIHtcclxuICAgICAgICB2YXIgJHByZXZTaWIgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLnByZXYoKTtcclxuICAgICAgICBpZiAoJHByZXZTaWIubGVuZ3RoKSB7XHJcbiAgICAgICAgICBpZiAoJHByZXZTaWIuaXMoJy5oaWRkZW4nKSkge1xyXG4gICAgICAgICAgICAkbm9kZS5jaGlsZHJlbignLmxlZnRFZGdlJykuYWRkQ2xhc3MoJ2ZhLWNoZXZyb24tbGVmdCcpLnJlbW92ZUNsYXNzKCdmYS1jaGV2cm9uLXJpZ2h0Jyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkbm9kZS5jaGlsZHJlbignLmxlZnRFZGdlJykuYWRkQ2xhc3MoJ2ZhLWNoZXZyb24tcmlnaHQnKS5yZW1vdmVDbGFzcygnZmEtY2hldnJvbi1sZWZ0Jyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciAkbmV4dFNpYiA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkubmV4dCgpO1xyXG4gICAgICAgIGlmICgkbmV4dFNpYi5sZW5ndGgpIHtcclxuICAgICAgICAgIGlmICgkbmV4dFNpYi5pcygnLmhpZGRlbicpKSB7XHJcbiAgICAgICAgICAgICRub2RlLmNoaWxkcmVuKCcucmlnaHRFZGdlJykuYWRkQ2xhc3MoJ2ZhLWNoZXZyb24tcmlnaHQnKS5yZW1vdmVDbGFzcygnZmEtY2hldnJvbi1sZWZ0Jyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkbm9kZS5jaGlsZHJlbignLnJpZ2h0RWRnZScpLmFkZENsYXNzKCdmYS1jaGV2cm9uLWxlZnQnKS5yZW1vdmVDbGFzcygnZmEtY2hldnJvbi1yaWdodCcpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB2YXIgJHNpYnMgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLnNpYmxpbmdzKCk7XHJcbiAgICAgICAgdmFyIHNpYnNWaXNpYmxlID0gJHNpYnMubGVuZ3RoID8gISRzaWJzLmlzKCcuaGlkZGVuJykgOiBmYWxzZTtcclxuICAgICAgICAkbm9kZS5jaGlsZHJlbignLmxlZnRFZGdlJykudG9nZ2xlQ2xhc3MoJ2ZhLWNoZXZyb24tcmlnaHQnLCBzaWJzVmlzaWJsZSkudG9nZ2xlQ2xhc3MoJ2ZhLWNoZXZyb24tbGVmdCcsICFzaWJzVmlzaWJsZSk7XHJcbiAgICAgICAgJG5vZGUuY2hpbGRyZW4oJy5yaWdodEVkZ2UnKS50b2dnbGVDbGFzcygnZmEtY2hldnJvbi1sZWZ0Jywgc2lic1Zpc2libGUpLnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLXJpZ2h0JywgIXNpYnNWaXNpYmxlKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8vXHJcbiAgICByZXBhaW50OiBmdW5jdGlvbiAobm9kZSkge1xyXG4gICAgICBpZiAobm9kZSkge1xyXG4gICAgICAgIG5vZGUuc3R5bGUub2Zmc2V0V2lkdGggPSBub2RlLm9mZnNldFdpZHRoO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy9cclxuICAgIG5vZGVFbnRlckxlYXZlSGFuZGxlcjogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgIHZhciAkbm9kZSA9ICQoZXZlbnQuZGVsZWdhdGVUYXJnZXQpLCBmbGFnID0gZmFsc2U7XHJcbiAgICAgIHZhciAkdG9wRWRnZSA9ICRub2RlLmNoaWxkcmVuKCcudG9wRWRnZScpO1xyXG4gICAgICB2YXIgJHJpZ2h0RWRnZSA9ICRub2RlLmNoaWxkcmVuKCcucmlnaHRFZGdlJyk7XHJcbiAgICAgIHZhciAkYm90dG9tRWRnZSA9ICRub2RlLmNoaWxkcmVuKCcuYm90dG9tRWRnZScpO1xyXG4gICAgICB2YXIgJGxlZnRFZGdlID0gJG5vZGUuY2hpbGRyZW4oJy5sZWZ0RWRnZScpO1xyXG4gICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ21vdXNlZW50ZXInKSB7XHJcbiAgICAgICAgaWYgKCR0b3BFZGdlLmxlbmd0aCkge1xyXG4gICAgICAgICAgZmxhZyA9IHRoaXMuZ2V0Tm9kZVN0YXRlKCRub2RlLCAncGFyZW50JykudmlzaWJsZTtcclxuICAgICAgICAgICR0b3BFZGdlLnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLXVwJywgIWZsYWcpLnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLWRvd24nLCBmbGFnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCRib3R0b21FZGdlLmxlbmd0aCkge1xyXG4gICAgICAgICAgZmxhZyA9IHRoaXMuZ2V0Tm9kZVN0YXRlKCRub2RlLCAnY2hpbGRyZW4nKS52aXNpYmxlO1xyXG4gICAgICAgICAgJGJvdHRvbUVkZ2UudG9nZ2xlQ2xhc3MoJ2ZhLWNoZXZyb24tZG93bicsICFmbGFnKS50b2dnbGVDbGFzcygnZmEtY2hldnJvbi11cCcsIGZsYWcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoJGxlZnRFZGdlLmxlbmd0aCkge1xyXG4gICAgICAgICAgdGhpcy5zd2l0Y2hIb3Jpem9udGFsQXJyb3coJG5vZGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAkbm9kZS5jaGlsZHJlbignLmVkZ2UnKS5yZW1vdmVDbGFzcygnZmEtY2hldnJvbi11cCBmYS1jaGV2cm9uLWRvd24gZmEtY2hldnJvbi1yaWdodCBmYS1jaGV2cm9uLWxlZnQnKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8vXHJcbiAgICBub2RlQ2xpY2tIYW5kbGVyOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgdGhpcy4kY2hhcnQuZmluZCgnLmZvY3VzZWQnKS5yZW1vdmVDbGFzcygnZm9jdXNlZCcpO1xyXG4gICAgICAkKGV2ZW50LmRlbGVnYXRlVGFyZ2V0KS5hZGRDbGFzcygnZm9jdXNlZCcpO1xyXG4gICAgfSxcclxuICAgIC8vIGxvYWQgbmV3IG5vZGVzIGJ5IGFqYXhcclxuICAgIGxvYWROb2RlczogZnVuY3Rpb24gKHJlbCwgdXJsLCAkZWRnZSkge1xyXG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgIHZhciBvcHRzID0gdGhpcy5vcHRpb25zO1xyXG4gICAgICAkLmFqYXgoeyAndXJsJzogdXJsLCAnZGF0YVR5cGUnOiAnanNvbicgfSlcclxuICAgICAgLmRvbmUoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICBpZiAodGhhdC4kY2hhcnQuZGF0YSgnaW5BamF4JykpIHtcclxuICAgICAgICAgIGlmIChyZWwgPT09ICdwYXJlbnQnKSB7XHJcbiAgICAgICAgICAgIGlmICghJC5pc0VtcHR5T2JqZWN0KGRhdGEpKSB7XHJcbiAgICAgICAgICAgICAgdGhhdC5hZGRQYXJlbnQoJGVkZ2UucGFyZW50KCksIGRhdGEsIG9wdHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKHJlbCA9PT0gJ2NoaWxkcmVuJykge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5jaGlsZHJlbi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICB0aGF0LmFkZENoaWxkcmVuKCRlZGdlLnBhcmVudCgpLCBkYXRhLCAkLmV4dGVuZCh7fSwgb3B0cywgeyBkZXB0aDogMCB9KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLnNpYmxpbmdzIHx8IGRhdGEuY2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgICB0aGF0LmFkZFNpYmxpbmdzKCRlZGdlLnBhcmVudCgpLCBkYXRhLCBvcHRzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgICAgLmZhaWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdGYWlsZWQgdG8gZ2V0ICcgKyByZWwgKyAnIGRhdGEnKTtcclxuICAgICAgfSlcclxuICAgICAgLmFsd2F5cyhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhhdC5lbmRMb2FkaW5nKCRlZGdlKTtcclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgLy9cclxuICAgIEhpZGVGaXJzdFBhcmVudEVuZDogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgIHZhciAkdG9wRWRnZSA9IGV2ZW50LmRhdGEudG9wRWRnZTtcclxuICAgICAgdmFyICRub2RlID0gJHRvcEVkZ2UucGFyZW50KCk7XHJcbiAgICAgIGlmICh0aGlzLmlzSW5BY3Rpb24oJG5vZGUpKSB7XHJcbiAgICAgICAgdGhpcy5zd2l0Y2hWZXJ0aWNhbEFycm93KCR0b3BFZGdlKTtcclxuICAgICAgICB0aGlzLnN3aXRjaEhvcml6b250YWxBcnJvdygkbm9kZSk7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvL1xyXG4gICAgdG9wRWRnZUNsaWNrSGFuZGxlcjogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgIHZhciAkdG9wRWRnZSA9ICQoZXZlbnQudGFyZ2V0KTtcclxuICAgICAgdmFyICRub2RlID0gJChldmVudC5kZWxlZ2F0ZVRhcmdldCk7XHJcbiAgICAgIHZhciBwYXJlbnRTdGF0ZSA9IHRoaXMuZ2V0Tm9kZVN0YXRlKCRub2RlLCAncGFyZW50Jyk7XHJcbiAgICAgIGlmIChwYXJlbnRTdGF0ZS5leGlzdCkge1xyXG4gICAgICAgIHZhciAkcGFyZW50ID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5jbG9zZXN0KCd0cicpLnNpYmxpbmdzKCc6Zmlyc3QnKS5maW5kKCcubm9kZScpO1xyXG4gICAgICAgIGlmICgkcGFyZW50LmlzKCcuc2xpZGluZycpKSB7IHJldHVybjsgfVxyXG4gICAgICAgIC8vIGhpZGUgdGhlIGFuY2VzdG9yIG5vZGVzIGFuZCBzaWJsaW5nIG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxyXG4gICAgICAgIGlmIChwYXJlbnRTdGF0ZS52aXNpYmxlKSB7XHJcbiAgICAgICAgICB0aGlzLmhpZGVQYXJlbnQoJG5vZGUpO1xyXG4gICAgICAgICAgJHBhcmVudC5vbmUoJ3RyYW5zaXRpb25lbmQnLCB7ICd0b3BFZGdlJzogJHRvcEVkZ2UgfSwgdGhpcy5IaWRlRmlyc3RQYXJlbnRFbmQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgfSBlbHNlIHsgLy8gc2hvdyB0aGUgYW5jZXN0b3JzIGFuZCBzaWJsaW5nc1xyXG4gICAgICAgICAgdGhpcy5zaG93UGFyZW50KCRub2RlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7IC8vIGxvYWQgdGhlIG5ldyBwYXJlbnQgbm9kZSBvZiB0aGUgc3BlY2lmaWVkIG5vZGUgYnkgYWpheCByZXF1ZXN0XHJcbiAgICAgICAgLy8gc3RhcnQgdXAgbG9hZGluZyBzdGF0dXNcclxuICAgICAgICBpZiAodGhpcy5zdGFydExvYWRpbmcoJHRvcEVkZ2UpKSB7XHJcbiAgICAgICAgICB2YXIgb3B0cyA9IHRoaXMub3B0aW9ucztcclxuICAgICAgICAgIHZhciB1cmwgPSAkLmlzRnVuY3Rpb24ob3B0cy5hamF4VVJMLnBhcmVudCkgPyBvcHRzLmFqYXhVUkwucGFyZW50KGV2ZW50LmRhdGEubm9kZURhdGEpIDogb3B0cy5hamF4VVJMLnBhcmVudCArICRub2RlWzBdLmlkO1xyXG4gICAgICAgICAgdGhpcy5sb2FkTm9kZXMoJ3BhcmVudCcsIHVybCwgJHRvcEVkZ2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8vXHJcbiAgICBib3R0b21FZGdlQ2xpY2tIYW5kbGVyOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgIHZhciAkYm90dG9tRWRnZSA9ICQoZXZlbnQudGFyZ2V0KTtcclxuICAgICAgdmFyICRub2RlID0gJChldmVudC5kZWxlZ2F0ZVRhcmdldCk7XHJcbiAgICAgIHZhciBjaGlsZHJlblN0YXRlID0gdGhpcy5nZXROb2RlU3RhdGUoJG5vZGUsICdjaGlsZHJlbicpO1xyXG4gICAgICBpZiAoY2hpbGRyZW5TdGF0ZS5leGlzdCkge1xyXG4gICAgICAgIHZhciAkY2hpbGRyZW4gPSAkbm9kZS5jbG9zZXN0KCd0cicpLnNpYmxpbmdzKCc6bGFzdCcpO1xyXG4gICAgICAgIGlmICgkY2hpbGRyZW4uZmluZCgnLnNsaWRpbmcnKS5sZW5ndGgpIHsgcmV0dXJuOyB9XHJcbiAgICAgICAgLy8gaGlkZSB0aGUgZGVzY2VuZGFudCBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGVcclxuICAgICAgICBpZiAoY2hpbGRyZW5TdGF0ZS52aXNpYmxlKSB7XHJcbiAgICAgICAgICB0aGlzLmhpZGVDaGlsZHJlbigkbm9kZSk7XHJcbiAgICAgICAgfSBlbHNlIHsgLy8gc2hvdyB0aGUgZGVzY2VuZGFudHNcclxuICAgICAgICAgIHRoaXMuc2hvd0NoaWxkcmVuKCRub2RlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7IC8vIGxvYWQgdGhlIG5ldyBjaGlsZHJlbiBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGUgYnkgYWpheCByZXF1ZXN0XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhcnRMb2FkaW5nKCRib3R0b21FZGdlKSkge1xyXG4gICAgICAgICAgdmFyIG9wdHMgPSB0aGlzLm9wdGlvbnM7XHJcbiAgICAgICAgICB2YXIgdXJsID0gJC5pc0Z1bmN0aW9uKG9wdHMuYWpheFVSTC5jaGlsZHJlbikgPyBvcHRzLmFqYXhVUkwuY2hpbGRyZW4oZXZlbnQuZGF0YS5ub2RlRGF0YSkgOiBvcHRzLmFqYXhVUkwuY2hpbGRyZW4gKyAkbm9kZVswXS5pZDtcclxuICAgICAgICAgIHRoaXMubG9hZE5vZGVzKCdjaGlsZHJlbicsIHVybCwgJGJvdHRvbUVkZ2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8vXHJcbiAgICBoRWRnZUNsaWNrSGFuZGxlcjogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICB2YXIgJGhFZGdlID0gJChldmVudC50YXJnZXQpO1xyXG4gICAgICB2YXIgJG5vZGUgPSAkKGV2ZW50LmRlbGVnYXRlVGFyZ2V0KTtcclxuICAgICAgdmFyIG9wdHMgPSB0aGlzLm9wdGlvbnM7XHJcbiAgICAgIHZhciBzaWJsaW5nc1N0YXRlID0gdGhpcy5nZXROb2RlU3RhdGUoJG5vZGUsICdzaWJsaW5ncycpO1xyXG4gICAgICBpZiAoc2libGluZ3NTdGF0ZS5leGlzdCkge1xyXG4gICAgICAgIHZhciAkc2libGluZ3MgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLnNpYmxpbmdzKCk7XHJcbiAgICAgICAgaWYgKCRzaWJsaW5ncy5maW5kKCcuc2xpZGluZycpLmxlbmd0aCkgeyByZXR1cm47IH1cclxuICAgICAgICBpZiAob3B0cy50b2dnbGVTaWJsaW5nc1Jlc3ApIHtcclxuICAgICAgICAgIHZhciAkcHJldlNpYiA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkucHJldigpO1xyXG4gICAgICAgICAgdmFyICRuZXh0U2liID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5uZXh0KCk7XHJcbiAgICAgICAgICBpZiAoJGhFZGdlLmlzKCcubGVmdEVkZ2UnKSkge1xyXG4gICAgICAgICAgICBpZiAoJHByZXZTaWIuaXMoJy5oaWRkZW4nKSkge1xyXG4gICAgICAgICAgICAgIHRoaXMuc2hvd1NpYmxpbmdzKCRub2RlLCAnbGVmdCcpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHRoaXMuaGlkZVNpYmxpbmdzKCRub2RlLCAnbGVmdCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoJG5leHRTaWIuaXMoJy5oaWRkZW4nKSkge1xyXG4gICAgICAgICAgICAgIHRoaXMuc2hvd1NpYmxpbmdzKCRub2RlLCAncmlnaHQnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB0aGlzLmhpZGVTaWJsaW5ncygkbm9kZSwgJ3JpZ2h0Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaWYgKHNpYmxpbmdzU3RhdGUudmlzaWJsZSkge1xyXG4gICAgICAgICAgICB0aGlzLmhpZGVTaWJsaW5ncygkbm9kZSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNob3dTaWJsaW5ncygkbm9kZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIGxvYWQgdGhlIG5ldyBzaWJsaW5nIG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZSBieSBhamF4IHJlcXVlc3RcclxuICAgICAgICBpZiAodGhpcy5zdGFydExvYWRpbmcoJGhFZGdlKSkge1xyXG4gICAgICAgICAgdmFyIG5vZGVJZCA9ICRub2RlWzBdLmlkO1xyXG4gICAgICAgICAgdmFyIHVybCA9ICh0aGlzLmdldE5vZGVTdGF0ZSgkbm9kZSwgJ3BhcmVudCcpLmV4aXN0KSA/XHJcbiAgICAgICAgICAgICgkLmlzRnVuY3Rpb24ob3B0cy5hamF4VVJMLnNpYmxpbmdzKSA/IG9wdHMuYWpheFVSTC5zaWJsaW5ncyhldmVudC5kYXRhLm5vZGVEYXRhKSA6IG9wdHMuYWpheFVSTC5zaWJsaW5ncyArIG5vZGVJZCkgOlxyXG4gICAgICAgICAgICAoJC5pc0Z1bmN0aW9uKG9wdHMuYWpheFVSTC5mYW1pbGllcykgPyBvcHRzLmFqYXhVUkwuZmFtaWxpZXMoZXZlbnQuZGF0YS5ub2RlRGF0YSkgOiBvcHRzLmFqYXhVUkwuZmFtaWxpZXMgKyBub2RlSWQpO1xyXG4gICAgICAgICAgdGhpcy5sb2FkTm9kZXMoJ3NpYmxpbmdzJywgdXJsLCAkaEVkZ2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8vXHJcbiAgICBleHBhbmRWTm9kZXNFbmQ6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICBldmVudC5kYXRhLnZOb2Rlcy5yZW1vdmVDbGFzcygnc2xpZGluZycpO1xyXG4gICAgfSxcclxuICAgIC8vXHJcbiAgICBjb2xsYXBzZVZOb2Rlc0VuZDogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgIGV2ZW50LmRhdGEudk5vZGVzLnJlbW92ZUNsYXNzKCdzbGlkaW5nJykuY2xvc2VzdCgndWwnKS5hZGRDbGFzcygnaGlkZGVuJyk7XHJcbiAgICB9LFxyXG4gICAgLy8gZXZlbnQgaGFuZGxlciBmb3IgdG9nZ2xlIGJ1dHRvbnMgaW4gSHlicmlkKGhvcml6b250YWwgKyB2ZXJ0aWNhbCkgT3JnQ2hhcnRcclxuICAgIHRvZ2dsZVZOb2RlczogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgIHZhciAkdG9nZ2xlQnRuID0gJChldmVudC50YXJnZXQpO1xyXG4gICAgICB2YXIgJGRlc2NXcmFwcGVyID0gJHRvZ2dsZUJ0bi5wYXJlbnQoKS5uZXh0KCk7XHJcbiAgICAgIHZhciAkZGVzY2VuZGFudHMgPSAkZGVzY1dyYXBwZXIuZmluZCgnLm5vZGUnKTtcclxuICAgICAgdmFyICRjaGlsZHJlbiA9ICRkZXNjV3JhcHBlci5jaGlsZHJlbigpLmNoaWxkcmVuKCcubm9kZScpO1xyXG4gICAgICBpZiAoJGNoaWxkcmVuLmlzKCcuc2xpZGluZycpKSB7IHJldHVybjsgfVxyXG4gICAgICAkdG9nZ2xlQnRuLnRvZ2dsZUNsYXNzKCdmYS1wbHVzLXNxdWFyZSBmYS1taW51cy1zcXVhcmUnKTtcclxuICAgICAgaWYgKCRkZXNjZW5kYW50cy5lcSgwKS5pcygnLnNsaWRlLXVwJykpIHtcclxuICAgICAgICAkZGVzY1dyYXBwZXIucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xyXG4gICAgICAgIHRoaXMucmVwYWludCgkY2hpbGRyZW4uZ2V0KDApKTtcclxuICAgICAgICAkY2hpbGRyZW4uYWRkQ2xhc3MoJ3NsaWRpbmcnKS5yZW1vdmVDbGFzcygnc2xpZGUtdXAnKS5lcSgwKS5vbmUoJ3RyYW5zaXRpb25lbmQnLCB7ICd2Tm9kZXMnOiAkY2hpbGRyZW4gfSwgdGhpcy5leHBhbmRWTm9kZXNFbmQpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICRkZXNjZW5kYW50cy5hZGRDbGFzcygnc2xpZGluZyBzbGlkZS11cCcpLmVxKDApLm9uZSgndHJhbnNpdGlvbmVuZCcsIHsgJ3ZOb2Rlcyc6ICRkZXNjZW5kYW50cyB9LCB0aGlzLmNvbGxhcHNlVk5vZGVzRW5kKTtcclxuICAgICAgICAkZGVzY2VuZGFudHMuZmluZCgnLnRvZ2dsZUJ0bicpLnJlbW92ZUNsYXNzKCdmYS1taW51cy1zcXVhcmUnKS5hZGRDbGFzcygnZmEtcGx1cy1zcXVhcmUnKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8vXHJcbiAgICBjcmVhdGVHaG9zdE5vZGU6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICB2YXIgJG5vZGVEaXYgPSAkKGV2ZW50LnRhcmdldCk7XHJcbiAgICAgIHZhciBvcHRzID0gdGhpcy5vcHRpb25zO1xyXG4gICAgICB2YXIgb3JpZ0V2ZW50ID0gZXZlbnQub3JpZ2luYWxFdmVudDtcclxuICAgICAgdmFyIGlzRmlyZWZveCA9IC9maXJlZm94Ly50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkpO1xyXG4gICAgICBpZiAoaXNGaXJlZm94KSB7XHJcbiAgICAgICAgb3JpZ0V2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L2h0bWwnLCAnaGFjayBmb3IgZmlyZWZveCcpO1xyXG4gICAgICB9XHJcbiAgICAgIHZhciBnaG9zdE5vZGUsIG5vZGVDb3ZlcjtcclxuICAgICAgaWYgKCFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2hvc3Qtbm9kZScpKSB7XHJcbiAgICAgICAgZ2hvc3ROb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJzdmdcIik7XHJcbiAgICAgICAgZ2hvc3ROb2RlLmNsYXNzTGlzdC5hZGQoJ2dob3N0LW5vZGUnKTtcclxuICAgICAgICBub2RlQ292ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywncmVjdCcpO1xyXG4gICAgICAgIGdob3N0Tm9kZS5hcHBlbmRDaGlsZChub2RlQ292ZXIpO1xyXG4gICAgICAgICRub2RlRGl2LmNsb3Nlc3QoJy5vcmdjaGFydCcpLmFwcGVuZChnaG9zdE5vZGUpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGdob3N0Tm9kZSA9ICRub2RlRGl2LmNsb3Nlc3QoJy5vcmdjaGFydCcpLmNoaWxkcmVuKCcuZ2hvc3Qtbm9kZScpLmdldCgwKTtcclxuICAgICAgICBub2RlQ292ZXIgPSAkKGdob3N0Tm9kZSkuY2hpbGRyZW4oKS5nZXQoMCk7XHJcbiAgICAgIH1cclxuICAgICAgdmFyIHRyYW5zVmFsdWVzID0gJG5vZGVEaXYuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuY3NzKCd0cmFuc2Zvcm0nKS5zcGxpdCgnLCcpO1xyXG4gICAgICB2YXIgc2NhbGUgPSBNYXRoLmFicyh3aW5kb3cucGFyc2VGbG9hdCgob3B0cy5kaXJlY3Rpb24gPT09ICd0MmInIHx8IG9wdHMuZGlyZWN0aW9uID09PSAnYjJ0JykgPyB0cmFuc1ZhbHVlc1swXS5zbGljZSh0cmFuc1ZhbHVlc1swXS5pbmRleE9mKCcoJykgKyAxKSA6IHRyYW5zVmFsdWVzWzFdKSk7XHJcbiAgICAgIGdob3N0Tm9kZS5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgJG5vZGVEaXYub3V0ZXJXaWR0aChmYWxzZSkpO1xyXG4gICAgICBnaG9zdE5vZGUuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCAkbm9kZURpdi5vdXRlckhlaWdodChmYWxzZSkpO1xyXG4gICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCd4Jyw1ICogc2NhbGUpO1xyXG4gICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCd5Jyw1ICogc2NhbGUpO1xyXG4gICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCd3aWR0aCcsIDEyMCAqIHNjYWxlKTtcclxuICAgICAgbm9kZUNvdmVyLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgNDAgKiBzY2FsZSk7XHJcbiAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ3J4JywgNCAqIHNjYWxlKTtcclxuICAgICAgbm9kZUNvdmVyLnNldEF0dHJpYnV0ZSgncnknLCA0ICogc2NhbGUpO1xyXG4gICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAxICogc2NhbGUpO1xyXG4gICAgICB2YXIgeE9mZnNldCA9IG9yaWdFdmVudC5vZmZzZXRYICogc2NhbGU7XHJcbiAgICAgIHZhciB5T2Zmc2V0ID0gb3JpZ0V2ZW50Lm9mZnNldFkgKiBzY2FsZTtcclxuICAgICAgaWYgKG9wdHMuZGlyZWN0aW9uID09PSAnbDJyJykge1xyXG4gICAgICAgIHhPZmZzZXQgPSBvcmlnRXZlbnQub2Zmc2V0WSAqIHNjYWxlO1xyXG4gICAgICAgIHlPZmZzZXQgPSBvcmlnRXZlbnQub2Zmc2V0WCAqIHNjYWxlO1xyXG4gICAgICB9IGVsc2UgaWYgKG9wdHMuZGlyZWN0aW9uID09PSAncjJsJykge1xyXG4gICAgICAgIHhPZmZzZXQgPSAkbm9kZURpdi5vdXRlcldpZHRoKGZhbHNlKSAtIG9yaWdFdmVudC5vZmZzZXRZICogc2NhbGU7XHJcbiAgICAgICAgeU9mZnNldCA9IG9yaWdFdmVudC5vZmZzZXRYICogc2NhbGU7XHJcbiAgICAgIH0gZWxzZSBpZiAob3B0cy5kaXJlY3Rpb24gPT09ICdiMnQnKSB7XHJcbiAgICAgICAgeE9mZnNldCA9ICRub2RlRGl2Lm91dGVyV2lkdGgoZmFsc2UpIC0gb3JpZ0V2ZW50Lm9mZnNldFggKiBzY2FsZTtcclxuICAgICAgICB5T2Zmc2V0ID0gJG5vZGVEaXYub3V0ZXJIZWlnaHQoZmFsc2UpIC0gb3JpZ0V2ZW50Lm9mZnNldFkgKiBzY2FsZTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoaXNGaXJlZm94KSB7IC8vIGhhY2sgZm9yIG9sZCB2ZXJzaW9uIG9mIEZpcmVmb3goPCA0OC4wKVxyXG4gICAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCAncmdiKDI1NSwgMjU1LCAyNTUpJyk7XHJcbiAgICAgICAgbm9kZUNvdmVyLnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgJ3JnYigxOTEsIDAsIDApJyk7XHJcbiAgICAgICAgdmFyIGdob3N0Tm9kZVdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuICAgICAgICBnaG9zdE5vZGVXcmFwcGVyLnNyYyA9ICdkYXRhOmltYWdlL3N2Zyt4bWw7dXRmOCwnICsgKG5ldyBYTUxTZXJpYWxpemVyKCkpLnNlcmlhbGl6ZVRvU3RyaW5nKGdob3N0Tm9kZSk7XHJcbiAgICAgICAgb3JpZ0V2ZW50LmRhdGFUcmFuc2Zlci5zZXREcmFnSW1hZ2UoZ2hvc3ROb2RlV3JhcHBlciwgeE9mZnNldCwgeU9mZnNldCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgb3JpZ0V2ZW50LmRhdGFUcmFuc2Zlci5zZXREcmFnSW1hZ2UoZ2hvc3ROb2RlLCB4T2Zmc2V0LCB5T2Zmc2V0KTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8vXHJcbiAgICBmaWx0ZXJBbGxvd2VkRHJvcE5vZGVzOiBmdW5jdGlvbiAoJGRyYWdnZWQpIHtcclxuICAgICAgdmFyIG9wdHMgPSB0aGlzLm9wdGlvbnM7XHJcbiAgICAgIHZhciAkZHJhZ1pvbmUgPSAkZHJhZ2dlZC5jbG9zZXN0KCcubm9kZXMnKS5zaWJsaW5ncygpLmVxKDApLmZpbmQoJy5ub2RlOmZpcnN0Jyk7XHJcbiAgICAgIHZhciAkZHJhZ0hpZXIgPSAkZHJhZ2dlZC5jbG9zZXN0KCd0YWJsZScpLmZpbmQoJy5ub2RlJyk7XHJcbiAgICAgIHRoaXMuJGNoYXJ0LmRhdGEoJ2RyYWdnZWQnLCAkZHJhZ2dlZClcclxuICAgICAgICAuZmluZCgnLm5vZGUnKS5lYWNoKGZ1bmN0aW9uIChpbmRleCwgbm9kZSkge1xyXG4gICAgICAgICAgaWYgKCRkcmFnSGllci5pbmRleChub2RlKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgaWYgKG9wdHMuZHJvcENyaXRlcmlhKSB7XHJcbiAgICAgICAgICAgICAgaWYgKG9wdHMuZHJvcENyaXRlcmlhKCRkcmFnZ2VkLCAkZHJhZ1pvbmUsICQobm9kZSkpKSB7XHJcbiAgICAgICAgICAgICAgICAkKG5vZGUpLmFkZENsYXNzKCdhbGxvd2VkRHJvcCcpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAkKG5vZGUpLmFkZENsYXNzKCdhbGxvd2VkRHJvcCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgLy9cclxuICAgIGRyYWdzdGFydEhhbmRsZXI6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAvLyBpZiB1c2VycyBlbmFibGUgem9vbSBvciBkaXJlY3Rpb24gb3B0aW9uc1xyXG4gICAgICBpZiAodGhpcy4kY2hhcnQuY3NzKCd0cmFuc2Zvcm0nKSAhPT0gJ25vbmUnKSB7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVHaG9zdE5vZGUoZXZlbnQpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuZmlsdGVyQWxsb3dlZERyb3BOb2RlcygkKGV2ZW50LnRhcmdldCkpO1xyXG4gICAgfSxcclxuICAgIC8vXHJcbiAgICBkcmFnb3ZlckhhbmRsZXI6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBpZiAoISQoZXZlbnQuZGVsZWdhdGVUYXJnZXQpLmlzKCcuYWxsb3dlZERyb3AnKSkge1xyXG4gICAgICAgIGV2ZW50Lm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3QgPSAnbm9uZSc7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvL1xyXG4gICAgZHJhZ2VuZEhhbmRsZXI6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICB0aGlzLiRjaGFydC5maW5kKCcuYWxsb3dlZERyb3AnKS5yZW1vdmVDbGFzcygnYWxsb3dlZERyb3AnKTtcclxuICAgIH0sXHJcbiAgICAvL1xyXG4gICAgZHJvcEhhbmRsZXI6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICB2YXIgJGRyb3Bab25lID0gJChldmVudC5kZWxlZ2F0ZVRhcmdldCk7XHJcbiAgICAgIHZhciAkZHJhZ2dlZCA9IHRoaXMuJGNoYXJ0LmRhdGEoJ2RyYWdnZWQnKTtcclxuICAgICAgdmFyICRkcmFnWm9uZSA9ICRkcmFnZ2VkLmNsb3Nlc3QoJy5ub2RlcycpLnNpYmxpbmdzKCkuZXEoMCkuY2hpbGRyZW4oKTtcclxuICAgICAgdmFyIGRyb3BFdmVudCA9ICQuRXZlbnQoJ25vZGVkcm9wLm9yZ2NoYXJ0Jyk7XHJcbiAgICAgIHRoaXMuJGNoYXJ0LnRyaWdnZXIoZHJvcEV2ZW50LCB7ICdkcmFnZ2VkTm9kZSc6ICRkcmFnZ2VkLCAnZHJhZ1pvbmUnOiAkZHJhZ1pvbmUuY2hpbGRyZW4oKSwgJ2Ryb3Bab25lJzogJGRyb3Bab25lIH0pO1xyXG4gICAgICBpZiAoZHJvcEV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIGZpcnN0bHksIGRlYWwgd2l0aCB0aGUgaGllcmFyY2h5IG9mIGRyb3Agem9uZVxyXG4gICAgICBpZiAoISRkcm9wWm9uZS5jbG9zZXN0KCd0cicpLnNpYmxpbmdzKCkubGVuZ3RoKSB7IC8vIGlmIHRoZSBkcm9wIHpvbmUgaXMgYSBsZWFmIG5vZGVcclxuICAgICAgICAkZHJvcFpvbmUuYXBwZW5kKCc8aSBjbGFzcz1cImVkZ2UgdmVydGljYWxFZGdlIGJvdHRvbUVkZ2UgZmFcIj48L2k+JylcclxuICAgICAgICAgIC5wYXJlbnQoKS5hdHRyKCdjb2xzcGFuJywgMilcclxuICAgICAgICAgIC5wYXJlbnQoKS5hZnRlcignPHRyIGNsYXNzPVwibGluZXNcIj48dGQgY29sc3Bhbj1cIjJcIj48ZGl2IGNsYXNzPVwiZG93bkxpbmVcIj48L2Rpdj48L3RkPjwvdHI+J1xyXG4gICAgICAgICAgKyAnPHRyIGNsYXNzPVwibGluZXNcIj48dGQgY2xhc3M9XCJyaWdodExpbmVcIj48L3RkPjx0ZCBjbGFzcz1cImxlZnRMaW5lXCI+PC90ZD48L3RyPidcclxuICAgICAgICAgICsgJzx0ciBjbGFzcz1cIm5vZGVzXCI+PC90cj4nKVxyXG4gICAgICAgICAgLnNpYmxpbmdzKCc6bGFzdCcpLmFwcGVuZCgkZHJhZ2dlZC5maW5kKCcuaG9yaXpvbnRhbEVkZ2UnKS5yZW1vdmUoKS5lbmQoKS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB2YXIgZHJvcENvbHNwYW4gPSBwYXJzZUludCgkZHJvcFpvbmUucGFyZW50KCkuYXR0cignY29sc3BhbicpKSArIDI7XHJcbiAgICAgICAgdmFyIGhvcml6b250YWxFZGdlcyA9ICc8aSBjbGFzcz1cImVkZ2UgaG9yaXpvbnRhbEVkZ2UgcmlnaHRFZGdlIGZhXCI+PC9pPjxpIGNsYXNzPVwiZWRnZSBob3Jpem9udGFsRWRnZSBsZWZ0RWRnZSBmYVwiPjwvaT4nO1xyXG4gICAgICAgICRkcm9wWm9uZS5jbG9zZXN0KCd0cicpLm5leHQoKS5hZGRCYWNrKCkuY2hpbGRyZW4oKS5hdHRyKCdjb2xzcGFuJywgZHJvcENvbHNwYW4pO1xyXG4gICAgICAgIGlmICghJGRyYWdnZWQuZmluZCgnLmhvcml6b250YWxFZGdlJykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAkZHJhZ2dlZC5hcHBlbmQoaG9yaXpvbnRhbEVkZ2VzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJGRyb3Bab25lLmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoKS5lcSgxKS5jaGlsZHJlbignOmxhc3QnKS5iZWZvcmUoJzx0ZCBjbGFzcz1cImxlZnRMaW5lIHRvcExpbmVcIj48L3RkPjx0ZCBjbGFzcz1cInJpZ2h0TGluZSB0b3BMaW5lXCI+PC90ZD4nKVxyXG4gICAgICAgICAgLmVuZCgpLm5leHQoKS5hcHBlbmQoJGRyYWdnZWQuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKSk7XHJcbiAgICAgICAgdmFyICRkcm9wU2licyA9ICRkcmFnZ2VkLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkuc2libGluZ3MoKS5maW5kKCcubm9kZTpmaXJzdCcpO1xyXG4gICAgICAgIGlmICgkZHJvcFNpYnMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAkZHJvcFNpYnMuYXBwZW5kKGhvcml6b250YWxFZGdlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIC8vIHNlY29uZGx5LCBkZWFsIHdpdGggdGhlIGhpZXJhcmNoeSBvZiBkcmFnZ2VkIG5vZGVcclxuICAgICAgdmFyIGRyYWdDb2xzcGFuID0gcGFyc2VJbnQoJGRyYWdab25lLmF0dHIoJ2NvbHNwYW4nKSk7XHJcbiAgICAgIGlmIChkcmFnQ29sc3BhbiA+IDIpIHtcclxuICAgICAgICAkZHJhZ1pvbmUuYXR0cignY29sc3BhbicsIGRyYWdDb2xzcGFuIC0gMilcclxuICAgICAgICAgIC5wYXJlbnQoKS5uZXh0KCkuY2hpbGRyZW4oKS5hdHRyKCdjb2xzcGFuJywgZHJhZ0NvbHNwYW4gLSAyKVxyXG4gICAgICAgICAgLmVuZCgpLm5leHQoKS5jaGlsZHJlbigpLnNsaWNlKDEsIDMpLnJlbW92ZSgpO1xyXG4gICAgICAgIHZhciAkZHJhZ1NpYnMgPSAkZHJhZ1pvbmUucGFyZW50KCkuc2libGluZ3MoJy5ub2RlcycpLmNoaWxkcmVuKCkuZmluZCgnLm5vZGU6Zmlyc3QnKTtcclxuICAgICAgICBpZiAoJGRyYWdTaWJzLmxlbmd0aCA9PT0xKSB7XHJcbiAgICAgICAgICAkZHJhZ1NpYnMuZmluZCgnLmhvcml6b250YWxFZGdlJykucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICRkcmFnWm9uZS5yZW1vdmVBdHRyKCdjb2xzcGFuJylcclxuICAgICAgICAgIC5maW5kKCcuYm90dG9tRWRnZScpLnJlbW92ZSgpXHJcbiAgICAgICAgICAuZW5kKCkuZW5kKCkuc2libGluZ3MoKS5yZW1vdmUoKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8vIGNyZWF0ZSBub2RlXHJcbiAgICBjcmVhdGVOb2RlOiBmdW5jdGlvbiAobm9kZURhdGEsIGxldmVsLCBvcHRzKSB7XHJcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgaWYgKCFub2RlRGF0YS5jaGlsZHJlbikgeyBub2RlRGF0YS5jaGlsZHJlbiA9IFtdOyB9XHJcbiAgICAgICQuZWFjaChub2RlRGF0YS5jaGlsZHJlbiwgZnVuY3Rpb24gKGluZGV4LCBjaGlsZCkge1xyXG4gICAgICAgIGNoaWxkLnBhcmVudElkID0gbm9kZURhdGEuaWQ7XHJcbiAgICAgIH0pO1xyXG4gICAgICB2YXIgZHRkID0gJC5EZWZlcnJlZCgpO1xyXG4gICAgICAvLyBjb25zdHJ1Y3QgdGhlIGNvbnRlbnQgb2Ygbm9kZVxyXG4gICAgICB2YXIgJG5vZGVEaXYgPSAkKCc8ZGl2JyArIChvcHRzLmRyYWdnYWJsZSA/ICcgZHJhZ2dhYmxlPVwidHJ1ZVwiJyA6ICcnKSArIChub2RlRGF0YVtvcHRzLm5vZGVJZF0gPyAnIGlkPVwiJyArIG5vZGVEYXRhW29wdHMubm9kZUlkXSArICdcIicgOiAnJykgKyAobm9kZURhdGEucGFyZW50SWQgPyAnIGRhdGEtcGFyZW50PVwiJyArIG5vZGVEYXRhLnBhcmVudElkICsgJ1wiJyA6ICcnKSArICc+JylcclxuICAgICAgICAuYWRkQ2xhc3MoJ25vZGUgJyArIChub2RlRGF0YS5jbGFzc05hbWUgfHwgJycpICsgIChsZXZlbCA+PSBvcHRzLmRlcHRoID8gJyBzbGlkZS11cCcgOiAnJykpO1xyXG4gICAgICBpZiAob3B0cy5ub2RlVGVtcGxhdGUpIHtcclxuICAgICAgICAkbm9kZURpdi5hcHBlbmQob3B0cy5ub2RlVGVtcGxhdGUobm9kZURhdGEpKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB2YXIgaXNTZXROb2RlQ29udGVudCA9IHR5cGVvZiBvcHRzLm5vZGVDb250ZW50ICE9PSAndW5kZWZpbmVkJztcclxuICAgICAgICAkbm9kZURpdi5hZGRDbGFzcyhpc1NldE5vZGVDb250ZW50ID8gJ3dpdGhDb250ZW50JzogJycpXHJcbiAgICAgICAgICAuYXBwZW5kKCc8ZGl2IGNsYXNzPVwidGl0bGUgJyArIChpc1NldE5vZGVDb250ZW50ID8gJ3dpdGhDb250ZW50JzogJycpICsgJ1wiPicgKyBub2RlRGF0YVtvcHRzLm5vZGVUaXRsZV0gKyAnPC9kaXY+JylcclxuICAgICAgICAgIC5hcHBlbmQoaXNTZXROb2RlQ29udGVudCA/ICc8ZGl2IGNsYXNzPVwiY29udGVudFwiPicgKyAobm9kZURhdGFbb3B0cy5ub2RlQ29udGVudF0gfHwgJycpICsgJzwvZGl2PicgOiAnJyk7XHJcbiAgICAgIH1cclxuICAgICAgLy8gYXBwZW5kIDQgZGlyZWN0aW9uIGFycm93cyBvciBleHBhbmQvY29sbGFwc2UgYnV0dG9uc1xyXG4gICAgICB2YXIgZmxhZ3MgPSBub2RlRGF0YS5yZWxhdGlvbnNoaXAgfHwgJyc7XHJcbiAgICAgIGlmIChvcHRzLnZlcnRpY2FsRGVwdGggJiYgKGxldmVsICsgMikgPiBvcHRzLnZlcnRpY2FsRGVwdGgpIHtcclxuICAgICAgICBpZiAoKGxldmVsICsgMSkgPj0gb3B0cy52ZXJ0aWNhbERlcHRoICYmIE51bWJlcihmbGFncy5zdWJzdHIoMiwxKSkpIHtcclxuICAgICAgICAgIHZhciBpY29uID0gbGV2ZWwgKyAxICA+PSBvcHRzLmRlcHRoID8gJ3BsdXMnIDogJ21pbnVzJztcclxuICAgICAgICAgICRub2RlRGl2LmFwcGVuZCgnPGkgY2xhc3M9XCJ0b2dnbGVCdG4gZmEgZmEtJyArIGljb24gKyAnLXNxdWFyZVwiPjwvaT4nKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKE51bWJlcihmbGFncy5zdWJzdHIoMCwxKSkpIHtcclxuICAgICAgICAgICRub2RlRGl2LmFwcGVuZCgnPGkgY2xhc3M9XCJlZGdlIHZlcnRpY2FsRWRnZSB0b3BFZGdlIGZhXCI+PC9pPicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihOdW1iZXIoZmxhZ3Muc3Vic3RyKDEsMSkpKSB7XHJcbiAgICAgICAgICAkbm9kZURpdi5hcHBlbmQoJzxpIGNsYXNzPVwiZWRnZSBob3Jpem9udGFsRWRnZSByaWdodEVkZ2UgZmFcIj48L2k+JyArXHJcbiAgICAgICAgICAgICc8aSBjbGFzcz1cImVkZ2UgaG9yaXpvbnRhbEVkZ2UgbGVmdEVkZ2UgZmFcIj48L2k+Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKE51bWJlcihmbGFncy5zdWJzdHIoMiwxKSkpIHtcclxuICAgICAgICAgICRub2RlRGl2LmFwcGVuZCgnPGkgY2xhc3M9XCJlZGdlIHZlcnRpY2FsRWRnZSBib3R0b21FZGdlIGZhXCI+PC9pPicpXHJcbiAgICAgICAgICAgIC5jaGlsZHJlbignLnRpdGxlJykucHJlcGVuZCgnPGkgY2xhc3M9XCJmYSAnKyBvcHRzLnBhcmVudE5vZGVTeW1ib2wgKyAnIHN5bWJvbFwiPjwvaT4nKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgICRub2RlRGl2Lm9uKCdtb3VzZWVudGVyIG1vdXNlbGVhdmUnLCB0aGlzLm5vZGVFbnRlckxlYXZlSGFuZGxlci5iaW5kKHRoaXMpKTtcclxuICAgICAgJG5vZGVEaXYub24oJ2NsaWNrJywgdGhpcy5ub2RlQ2xpY2tIYW5kbGVyLmJpbmQodGhpcykpO1xyXG4gICAgICAkbm9kZURpdi5vbignY2xpY2snLCAnLnRvcEVkZ2UnLCB7ICdub2RlRGF0YSc6IG5vZGVEYXRhIH0sIHRoaXMudG9wRWRnZUNsaWNrSGFuZGxlci5iaW5kKHRoaXMpKTtcclxuICAgICAgJG5vZGVEaXYub24oJ2NsaWNrJywgJy5ib3R0b21FZGdlJywgeyAnbm9kZURhdGEnOiBub2RlRGF0YSB9LCB0aGlzLmJvdHRvbUVkZ2VDbGlja0hhbmRsZXIuYmluZCh0aGlzKSk7XHJcbiAgICAgICRub2RlRGl2Lm9uKCdjbGljaycsICcubGVmdEVkZ2UsIC5yaWdodEVkZ2UnLCB7ICdub2RlRGF0YSc6IG5vZGVEYXRhIH0sIHRoaXMuaEVkZ2VDbGlja0hhbmRsZXIuYmluZCh0aGlzKSk7XHJcbiAgICAgICRub2RlRGl2Lm9uKCdjbGljaycsICcudG9nZ2xlQnRuJywgdGhpcy50b2dnbGVWTm9kZXMuYmluZCh0aGlzKSk7XHJcblxyXG4gICAgICBpZiAob3B0cy5kcmFnZ2FibGUpIHtcclxuICAgICAgICAkbm9kZURpdi5vbignZHJhZ3N0YXJ0JywgdGhpcy5kcmFnc3RhcnRIYW5kbGVyLmJpbmQodGhpcykpXHJcbiAgICAgICAgLm9uKCdkcmFnb3ZlcicsIHRoaXMuZHJhZ292ZXJIYW5kbGVyLmJpbmQodGhpcykpXHJcbiAgICAgICAgLm9uKCdkcmFnZW5kJywgdGhpcy5kcmFnZW5kSGFuZGxlci5iaW5kKHRoaXMpKVxyXG4gICAgICAgIC5vbignZHJvcCcsIHRoaXMuZHJvcEhhbmRsZXIuYmluZCh0aGlzKSk7XHJcbiAgICAgIH1cclxuICAgICAgLy8gYWxsb3cgdXNlciB0byBhcHBlbmQgZG9tIG1vZGlmaWNhdGlvbiBhZnRlciBmaW5pc2hpbmcgbm9kZSBjcmVhdGUgb2Ygb3JnY2hhcnRcclxuICAgICAgaWYgKG9wdHMuY3JlYXRlTm9kZSkge1xyXG4gICAgICAgIG9wdHMuY3JlYXRlTm9kZSgkbm9kZURpdiwgbm9kZURhdGEpO1xyXG4gICAgICB9XHJcbiAgICAgIGR0ZC5yZXNvbHZlKCRub2RlRGl2KTtcclxuICAgICAgcmV0dXJuIGR0ZC5wcm9taXNlKCk7XHJcbiAgICB9LFxyXG4gICAgLy8gcmVjdXJzaXZlbHkgYnVpbGQgdGhlIHRyZWVcclxuICAgIGJ1aWxkSGllcmFyY2h5OiBmdW5jdGlvbiAoJGFwcGVuZFRvLCBub2RlRGF0YSwgbGV2ZWwsIG9wdHMsIGNhbGxiYWNrKSB7XHJcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgdmFyICRub2RlV3JhcHBlcjtcclxuICAgICAgLy8gQ29uc3RydWN0IHRoZSBub2RlXHJcbiAgICAgIHZhciAkY2hpbGROb2RlcyA9IG5vZGVEYXRhLmNoaWxkcmVuO1xyXG4gICAgICB2YXIgaGFzQ2hpbGRyZW4gPSAkY2hpbGROb2RlcyA/ICRjaGlsZE5vZGVzLmxlbmd0aCA6IGZhbHNlO1xyXG4gICAgICB2YXIgaXNWZXJ0aWNhbE5vZGUgPSAob3B0cy52ZXJ0aWNhbERlcHRoICYmIChsZXZlbCArIDEpID49IG9wdHMudmVydGljYWxEZXB0aCkgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgIGlmIChPYmplY3Qua2V5cyhub2RlRGF0YSkubGVuZ3RoID4gMSkgeyAvLyBpZiBub2RlRGF0YSBoYXMgbmVzdGVkIHN0cnVjdHVyZVxyXG4gICAgICAgICRub2RlV3JhcHBlciA9IGlzVmVydGljYWxOb2RlID8gJGFwcGVuZFRvIDogJCgnPHRhYmxlPicpO1xyXG4gICAgICAgIGlmICghaXNWZXJ0aWNhbE5vZGUpIHtcclxuICAgICAgICAgICRhcHBlbmRUby5hcHBlbmQoJG5vZGVXcmFwcGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJC53aGVuKHRoaXMuY3JlYXRlTm9kZShub2RlRGF0YSwgbGV2ZWwsIG9wdHMpKVxyXG4gICAgICAgIC5kb25lKGZ1bmN0aW9uKCRub2RlRGl2KSB7XHJcbiAgICAgICAgICBpZiAoaXNWZXJ0aWNhbE5vZGUpIHtcclxuICAgICAgICAgICAgJG5vZGVXcmFwcGVyLmFwcGVuZCgkbm9kZURpdik7XHJcbiAgICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICRub2RlV3JhcHBlci5hcHBlbmQoJCgnPHRyLz4nKS5hcHBlbmQoJCgnPHRkJyArIChoYXNDaGlsZHJlbiA/ICcgY29sc3Bhbj1cIicgKyAkY2hpbGROb2Rlcy5sZW5ndGggKiAyICsgJ1wiJyA6ICcnKSArICc+PC90ZD4nKS5hcHBlbmQoJG5vZGVEaXYpKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgY2FsbGJhY2soKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC5mYWlsKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ0ZhaWxlZCB0byBjcmVhdCBub2RlJylcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICAvLyBDb25zdHJ1Y3QgdGhlIGluZmVyaW9yIG5vZGVzIGFuZCBjb25uZWN0aW9uZyBsaW5lc1xyXG4gICAgICBpZiAoaGFzQ2hpbGRyZW4pIHtcclxuICAgICAgICBpZiAoT2JqZWN0LmtleXMobm9kZURhdGEpLmxlbmd0aCA9PT0gMSkgeyAvLyBpZiBub2RlRGF0YSBpcyBqdXN0IGFuIGFycmF5XHJcbiAgICAgICAgICAkbm9kZVdyYXBwZXIgPSAkYXBwZW5kVG87XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBpc0hpZGRlbiA9IChsZXZlbCArIDEgPj0gb3B0cy5kZXB0aCB8fCBub2RlRGF0YS5jb2xsYXBzZWQpID8gJyBoaWRkZW4nIDogJyc7XHJcbiAgICAgICAgdmFyIGlzVmVydGljYWxMYXllciA9IChvcHRzLnZlcnRpY2FsRGVwdGggJiYgKGxldmVsICsgMikgPj0gb3B0cy52ZXJ0aWNhbERlcHRoKSA/IHRydWUgOiBmYWxzZTtcclxuXHJcbiAgICAgICAgLy8gZHJhdyB0aGUgbGluZSBjbG9zZSB0byBwYXJlbnQgbm9kZVxyXG4gICAgICAgIGlmICghaXNWZXJ0aWNhbExheWVyKSB7XHJcbiAgICAgICAgICAkbm9kZVdyYXBwZXIuYXBwZW5kKCc8dHIgY2xhc3M9XCJsaW5lcycgKyBpc0hpZGRlbiArICdcIj48dGQgY29sc3Bhbj1cIicgKyAkY2hpbGROb2Rlcy5sZW5ndGggKiAyICsgJ1wiPjxkaXYgY2xhc3M9XCJkb3duTGluZVwiPjwvZGl2PjwvdGQ+PC90cj4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gZHJhdyB0aGUgbGluZXMgY2xvc2UgdG8gY2hpbGRyZW4gbm9kZXNcclxuICAgICAgICB2YXIgbGluZUxheWVyID0gJzx0ciBjbGFzcz1cImxpbmVzJyArIGlzSGlkZGVuICsgJ1wiPjx0ZCBjbGFzcz1cInJpZ2h0TGluZVwiPjwvdGQ+JztcclxuICAgICAgICBmb3IgKHZhciBpPTE7IGk8JGNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGxpbmVMYXllciArPSAnPHRkIGNsYXNzPVwibGVmdExpbmUgdG9wTGluZVwiPjwvdGQ+PHRkIGNsYXNzPVwicmlnaHRMaW5lIHRvcExpbmVcIj48L3RkPic7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxpbmVMYXllciArPSAnPHRkIGNsYXNzPVwibGVmdExpbmVcIj48L3RkPjwvdHI+JztcclxuICAgICAgICB2YXIgJG5vZGVMYXllcjtcclxuICAgICAgICBpZiAoaXNWZXJ0aWNhbExheWVyKSB7XHJcbiAgICAgICAgICAkbm9kZUxheWVyID0gJCgnPHVsPicpO1xyXG4gICAgICAgICAgaWYgKGlzSGlkZGVuICYmIG9wdHMuZGVwdGggKyAxICE9PSBvcHRzLnZlcnRpY2FsRGVwdGgpIHtcclxuICAgICAgICAgICAgJG5vZGVMYXllci5hZGRDbGFzcyhpc0hpZGRlbik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAobGV2ZWwgKyAyID09PSBvcHRzLnZlcnRpY2FsRGVwdGgpIHtcclxuICAgICAgICAgICAgJG5vZGVXcmFwcGVyLmFwcGVuZCgnPHRyIGNsYXNzPVwidmVydGljYWxOb2RlcycgKyBpc0hpZGRlbiArICdcIj48dGQ+PC90ZD48L3RyPicpXHJcbiAgICAgICAgICAgICAgLmZpbmQoJy52ZXJ0aWNhbE5vZGVzJykuY2hpbGRyZW4oKS5hcHBlbmQoJG5vZGVMYXllcik7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkbm9kZVdyYXBwZXIuYXBwZW5kKCRub2RlTGF5ZXIpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAkbm9kZUxheWVyID0gJCgnPHRyIGNsYXNzPVwibm9kZXMnICsgaXNIaWRkZW4gKyAnXCI+Jyk7XHJcbiAgICAgICAgICAkbm9kZVdyYXBwZXIuYXBwZW5kKGxpbmVMYXllcikuYXBwZW5kKCRub2RlTGF5ZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyByZWN1cnNlIHRocm91Z2ggY2hpbGRyZW4gbm9kZXNcclxuICAgICAgICAkLmVhY2goJGNoaWxkTm9kZXMsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdmFyICRub2RlQ2VsbCA9IGlzVmVydGljYWxMYXllciA/ICQoJzxsaT4nKSA6ICQoJzx0ZCBjb2xzcGFuPVwiMlwiPicpO1xyXG4gICAgICAgICAgJG5vZGVMYXllci5hcHBlbmQoJG5vZGVDZWxsKTtcclxuICAgICAgICAgIHRoYXQuYnVpbGRIaWVyYXJjaHkoJG5vZGVDZWxsLCB0aGlzLCBsZXZlbCArIDEsIG9wdHMsIGNhbGxiYWNrKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8vIGJ1aWxkIHRoZSBjaGlsZCBub2RlcyBvZiBzcGVjaWZpYyBub2RlXHJcbiAgICBidWlsZENoaWxkTm9kZTogZnVuY3Rpb24gKCRhcHBlbmRUbywgbm9kZURhdGEsIG9wdHMsIGNhbGxiYWNrKSB7XHJcbiAgICAgIHZhciBvcHRzID0gb3B0cyB8fCAkYXBwZW5kVG8uY2xvc2VzdCgnLm9yZ2NoYXJ0JykuZGF0YSgnb3B0aW9ucycpO1xyXG4gICAgICB2YXIgZGF0YSA9IG5vZGVEYXRhLmNoaWxkcmVuIHx8IG5vZGVEYXRhLnNpYmxpbmdzO1xyXG4gICAgICAkYXBwZW5kVG8uZmluZCgndGQ6Zmlyc3QnKS5hdHRyKCdjb2xzcGFuJywgZGF0YS5sZW5ndGggKiAyKTtcclxuICAgICAgdGhpcy5idWlsZEhpZXJhcmNoeSgkYXBwZW5kVG8sIHsgJ2NoaWxkcmVuJzogZGF0YSB9LCAwLCBvcHRzLCBjYWxsYmFjayk7XHJcbiAgICB9LFxyXG4gICAgLy8gZXhwb3NlZCBtZXRob2RcclxuICAgIGFkZENoaWxkcmVuOiBmdW5jdGlvbiAoJG5vZGUsIGRhdGEsIG9wdHMpIHtcclxuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICB2YXIgb3B0cyA9IG9wdHMgfHwgJG5vZGUuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuZGF0YSgnb3B0aW9ucycpO1xyXG4gICAgICB2YXIgY291bnQgPSAwO1xyXG4gICAgICB0aGlzLmJ1aWxkQ2hpbGROb2RlKCRub2RlLmNsb3Nlc3QoJ3RhYmxlJyksIGRhdGEsIG9wdHMsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmICgrK2NvdW50ID09PSBkYXRhLmNoaWxkcmVuLmxlbmd0aCkge1xyXG4gICAgICAgICAgaWYgKCEkbm9kZS5jaGlsZHJlbignLmJvdHRvbUVkZ2UnKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgJG5vZGUuYXBwZW5kKCc8aSBjbGFzcz1cImVkZ2UgdmVydGljYWxFZGdlIGJvdHRvbUVkZ2UgZmFcIj48L2k+Jyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAoISRub2RlLmZpbmQoJy5zeW1ib2wnKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgJG5vZGUuY2hpbGRyZW4oJy50aXRsZScpLnByZXBlbmQoJzxpIGNsYXNzPVwiZmEgJysgb3B0cy5wYXJlbnROb2RlU3ltYm9sICsgJyBzeW1ib2xcIj48L2k+Jyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aGF0LnNob3dDaGlsZHJlbigkbm9kZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0sXHJcbiAgICAvLyBidWlsZCB0aGUgcGFyZW50IG5vZGUgb2Ygc3BlY2lmaWMgbm9kZVxyXG4gICAgYnVpbGRQYXJlbnROb2RlOiBmdW5jdGlvbiAoJGN1cnJlbnRSb290LCBub2RlRGF0YSwgb3B0cywgY2FsbGJhY2spIHtcclxuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICB2YXIgJHRhYmxlID0gJCgnPHRhYmxlPicpO1xyXG4gICAgICBub2RlRGF0YS5yZWxhdGlvbnNoaXAgPSBub2RlRGF0YS5yZWxhdGlvbnNoaXAgfHwgJzAwMSc7XHJcbiAgICAgICQud2hlbih0aGlzLmNyZWF0ZU5vZGUobm9kZURhdGEsIDAsIG9wdHMgfHwgJGN1cnJlbnRSb290LmNsb3Nlc3QoJy5vcmdjaGFydCcpLmRhdGEoJ29wdGlvbnMnKSkpXHJcbiAgICAgICAgLmRvbmUoZnVuY3Rpb24oJG5vZGVEaXYpIHtcclxuICAgICAgICAgICR0YWJsZS5hcHBlbmQoJCgnPHRyIGNsYXNzPVwiaGlkZGVuXCI+JykuYXBwZW5kKCQoJzx0ZCBjb2xzcGFuPVwiMlwiPicpLmFwcGVuZCgkbm9kZURpdi5yZW1vdmVDbGFzcygnc2xpZGUtdXAnKS5hZGRDbGFzcygnc2xpZGUtZG93bicpKSkpO1xyXG4gICAgICAgICAgJHRhYmxlLmFwcGVuZCgnPHRyIGNsYXNzPVwibGluZXMgaGlkZGVuXCI+PHRkIGNvbHNwYW49XCIyXCI+PGRpdiBjbGFzcz1cImRvd25MaW5lXCI+PC9kaXY+PC90ZD48L3RyPicpO1xyXG4gICAgICAgICAgdmFyIGxpbmVzUm93ID0gJzx0ZCBjbGFzcz1cInJpZ2h0TGluZVwiPjwvdGQ+PHRkIGNsYXNzPVwibGVmdExpbmVcIj48L3RkPic7XHJcbiAgICAgICAgICAkdGFibGUuYXBwZW5kKCc8dHIgY2xhc3M9XCJsaW5lcyBoaWRkZW5cIj4nICsgbGluZXNSb3cgKyAnPC90cj4nKTtcclxuICAgICAgICAgIHZhciAkY2hhcnQgPSB0aGF0LiRjaGFydDtcclxuICAgICAgICAgICRjaGFydC5wcmVwZW5kKCR0YWJsZSlcclxuICAgICAgICAgICAgLmNoaWxkcmVuKCd0YWJsZTpmaXJzdCcpLmFwcGVuZCgnPHRyIGNsYXNzPVwibm9kZXNcIj48dGQgY29sc3Bhbj1cIjJcIj48L3RkPjwvdHI+JylcclxuICAgICAgICAgICAgLmNoaWxkcmVuKCd0cjpsYXN0JykuY2hpbGRyZW4oKS5hcHBlbmQoJGNoYXJ0LmNoaWxkcmVuKCd0YWJsZScpLmxhc3QoKSk7XHJcbiAgICAgICAgICBjYWxsYmFjaygpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmZhaWwoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnRmFpbGVkIHRvIGNyZWF0ZSBwYXJlbnQgbm9kZScpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIC8vIGV4cG9zZWQgbWV0aG9kXHJcbiAgICBhZGRQYXJlbnQ6IGZ1bmN0aW9uICgkY3VycmVudFJvb3QsIGRhdGEsIG9wdHMpIHtcclxuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICB0aGlzLmJ1aWxkUGFyZW50Tm9kZSgkY3VycmVudFJvb3QsIGRhdGEsIG9wdHMsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmICghJGN1cnJlbnRSb290LmNoaWxkcmVuKCcudG9wRWRnZScpLmxlbmd0aCkge1xyXG4gICAgICAgICAgJGN1cnJlbnRSb290LmNoaWxkcmVuKCcudGl0bGUnKS5hZnRlcignPGkgY2xhc3M9XCJlZGdlIHZlcnRpY2FsRWRnZSB0b3BFZGdlIGZhXCI+PC9pPicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGF0LnNob3dQYXJlbnQoJGN1cnJlbnRSb290KTtcclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgLy8gc3Vic2VxdWVudCBwcm9jZXNzaW5nIG9mIGJ1aWxkIHNpYmxpbmcgbm9kZXNcclxuICAgIGNvbXBsZW1lbnRMaW5lOiBmdW5jdGlvbiAoJG9uZVNpYmxpbmcsIHNpYmxpbmdDb3VudCwgZXhpc3RpbmdTaWJsaWdDb3VudCkge1xyXG4gICAgICB2YXIgbGluZXMgPSAnJztcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBleGlzdGluZ1NpYmxpZ0NvdW50OyBpKyspIHtcclxuICAgICAgICBsaW5lcyArPSAnPHRkIGNsYXNzPVwibGVmdExpbmUgdG9wTGluZVwiPjwvdGQ+PHRkIGNsYXNzPVwicmlnaHRMaW5lIHRvcExpbmVcIj48L3RkPic7XHJcbiAgICAgIH1cclxuICAgICAgJG9uZVNpYmxpbmcucGFyZW50KCkucHJldkFsbCgndHI6Z3QoMCknKS5jaGlsZHJlbigpLmF0dHIoJ2NvbHNwYW4nLCBzaWJsaW5nQ291bnQgKiAyKVxyXG4gICAgICAgIC5lbmQoKS5uZXh0KCkuY2hpbGRyZW4oJzpmaXJzdCcpLmFmdGVyKGxpbmVzKTtcclxuICAgIH0sXHJcbiAgICAvLyBidWlsZCB0aGUgc2libGluZyBub2RlcyBvZiBzcGVjaWZpYyBub2RlXHJcbiAgICBidWlsZFNpYmxpbmdOb2RlOiBmdW5jdGlvbiAoJG5vZGVDaGFydCwgbm9kZURhdGEsIG9wdHMsIGNhbGxiYWNrKSB7XHJcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgdmFyIG9wdHMgPSBvcHRzIHx8ICRub2RlQ2hhcnQuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuZGF0YSgnb3B0aW9ucycpO1xyXG4gICAgICB2YXIgbmV3U2libGluZ0NvdW50ID0gbm9kZURhdGEuc2libGluZ3MgPyBub2RlRGF0YS5zaWJsaW5ncy5sZW5ndGggOiBub2RlRGF0YS5jaGlsZHJlbi5sZW5ndGg7XHJcbiAgICAgIHZhciBleGlzdGluZ1NpYmxpZ0NvdW50ID0gJG5vZGVDaGFydC5wYXJlbnQoKS5pcygndGQnKSA/ICRub2RlQ2hhcnQuY2xvc2VzdCgndHInKS5jaGlsZHJlbigpLmxlbmd0aCA6IDE7XHJcbiAgICAgIHZhciBzaWJsaW5nQ291bnQgPSBleGlzdGluZ1NpYmxpZ0NvdW50ICsgbmV3U2libGluZ0NvdW50O1xyXG4gICAgICB2YXIgaW5zZXJ0UG9zdGlvbiA9IChzaWJsaW5nQ291bnQgPiAxKSA/IE1hdGguZmxvb3Ioc2libGluZ0NvdW50LzIgLSAxKSA6IDA7XHJcbiAgICAgIC8vIGp1c3QgYnVpbGQgdGhlIHNpYmxpbmcgbm9kZXMgZm9yIHRoZSBzcGVjaWZpYyBub2RlXHJcbiAgICAgIGlmICgkbm9kZUNoYXJ0LnBhcmVudCgpLmlzKCd0ZCcpKSB7XHJcbiAgICAgICAgdmFyICRwYXJlbnQgPSAkbm9kZUNoYXJ0LmNsb3Nlc3QoJ3RyJykucHJldkFsbCgndHI6bGFzdCcpO1xyXG4gICAgICAgICRub2RlQ2hhcnQuY2xvc2VzdCgndHInKS5wcmV2QWxsKCd0cjpsdCgyKScpLnJlbW92ZSgpO1xyXG4gICAgICAgIHZhciBjaGlsZENvdW50ID0gMDtcclxuICAgICAgICB0aGlzLmJ1aWxkQ2hpbGROb2RlKCRub2RlQ2hhcnQucGFyZW50KCkuY2xvc2VzdCgndGFibGUnKSwgbm9kZURhdGEsIG9wdHMsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgaWYgKCsrY2hpbGRDb3VudCA9PT0gbmV3U2libGluZ0NvdW50KSB7XHJcbiAgICAgICAgICAgIHZhciAkc2libGluZ1RkcyA9ICRub2RlQ2hhcnQucGFyZW50KCkuY2xvc2VzdCgndGFibGUnKS5jaGlsZHJlbigndHI6bGFzdCcpLmNoaWxkcmVuKCd0ZCcpO1xyXG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdTaWJsaWdDb3VudCA+IDEpIHtcclxuICAgICAgICAgICAgICB0aGF0LmNvbXBsZW1lbnRMaW5lKCRzaWJsaW5nVGRzLmVxKDApLmJlZm9yZSgkbm9kZUNoYXJ0LmNsb3Nlc3QoJ3RkJykuc2libGluZ3MoKS5hZGRCYWNrKCkudW53cmFwKCkpLCBzaWJsaW5nQ291bnQsIGV4aXN0aW5nU2libGlnQ291bnQpO1xyXG4gICAgICAgICAgICAgICRzaWJsaW5nVGRzLmFkZENsYXNzKCdoaWRkZW4nKS5maW5kKCcubm9kZScpLmFkZENsYXNzKCdzbGlkZS1sZWZ0Jyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgdGhhdC5jb21wbGVtZW50TGluZSgkc2libGluZ1Rkcy5lcShpbnNlcnRQb3N0aW9uKS5hZnRlcigkbm9kZUNoYXJ0LmNsb3Nlc3QoJ3RkJykudW53cmFwKCkpLCBzaWJsaW5nQ291bnQsIDEpO1xyXG4gICAgICAgICAgICAgICRzaWJsaW5nVGRzLm5vdCgnOmVxKCcgKyBpbnNlcnRQb3N0aW9uICsgMSArICcpJykuYWRkQ2xhc3MoJ2hpZGRlbicpXHJcbiAgICAgICAgICAgICAgICAuc2xpY2UoMCwgaW5zZXJ0UG9zdGlvbikuZmluZCgnLm5vZGUnKS5hZGRDbGFzcygnc2xpZGUtcmlnaHQnKVxyXG4gICAgICAgICAgICAgICAgLmVuZCgpLmVuZCgpLnNsaWNlKGluc2VydFBvc3Rpb24pLmZpbmQoJy5ub2RlJykuYWRkQ2xhc3MoJ3NsaWRlLWxlZnQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYWxsYmFjaygpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2UgeyAvLyBidWlsZCB0aGUgc2libGluZyBub2RlcyBhbmQgcGFyZW50IG5vZGUgZm9yIHRoZSBzcGVjaWZpYyBuZG9lXHJcbiAgICAgICAgdmFyIG5vZGVDb3VudCA9IDA7XHJcbiAgICAgICAgdGhpcy5idWlsZEhpZXJhcmNoeSgkbm9kZUNoYXJ0LmNsb3Nlc3QoJy5vcmdjaGFydCcpLCBub2RlRGF0YSwgMCwgb3B0cywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZiAoKytub2RlQ291bnQgPT09IHNpYmxpbmdDb3VudCkge1xyXG4gICAgICAgICAgICB0aGF0LmNvbXBsZW1lbnRMaW5lKCRub2RlQ2hhcnQubmV4dCgpLmNoaWxkcmVuKCd0cjpsYXN0JylcclxuICAgICAgICAgICAgICAuY2hpbGRyZW4oKS5lcShpbnNlcnRQb3N0aW9uKS5hZnRlcigkKCc8dGQgY29sc3Bhbj1cIjJcIj4nKVxyXG4gICAgICAgICAgICAgIC5hcHBlbmQoJG5vZGVDaGFydCkpLCBzaWJsaW5nQ291bnQsIDEpO1xyXG4gICAgICAgICAgICAkbm9kZUNoYXJ0LmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoKS5lcSgwKS5hZGRDbGFzcygnaGlkZGVuJykuZmluZCgnLm5vZGUnKS5hZGRDbGFzcygnc2xpZGUtZG93bicpO1xyXG4gICAgICAgICAgICAkbm9kZUNoYXJ0LnBhcmVudCgpLnNpYmxpbmdzKCkuYWRkQ2xhc3MoJ2hpZGRlbicpXHJcbiAgICAgICAgICAgICAgLnNsaWNlKDAsIGluc2VydFBvc3Rpb24pLmZpbmQoJy5ub2RlJykuYWRkQ2xhc3MoJ3NsaWRlLXJpZ2h0JylcclxuICAgICAgICAgICAgICAuZW5kKCkuZW5kKCkuc2xpY2UoaW5zZXJ0UG9zdGlvbikuZmluZCgnLm5vZGUnKS5hZGRDbGFzcygnc2xpZGUtbGVmdCcpO1xyXG4gICAgICAgICAgICBjYWxsYmFjaygpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy9cclxuICAgIGFkZFNpYmxpbmdzOiBmdW5jdGlvbiAoJG5vZGUsIGRhdGEsIG9wdHMpIHtcclxuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICB0aGlzLmJ1aWxkU2libGluZ05vZGUoJG5vZGUuY2xvc2VzdCgndGFibGUnKSwgZGF0YSwgb3B0cywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJG5vZGUuY2xvc2VzdCgnLm5vZGVzJykuZGF0YSgnc2libGluZ3NMb2FkZWQnLCB0cnVlKTtcclxuICAgICAgICBpZiAoISRub2RlLmNoaWxkcmVuKCcubGVmdEVkZ2UnKS5sZW5ndGgpIHtcclxuICAgICAgICAgICRub2RlLmNoaWxkcmVuKCcudG9wRWRnZScpLmFmdGVyKCc8aSBjbGFzcz1cImVkZ2UgaG9yaXpvbnRhbEVkZ2UgcmlnaHRFZGdlIGZhXCI+PC9pPjxpIGNsYXNzPVwiZWRnZSBob3Jpem9udGFsRWRnZSBsZWZ0RWRnZSBmYVwiPjwvaT4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhhdC5zaG93U2libGluZ3MoJG5vZGUpO1xyXG4gICAgICB9KTtcclxuICAgIH0sXHJcbiAgICAvL1xyXG4gICAgcmVtb3ZlTm9kZXM6IGZ1bmN0aW9uICgkbm9kZSkge1xyXG4gICAgICB2YXIgJHBhcmVudCA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCk7XHJcbiAgICAgIHZhciAkc2licyA9ICRwYXJlbnQucGFyZW50KCkuc2libGluZ3MoKTtcclxuICAgICAgaWYgKCRwYXJlbnQuaXMoJ3RkJykpIHtcclxuICAgICAgICBpZiAodGhpcy5nZXROb2RlU3RhdGUoJG5vZGUsICdzaWJsaW5ncycpLmV4aXN0KSB7XHJcbiAgICAgICAgICAkc2licy5lcSgyKS5jaGlsZHJlbignLnRvcExpbmU6bHQoMiknKS5yZW1vdmUoKTtcclxuICAgICAgICAgICRzaWJzLnNsaWNlKDAsIDIpLmNoaWxkcmVuKCkuYXR0cignY29sc3BhbicsICRzaWJzLmVxKDIpLmNoaWxkcmVuKCkubGVuZ3RoKTtcclxuICAgICAgICAgICRwYXJlbnQucmVtb3ZlKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICRzaWJzLmVxKDApLmNoaWxkcmVuKCkucmVtb3ZlQXR0cignY29sc3BhbicpXHJcbiAgICAgICAgICAgIC5maW5kKCcuYm90dG9tRWRnZScpLnJlbW92ZSgpXHJcbiAgICAgICAgICAgIC5lbmQoKS5lbmQoKS5zaWJsaW5ncygpLnJlbW92ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAkcGFyZW50LmFkZCgkcGFyZW50LnNpYmxpbmdzKCkpLnJlbW92ZSgpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy9cclxuICAgIGV4cG9ydDogZnVuY3Rpb24gKGV4cG9ydEZpbGVuYW1lLCBleHBvcnRGaWxlZXh0ZW5zaW9uKSB7XHJcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgZXhwb3J0RmlsZW5hbWUgPSAodHlwZW9mIGV4cG9ydEZpbGVuYW1lICE9PSAndW5kZWZpbmVkJykgPyAgZXhwb3J0RmlsZW5hbWUgOiB0aGlzLm9wdGlvbnMuZXhwb3J0RmlsZW5hbWU7XHJcbiAgICAgIGV4cG9ydEZpbGVleHRlbnNpb24gPSAodHlwZW9mIGV4cG9ydEZpbGVleHRlbnNpb24gIT09ICd1bmRlZmluZWQnKSA/ICBleHBvcnRGaWxlZXh0ZW5zaW9uIDogdGhpcy5vcHRpb25zLmV4cG9ydEZpbGVleHRlbnNpb247XHJcbiAgICAgIGlmICgkKHRoaXMpLmNoaWxkcmVuKCcuc3Bpbm5lcicpLmxlbmd0aCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICB2YXIgJGNoYXJ0Q29udGFpbmVyID0gdGhpcy4kY2hhcnRDb250YWluZXI7XHJcbiAgICAgIHZhciAkbWFzayA9ICRjaGFydENvbnRhaW5lci5maW5kKCcubWFzaycpO1xyXG4gICAgICBpZiAoISRtYXNrLmxlbmd0aCkge1xyXG4gICAgICAgICRjaGFydENvbnRhaW5lci5hcHBlbmQoJzxkaXYgY2xhc3M9XCJtYXNrXCI+PGkgY2xhc3M9XCJmYSBmYS1jaXJjbGUtby1ub3RjaCBmYS1zcGluIHNwaW5uZXJcIj48L2k+PC9kaXY+Jyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJG1hc2sucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xyXG4gICAgICB9XHJcbiAgICAgIHZhciBzb3VyY2VDaGFydCA9ICRjaGFydENvbnRhaW5lci5hZGRDbGFzcygnY2FudmFzQ29udGFpbmVyJykuZmluZCgnLm9yZ2NoYXJ0Om5vdChcIi5oaWRkZW5cIiknKS5nZXQoMCk7XHJcbiAgICAgIHZhciBmbGFnID0gdGhhdC5vcHRpb25zLmRpcmVjdGlvbiA9PT0gJ2wycicgfHwgdGhhdC5vcHRpb25zLmRpcmVjdGlvbiA9PT0gJ3IybCc7XHJcbiAgICAgIGh0bWwyY2FudmFzKHNvdXJjZUNoYXJ0LCB7XHJcbiAgICAgICAgJ3dpZHRoJzogZmxhZyA/IHNvdXJjZUNoYXJ0LmNsaWVudEhlaWdodCA6IHNvdXJjZUNoYXJ0LmNsaWVudFdpZHRoLFxyXG4gICAgICAgICdoZWlnaHQnOiBmbGFnID8gc291cmNlQ2hhcnQuY2xpZW50V2lkdGggOiBzb3VyY2VDaGFydC5jbGllbnRIZWlnaHQsXHJcbiAgICAgICAgJ29uY2xvbmUnOiBmdW5jdGlvbiAoY2xvbmVEb2MpIHtcclxuICAgICAgICAgICQoY2xvbmVEb2MpLmZpbmQoJy5jYW52YXNDb250YWluZXInKS5jc3MoJ292ZXJmbG93JywgJ3Zpc2libGUnKVxyXG4gICAgICAgICAgICAuZmluZCgnLm9yZ2NoYXJ0Om5vdChcIi5oaWRkZW5cIik6Zmlyc3QnKS5jc3MoJ3RyYW5zZm9ybScsICcnKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgICdvbnJlbmRlcmVkJzogZnVuY3Rpb24gKGNhbnZhcykge1xyXG4gICAgICAgICAgJGNoYXJ0Q29udGFpbmVyLmZpbmQoJy5tYXNrJykuYWRkQ2xhc3MoJ2hpZGRlbicpO1xyXG4gICAgICAgICAgaWYgKGV4cG9ydEZpbGVleHRlbnNpb24udG9Mb3dlckNhc2UoKSA9PT0gJ3BkZicpIHtcclxuICAgICAgICAgICAgdmFyIGRvYyA9IHt9O1xyXG4gICAgICAgICAgICB2YXIgZG9jV2lkdGggPSBNYXRoLmZsb29yKGNhbnZhcy53aWR0aCAqIDAuMjY0Nik7XHJcbiAgICAgICAgICAgIHZhciBkb2NIZWlnaHQgPSBNYXRoLmZsb29yKGNhbnZhcy5oZWlnaHQgKiAwLjI2NDYpO1xyXG4gICAgICAgICAgICBpZiAoZG9jV2lkdGggPiBkb2NIZWlnaHQpIHtcclxuICAgICAgICAgICAgICBkb2MgPSBuZXcganNQREYoJ2wnLCAnbW0nLCBbZG9jV2lkdGgsIGRvY0hlaWdodF0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGRvYyA9IG5ldyBqc1BERigncCcsICdtbScsIFtkb2NIZWlnaHQsIGRvY1dpZHRoXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZG9jLmFkZEltYWdlKGNhbnZhcy50b0RhdGFVUkwoKSwgJ3BuZycsIDAsIDApO1xyXG4gICAgICAgICAgICBkb2Muc2F2ZShleHBvcnRGaWxlbmFtZSArICcucGRmJyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgaXNXZWJraXQgPSAnV2Via2l0QXBwZWFyYW5jZScgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlO1xyXG4gICAgICAgICAgICB2YXIgaXNGZiA9ICEhd2luZG93LnNpZGViYXI7XHJcbiAgICAgICAgICAgIHZhciBpc0VkZ2UgPSBuYXZpZ2F0b3IuYXBwTmFtZSA9PT0gJ01pY3Jvc29mdCBJbnRlcm5ldCBFeHBsb3JlcicgfHwgKG5hdmlnYXRvci5hcHBOYW1lID09PSBcIk5ldHNjYXBlXCIgJiYgbmF2aWdhdG9yLmFwcFZlcnNpb24uaW5kZXhPZignRWRnZScpID4gLTEpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCghaXNXZWJraXQgJiYgIWlzRmYpIHx8IGlzRWRnZSkge1xyXG4gICAgICAgICAgICAgIHdpbmRvdy5uYXZpZ2F0b3IubXNTYXZlQmxvYihjYW52YXMubXNUb0Jsb2IoKSwgZXhwb3J0RmlsZW5hbWUgKyAnLnBuZycpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHZhciBzZWxlY3RvciA9ICcub2MtZG93bmxvYWQtYnRuJyArICh0aGF0Lm9wdGlvbnMuY2hhcnRDbGFzcyAhPT0gJycgPyAnLicgKyB0aGF0Lm9wdGlvbnMuY2hhcnRDbGFzcyA6ICcnKTtcclxuICAgICAgICAgICAgICBpZiAoISRjaGFydENvbnRhaW5lci5maW5kKHNlbGVjdG9yKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICRjaGFydENvbnRhaW5lci5hcHBlbmQoJzxhIGNsYXNzPVwib2MtZG93bmxvYWQtYnRuJyArICh0aGF0Lm9wdGlvbnMuY2hhcnRDbGFzcyAhPT0gJycgPyAnICcgKyB0aGF0Lm9wdGlvbnMuY2hhcnRDbGFzcyA6ICcnKSArICdcIidcclxuICAgICAgICAgICAgICAgICAgKyAnIGRvd25sb2FkPVwiJyArIGV4cG9ydEZpbGVuYW1lICsgJy5wbmdcIj48L2E+Jyk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICRjaGFydENvbnRhaW5lci5maW5kKHNlbGVjdG9yKS5hdHRyKCdocmVmJywgY2FudmFzLnRvRGF0YVVSTCgpKVswXS5jbGljaygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICAudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJGNoYXJ0Q29udGFpbmVyLnJlbW92ZUNsYXNzKCdjYW52YXNDb250YWluZXInKTtcclxuICAgICAgfSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICRjaGFydENvbnRhaW5lci5yZW1vdmVDbGFzcygnY2FudmFzQ29udGFpbmVyJyk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gICQuZm4ub3JnY2hhcnQgPSBmdW5jdGlvbiAob3B0cykge1xyXG4gICAgcmV0dXJuIG5ldyBPcmdDaGFydCh0aGlzLCBvcHRzKS5pbml0KCk7XHJcbiAgfTtcclxuXHJcbn0pKTtcclxuIl19
