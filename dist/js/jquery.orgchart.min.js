"use strict";!function(e){"object"==typeof module&&"object"==typeof module.exports?e(require("jquery"),window,document):e(jQuery,window,document)}(function(e,t,i,n){var s=function(t,i){this.$chartContainer=e(t),this.opts=i,this.defaultOptions={nodeTitle:"name",nodeId:"id",toggleSiblingsResp:!1,depth:999,chartClass:"",exportButton:!1,exportFilename:"OrgChart",exportFileextension:"png",parentNodeSymbol:"fa-users",draggable:!1,direction:"t2b",pan:!1,zoom:!1,zoominLimit:7,zoomoutLimit:.5}};s.prototype={init:function(t){var i=this;this.options=e.extend({},this.defaultOptions,this.opts,t);var n=this.$chartContainer;this.$chart&&this.$chart.remove();var s=this.options.data,a=this.$chart=e("<div>",{data:{options:this.options},class:"orgchart"+(""!==this.options.chartClass?" "+this.options.chartClass:"")+("t2b"!==this.options.direction?" "+this.options.direction:""),click:function(t){e(t.target).closest(".node").length||a.find(".node.focused").removeClass("focused")}});return"undefined"!=typeof MutationObserver&&this.triggerInitEvent(),"object"===e.type(s)?s instanceof e?this.buildHierarchy(a,this.buildJsonDS(s.children()),0,this.options):this.buildHierarchy(a,this.options.ajaxURL?s:this.attachRel(s,"00"),0,this.options):(a.append('<i class="fa fa-circle-o-notch fa-spin spinner"></i>'),e.ajax({url:s,dataType:"json"}).done(function(e,t,n){i.buildHierarchy(a,i.options.ajaxURL?e:i.attachRel(e,"00"),0,i.options)}).fail(function(e,t,i){console.log(i)}).always(function(){a.children(".spinner").remove()})),n.append(a),this.options.exportButton&&!n.find(".oc-export-btn").length&&this.attachExportButton(),this.options.pan&&this.bindPan(),this.options.zoom&&this.bindZoom(),this},triggerInitEvent:function(){var t=this,i=new MutationObserver(function(n){i.disconnect();e:for(var s=0;s<n.length;s++)for(var a=0;a<n[s].addedNodes.length;a++)if(n[s].addedNodes[a].classList.contains("orgchart")&&t.options.initCompleted&&"function"==typeof t.options.initCompleted){t.options.initCompleted(t.$chart);var d=e.Event("init.orgchart");t.$chart.trigger(d);break e}});i.observe(this.$chartContainer[0],{childList:!0})},attachExportButton:function(){var t=this,i=e("<button>",{class:"oc-export-btn"+(""!==this.options.chartClass?" "+this.options.chartClass:""),text:"Export",click:function(e){e.preventDefault(),t.export()}});this.$chartContainer.append(i)},setOptions:function(e,t){return"string"==typeof e&&("pan"===e&&(t?this.bindPan():this.unbindPan()),"zoom"===e&&(t?this.bindZoom():this.unbindZoom())),"object"==typeof e&&(e.data?this.init(e):(void 0!==e.pan&&(e.pan?this.bindPan():this.unbindPan()),void 0!==e.zoom&&(e.zoom?this.bindZoom():this.unbindZoom()))),this},panStartHandler:function(t){var i=e(t.delegateTarget);if(e(t.target).closest(".node").length||t.touches&&t.touches.length>1)i.data("panning",!1);else{i.css("cursor","move").data("panning",!0);var n=0,s=0,a=i.css("transform");if("none"!==a){var d=a.split(",");-1===a.indexOf("3d")?(n=parseInt(d[4]),s=parseInt(d[5])):(n=parseInt(d[12]),s=parseInt(d[13]))}var o=0,r=0;if(t.targetTouches){if(1===t.targetTouches.length)o=t.targetTouches[0].pageX-n,r=t.targetTouches[0].pageY-s;else if(t.targetTouches.length>1)return}else o=t.pageX-n,r=t.pageY-s;i.on("mousemove touchmove",function(e){if(i.data("panning")){var t=0,n=0;if(e.targetTouches){if(1===e.targetTouches.length)t=e.targetTouches[0].pageX-o,n=e.targetTouches[0].pageY-r;else if(e.targetTouches.length>1)return}else t=e.pageX-o,n=e.pageY-r;var s=i.css("transform");if("none"===s)-1===s.indexOf("3d")?i.css("transform","matrix(1, 0, 0, 1, "+t+", "+n+")"):i.css("transform","matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+t+", "+n+", 0, 1)");else{var a=s.split(",");-1===s.indexOf("3d")?(a[4]=" "+t,a[5]=" "+n+")"):(a[12]=" "+t,a[13]=" "+n),i.css("transform",a.join(","))}}})}},panEndHandler:function(e){e.data.chart.data("panning")&&e.data.chart.data("panning",!1).css("cursor","default").off("mousemove")},bindPan:function(){this.$chartContainer.css("overflow","hidden"),this.$chart.on("mousedown touchstart",this.panStartHandler),e(i).on("mouseup touchend",{chart:this.$chart},this.panEndHandler)},unbindPan:function(){this.$chartContainer.css("overflow","auto"),this.$chart.off("mousedown touchstart",this.panStartHandler),e(i).off("mouseup touchend",this.panEndHandler)},zoomWheelHandler:function(e){var t=e.data.oc;e.preventDefault();var i=1+(e.originalEvent.deltaY>0?-.2:.2);t.setChartScale(t.$chart,i)},zoomStartHandler:function(e){if(e.touches&&2===e.touches.length){var t=e.data.oc;t.$chart.data("pinching",!0);var i=t.getPinchDist(e);t.$chart.data("pinchDistStart",i)}},zoomingHandler:function(e){var t=e.data.oc;if(t.$chart.data("pinching")){var i=t.getPinchDist(e);t.$chart.data("pinchDistEnd",i)}},zoomEndHandler:function(e){var t=e.data.oc;if(t.$chart.data("pinching")){t.$chart.data("pinching",!1);var i=t.$chart.data("pinchDistEnd")-t.$chart.data("pinchDistStart");i>0?t.setChartScale(t.$chart,1.2):i<0&&t.setChartScale(t.$chart,.8)}},bindZoom:function(){this.$chartContainer.on("wheel",{oc:this},this.zoomWheelHandler),this.$chartContainer.on("touchstart",{oc:this},this.zoomStartHandler),e(i).on("touchmove",{oc:this},this.zoomingHandler),e(i).on("touchend",{oc:this},this.zoomEndHandler)},unbindZoom:function(){this.$chartContainer.off("wheel",this.zoomWheelHandler),this.$chartContainer.off("touchstart",this.zoomStartHandler),e(i).off("touchmove",this.zoomingHandler),e(i).off("touchend",this.zoomEndHandler)},getPinchDist:function(e){return Math.sqrt((e.touches[0].clientX-e.touches[1].clientX)*(e.touches[0].clientX-e.touches[1].clientX)+(e.touches[0].clientY-e.touches[1].clientY)*(e.touches[0].clientY-e.touches[1].clientY))},setChartScale:function(e,i){var n=e.data("options"),s=e.css("transform"),a="",d=1;"none"===s?e.css("transform","scale("+i+","+i+")"):(a=s.split(","),-1===s.indexOf("3d")?(d=Math.abs(t.parseFloat(a[3])*i))>n.zoomoutLimit&&d<n.zoominLimit&&e.css("transform",s+" scale("+i+","+i+")"):(d=Math.abs(t.parseFloat(a[1])*i))>n.zoomoutLimit&&d<n.zoominLimit&&e.css("transform",s+" scale3d("+i+","+i+", 1)"))},buildJsonDS:function(t){var i=this,n={name:t.contents().eq(0).text().trim(),relationship:(t.parent().parent().is("li")?"1":"0")+(t.siblings("li").length?1:0)+(t.children("ul").length?1:0)};return t.attr("data-id")&&(n.id=t.attr("data-id")),t.children("ul").children().each(function(){n.children||(n.children=[]),n.children.push(i.buildJsonDS(e(this)))}),n},attachRel:function(e,t){var i=this;return e.relationship=t+(e.children&&e.children.length>0?1:0),e.children&&e.children.forEach(function(t){i.attachRel(t,"1"+(e.children.length>1?1:0))}),e},loopChart:function(t){var i=this,n=t.find("tr:first"),s={id:n.find(".node")[0].id};return n.siblings(":last").children().each(function(){s.children||(s.children=[]),s.children.push(i.loopChart(e(this)))}),s},getHierarchy:function(){if(void 0===this.$chart)return"Error: orgchart does not exist";if(!this.$chart.find(".node").length)return"Error: nodes do not exist";var e=!0;return this.$chart.find(".node").each(function(){if(!this.id)return e=!1,!1}),e?this.loopChart(this.$chart):"Error: All nodes of orghcart to be exported must have data-id attribute!"},getNodeState:function(e,t){var i={};if("parent"===(t=t||"self")){if((i=e.closest(".nodes").siblings(":first")).length)return i.is(".hidden")||!i.is(".hidden")&&i.closest(".nodes").is(".hidden")?{exist:!0,visible:!1}:{exist:!0,visible:!0}}else if("children"===t){if((i=e.closest("tr").siblings(":last")).length)return i.is(".hidden")?{exist:!0,visible:!1}:{exist:!0,visible:!0}}else if("siblings"===t){if((i=e.closest("table").parent().siblings()).length)return i.is(".hidden")||i.parent().is(".hidden")?{exist:!0,visible:!1}:{exist:!0,visible:!0}}else if((i=e).length)return i.closest(".nodes").length&&i.closest(".nodes").is(".hidden")||i.closest("table").parent().length&&i.closest("table").parent().is(".hidden")||i.parent().is("li")&&(i.closest("ul").is(".hidden")||i.closest("verticalNodes").is(".hidden"))?{exist:!0,visible:!1}:{exist:!0,visible:!0};return{exist:!1,visible:!1}},getRelatedNodes:function(t,i){return t&&t instanceof e&&t.is(".node")?"parent"===i?t.closest(".nodes").parent().children(":first").find(".node"):"children"===i?t.closest("tr").siblings(".nodes").children().find(".node:first"):"siblings"===i?t.closest("table").parent().siblings().find(".node:first"):e():e()},hideParentEnd:function(t){e(t.target).removeClass("sliding"),t.data.upperLevel.addClass("hidden").slice(1).removeAttr("style")},hideParent:function(e){var t=e.closest(".nodes").siblings();t.eq(0).find(".spinner").length&&e.closest(".orgchart").data("inAjax",!1),this.getNodeState(e,"siblings").visible&&this.hideSiblings(e);t.slice(1).css("visibility","hidden");var i=t.eq(0).find(".node");this.getNodeState(i).visible&&i.addClass("sliding slide-down").one("transitionend",{upperLevel:t},this.hideParentEnd),this.getNodeState(i,"parent").visible&&this.hideParent(i)},showParentEnd:function(t){var i=t.data.node;e(t.target).removeClass("sliding"),this.isInAction(i)&&this.switchVerticalArrow(i.children(".topEdge"))},showParent:function(e){var t=e.closest(".nodes").siblings().removeClass("hidden");t.eq(2).children().slice(1,-1).addClass("hidden");var i=t.eq(0).find(".node");this.repaint(i[0]),i.addClass("sliding").removeClass("slide-down").one("transitionend",{node:e},this.showParentEnd.bind(this))},stopAjax:function(e){e.find(".spinner").length&&e.closest(".orgchart").data("inAjax",!1)},isVisibleNode:function(t,i){return this.getNodeState(e(i)).visible},hideChildrenEnd:function(e){e.data.animatedNodes.removeClass("sliding"),e.data.isVerticalDesc?e.data.lowerLevel.addClass("hidden"):(e.data.animatedNodes.closest("table").closest("tr").prevAll(".lines").removeAttr("style").addClass("hidden").siblings(".nodes").addClass("hidden"),e.data.lowerLevel.last().find(".verticalNodes").addClass("hidden")),this.isInAction(e.data.node)&&this.switchVerticalArrow(e.data.node.children(".bottomEdge"))},hideChildren:function(e){var t=e.closest("tr").siblings();this.stopAjax(t.last());var i=t.last().find(".node").filter(this.isVisibleNode.bind(this)),n=!!t.last().is(".verticalNodes");n||i.closest("table").closest("tr").prevAll(".lines").css("visibility","hidden"),this.repaint(i.get(0)),i.addClass("sliding slide-up").eq(0).one("transitionend",{animatedNodes:i,lowerLevel:t,isVerticalDesc:n,node:e},this.hideChildrenEnd.bind(this))},showChildrenEnd:function(e){var t=e.data.node;e.data.animatedNodes.removeClass("sliding"),this.isInAction(t)&&this.switchVerticalArrow(t.children(".bottomEdge"))},showChildren:function(e){var t=e.closest("tr").siblings(),i=!!t.is(".verticalNodes")?t.removeClass("hidden").find(".node").filter(this.isVisibleNode.bind(this)):t.removeClass("hidden").eq(2).children().find(".node:first").filter(this.isVisibleNode.bind(this));this.repaint(i.get(0)),i.addClass("sliding").removeClass("slide-up").eq(0).one("transitionend",{node:e,animatedNodes:i},this.showChildrenEnd.bind(this))},hideSiblingsEnd:function(e){var t=e.data.node,i=e.data.nodeContainer,n=e.data.direction;e.data.lines.removeAttr("style");var s=n?"left"===n?i.prevAll(":not(.hidden)"):i.nextAll(":not(.hidden)"):i.siblings();i.closest(".nodes").prev().children(":not(.hidden)").slice(1,n?2*s.length+1:-1).addClass("hidden"),e.data.animatedNodes.removeClass("sliding"),s.find(".node:gt(0)").filter(this.isVisibleNode.bind(this)).removeClass("slide-left slide-right").addClass("slide-up"),s.find(".lines, .nodes, .verticalNodes").addClass("hidden").end().addClass("hidden"),this.isInAction(t)&&this.switchHorizontalArrow(t)},hideSiblings:function(e,t){var i=e.closest("table").parent();i.siblings().find(".spinner").length&&e.closest(".orgchart").data("inAjax",!1),t?"left"===t?i.prevAll().find(".node").filter(this.isVisibleNode.bind(this)).addClass("sliding slide-right"):i.nextAll().find(".node").filter(this.isVisibleNode.bind(this)).addClass("sliding slide-left"):(i.prevAll().find(".node").filter(this.isVisibleNode.bind(this)).addClass("sliding slide-right"),i.nextAll().find(".node").filter(this.isVisibleNode.bind(this)).addClass("sliding slide-left"));var n=i.siblings().find(".sliding"),s=n.closest(".nodes").prevAll(".lines").css("visibility","hidden");n.eq(0).one("transitionend",{node:e,nodeContainer:i,direction:t,animatedNodes:n,lines:s},this.hideSiblingsEnd.bind(this))},showSiblingsEnd:function(e){var t=e.data.node;e.data.visibleNodes.removeClass("sliding"),this.isInAction(t)&&(this.switchHorizontalArrow(t),t.children(".topEdge").removeClass("fa-chevron-up").addClass("fa-chevron-down"))},showRelatedParentEnd:function(t){e(t.target).removeClass("sliding")},showSiblings:function(t,i){var n=e();n=i?"left"===i?t.closest("table").parent().prevAll().removeClass("hidden"):t.closest("table").parent().nextAll().removeClass("hidden"):t.closest("table").parent().siblings().removeClass("hidden");var s=t.closest("table").closest("tr").siblings();if(i?s.eq(2).children(".hidden").slice(0,2*n.length).removeClass("hidden"):s.eq(2).children(".hidden").removeClass("hidden"),!this.getNodeState(t,"parent").visible){s.removeClass("hidden");var a=s.find(".node")[0];this.repaint(a),e(a).addClass("sliding").removeClass("slide-down").one("transitionend",this.showRelatedParentEnd)}var d=n.find(".node").filter(this.isVisibleNode.bind(this));this.repaint(d.get(0)),d.addClass("sliding").removeClass("slide-left slide-right"),d.eq(0).one("transitionend",{node:t,visibleNodes:d},this.showSiblingsEnd.bind(this))},startLoading:function(t){var i=this.$chart;return(void 0===i.data("inAjax")||!0!==i.data("inAjax"))&&(t.addClass("hidden"),t.parent().append('<i class="fa fa-circle-o-notch fa-spin spinner"></i>').children().not(".spinner").css("opacity",.2),i.data("inAjax",!0),e(".oc-export-btn"+(""!==this.options.chartClass?"."+this.options.chartClass:"")).prop("disabled",!0),!0)},endLoading:function(t){var i=t.parent();t.removeClass("hidden"),i.find(".spinner").remove(),i.children().removeAttr("style"),this.$chart.data("inAjax",!1),e(".oc-export-btn"+(""!==this.options.chartClass?"."+this.options.chartClass:"")).prop("disabled",!1)},isInAction:function(e){return e.children(".edge").attr("class").indexOf("fa-")>-1},switchVerticalArrow:function(e){e.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down")},switchHorizontalArrow:function(e){var t=e.closest(".orgchart").data("options");if(t.toggleSiblingsResp&&(void 0===t.ajaxURL||e.closest(".nodes").data("siblingsLoaded"))){var i=e.closest("table").parent().prev();i.length&&(i.is(".hidden")?e.children(".leftEdge").addClass("fa-chevron-left").removeClass("fa-chevron-right"):e.children(".leftEdge").addClass("fa-chevron-right").removeClass("fa-chevron-left"));var n=e.closest("table").parent().next();n.length&&(n.is(".hidden")?e.children(".rightEdge").addClass("fa-chevron-right").removeClass("fa-chevron-left"):e.children(".rightEdge").addClass("fa-chevron-left").removeClass("fa-chevron-right"))}else{var s=e.closest("table").parent().siblings(),a=!!s.length&&!s.is(".hidden");e.children(".leftEdge").toggleClass("fa-chevron-right",a).toggleClass("fa-chevron-left",!a),e.children(".rightEdge").toggleClass("fa-chevron-left",a).toggleClass("fa-chevron-right",!a)}},repaint:function(e){e&&(e.style.offsetWidth=e.offsetWidth)},nodeEnterLeaveHandler:function(t){var i=e(t.delegateTarget),n=!1,s=i.children(".topEdge"),a=(i.children(".rightEdge"),i.children(".bottomEdge")),d=i.children(".leftEdge");"mouseenter"===t.type?(s.length&&(n=this.getNodeState(i,"parent").visible,s.toggleClass("fa-chevron-up",!n).toggleClass("fa-chevron-down",n)),a.length&&(n=this.getNodeState(i,"children").visible,a.toggleClass("fa-chevron-down",!n).toggleClass("fa-chevron-up",n)),d.length&&this.switchHorizontalArrow(i)):i.children(".edge").removeClass("fa-chevron-up fa-chevron-down fa-chevron-right fa-chevron-left")},nodeClickHandler:function(t){this.$chart.find(".focused").removeClass("focused"),e(t.delegateTarget).addClass("focused")},loadNodes:function(t,i,n){var s=this,a=this.options;e.ajax({url:i,dataType:"json"}).done(function(i){s.$chart.data("inAjax")&&("parent"===t?e.isEmptyObject(i)||s.addParent(n.parent(),i,a):"children"===t?i.children.length&&s.addChildren(n.parent(),i,e.extend({},a,{depth:0})):(i.siblings||i.children)&&s.addSiblings(n.parent(),i,a))}).fail(function(){console.log("Failed to get "+t+" data")}).always(function(){s.endLoading(n)})},HideFirstParentEnd:function(e){var t=e.data.topEdge,i=t.parent();this.isInAction(i)&&(this.switchVerticalArrow(t),this.switchHorizontalArrow(i))},topEdgeClickHandler:function(t){t.stopPropagation();var i=e(t.target),n=e(t.delegateTarget),s=this.getNodeState(n,"parent");if(s.exist){var a=n.closest("table").closest("tr").siblings(":first").find(".node");if(a.is(".sliding"))return;s.visible?(this.hideParent(n),a.one("transitionend",{topEdge:i},this.HideFirstParentEnd.bind(this))):this.showParent(n)}else if(this.startLoading(i)){var d=this.options,o=e.isFunction(d.ajaxURL.parent)?d.ajaxURL.parent(t.data.nodeData):d.ajaxURL.parent+n[0].id;this.loadNodes("parent",o,i)}},bottomEdgeClickHandler:function(t){t.stopPropagation();var i=e(t.target),n=e(t.delegateTarget),s=this.getNodeState(n,"children");if(s.exist){if(n.closest("tr").siblings(":last").find(".sliding").length)return;s.visible?this.hideChildren(n):this.showChildren(n)}else if(this.startLoading(i)){var a=this.options,d=e.isFunction(a.ajaxURL.children)?a.ajaxURL.children(t.data.nodeData):a.ajaxURL.children+n[0].id;this.loadNodes("children",d,i)}},hEdgeClickHandler:function(t){t.stopPropagation();var i=e(t.target),n=e(t.delegateTarget),s=this.options,a=this.getNodeState(n,"siblings");if(a.exist){if(n.closest("table").parent().siblings().find(".sliding").length)return;if(s.toggleSiblingsResp){var d=n.closest("table").parent().prev(),o=n.closest("table").parent().next();i.is(".leftEdge")?d.is(".hidden")?this.showSiblings(n,"left"):this.hideSiblings(n,"left"):o.is(".hidden")?this.showSiblings(n,"right"):this.hideSiblings(n,"right")}else a.visible?this.hideSiblings(n):this.showSiblings(n)}else if(this.startLoading(i)){var r=n[0].id,l=this.getNodeState(n,"parent").exist?e.isFunction(s.ajaxURL.siblings)?s.ajaxURL.siblings(t.data.nodeData):s.ajaxURL.siblings+r:e.isFunction(s.ajaxURL.families)?s.ajaxURL.families(t.data.nodeData):s.ajaxURL.families+r;this.loadNodes("siblings",l,i)}},expandVNodesEnd:function(e){e.data.vNodes.removeClass("sliding")},collapseVNodesEnd:function(e){e.data.vNodes.removeClass("sliding").closest("ul").addClass("hidden")},toggleVNodes:function(t){var i=e(t.target),n=i.parent().next(),s=n.find(".node"),a=n.children().children(".node");a.is(".sliding")||(i.toggleClass("fa-plus-square fa-minus-square"),s.eq(0).is(".slide-up")?(n.removeClass("hidden"),this.repaint(a.get(0)),a.addClass("sliding").removeClass("slide-up").eq(0).one("transitionend",{vNodes:a},this.expandVNodesEnd)):(s.addClass("sliding slide-up").eq(0).one("transitionend",{vNodes:s},this.collapseVNodesEnd),s.find(".toggleBtn").removeClass("fa-minus-square").addClass("fa-plus-square")))},createGhostNode:function(n){var s=e(n.target),a=this.options,d=n.originalEvent,o=/firefox/.test(t.navigator.userAgent.toLowerCase());o&&d.dataTransfer.setData("text/html","hack for firefox");var r,l;i.querySelector(".ghost-node")?(r=s.closest(".orgchart").children(".ghost-node").get(0),l=e(r).children().get(0)):((r=i.createElementNS("http://www.w3.org/2000/svg","svg")).classList.add("ghost-node"),l=i.createElementNS("http://www.w3.org/2000/svg","rect"),r.appendChild(l),s.closest(".orgchart").append(r));var h=s.closest(".orgchart").css("transform").split(","),c=Math.abs(t.parseFloat("t2b"===a.direction||"b2t"===a.direction?h[0].slice(h[0].indexOf("(")+1):h[1]));r.setAttribute("width",s.outerWidth(!1)),r.setAttribute("height",s.outerHeight(!1)),l.setAttribute("x",5*c),l.setAttribute("y",5*c),l.setAttribute("width",120*c),l.setAttribute("height",40*c),l.setAttribute("rx",4*c),l.setAttribute("ry",4*c),l.setAttribute("stroke-width",1*c);var g=d.offsetX*c,p=d.offsetY*c;if("l2r"===a.direction?(g=d.offsetY*c,p=d.offsetX*c):"r2l"===a.direction?(g=s.outerWidth(!1)-d.offsetY*c,p=d.offsetX*c):"b2t"===a.direction&&(g=s.outerWidth(!1)-d.offsetX*c,p=s.outerHeight(!1)-d.offsetY*c),o){l.setAttribute("fill","rgb(255, 255, 255)"),l.setAttribute("stroke","rgb(191, 0, 0)");var f=i.createElement("img");f.src="data:image/svg+xml;utf8,"+(new XMLSerializer).serializeToString(r),d.dataTransfer.setDragImage(f,g,p)}else d.dataTransfer.setDragImage(r,g,p)},filterAllowedDropNodes:function(t){var i=this.options,n=t.closest(".nodes").siblings().eq(0).find(".node:first"),s=t.closest("table").find(".node");this.$chart.data("dragged",t).find(".node").each(function(a,d){-1===s.index(d)&&(i.dropCriteria?i.dropCriteria(t,n,e(d))&&e(d).addClass("allowedDrop"):e(d).addClass("allowedDrop"))})},dragstartHandler:function(t){"none"!==this.$chart.css("transform")&&this.createGhostNode(t),this.filterAllowedDropNodes(e(t.target))},dragoverHandler:function(t){t.preventDefault(),e(t.delegateTarget).is(".allowedDrop")||(t.originalEvent.dataTransfer.dropEffect="none")},dragendHandler:function(e){this.$chart.find(".allowedDrop").removeClass("allowedDrop")},dropHandler:function(t){var i=e(t.delegateTarget),n=this.$chart.data("dragged"),s=n.closest(".nodes").siblings().eq(0).children(),a=e.Event("nodedrop.orgchart");if(this.$chart.trigger(a,{draggedNode:n,dragZone:s.children(),dropZone:i}),!a.isDefaultPrevented()){if(i.closest("tr").siblings().length){var d=parseInt(i.parent().attr("colspan"))+2,o='<i class="edge horizontalEdge rightEdge fa"></i><i class="edge horizontalEdge leftEdge fa"></i>';i.closest("tr").next().addBack().children().attr("colspan",d),n.find(".horizontalEdge").length||n.append(o),i.closest("tr").siblings().eq(1).children(":last").before('<td class="leftLine topLine"></td><td class="rightLine topLine"></td>').end().next().append(n.closest("table").parent());var r=n.closest("table").parent().siblings().find(".node:first");1===r.length&&r.append(o)}else i.append('<i class="edge verticalEdge bottomEdge fa"></i>').parent().attr("colspan",2).parent().after('<tr class="lines"><td colspan="2"><div class="downLine"></div></td></tr><tr class="lines"><td class="rightLine"></td><td class="leftLine"></td></tr><tr class="nodes"></tr>').siblings(":last").append(n.find(".horizontalEdge").remove().end().closest("table").parent());var l=parseInt(s.attr("colspan"));if(l>2){s.attr("colspan",l-2).parent().next().children().attr("colspan",l-2).end().next().children().slice(1,3).remove();var h=s.parent().siblings(".nodes").children().find(".node:first");1===h.length&&h.find(".horizontalEdge").remove()}else s.removeAttr("colspan").find(".bottomEdge").remove().end().end().siblings().remove()}},createNode:function(t,i,n){t.children||(t.children=[]),e.each(t.children,function(e,i){i.parentId=t.id});var s=e.Deferred(),a=e("<div"+(n.draggable?' draggable="true"':"")+(t[n.nodeId]?' id="'+t[n.nodeId]+'"':"")+(t.parentId?' data-parent="'+t.parentId+'"':"")+">").addClass("node "+(t.className||"")+(i>=n.depth?" slide-up":""));if(n.nodeTemplate)a.append(n.nodeTemplate(t));else{var d=void 0!==n.nodeContent;a.addClass(d?"withContent":"").append('<div class="title '+(d?"withContent":"")+'">'+t[n.nodeTitle]+"</div>").append(d?'<div class="content">'+(t[n.nodeContent]||"")+"</div>":"")}var o=t.relationship||"";if(n.verticalDepth&&i+2>n.verticalDepth){if(i+1>=n.verticalDepth&&Number(o.substr(2,1))){var r=i+1>=n.depth?"plus":"minus";a.append('<i class="toggleBtn fa fa-'+r+'-square"></i>')}}else Number(o.substr(0,1))&&a.append('<i class="edge verticalEdge topEdge fa"></i>'),Number(o.substr(1,1))&&a.append('<i class="edge horizontalEdge rightEdge fa"></i><i class="edge horizontalEdge leftEdge fa"></i>'),Number(o.substr(2,1))&&a.append('<i class="edge verticalEdge bottomEdge fa"></i>').children(".title").prepend('<i class="fa '+n.parentNodeSymbol+' symbol"></i>');return a.on("mouseenter mouseleave",this.nodeEnterLeaveHandler.bind(this)),a.on("click",this.nodeClickHandler.bind(this)),a.on("click",".topEdge",{nodeData:t},this.topEdgeClickHandler.bind(this)),a.on("click",".bottomEdge",{nodeData:t},this.bottomEdgeClickHandler.bind(this)),a.on("click",".leftEdge, .rightEdge",{nodeData:t},this.hEdgeClickHandler.bind(this)),a.on("click",".toggleBtn",this.toggleVNodes.bind(this)),n.draggable&&a.on("dragstart",this.dragstartHandler.bind(this)).on("dragover",this.dragoverHandler.bind(this)).on("dragend",this.dragendHandler.bind(this)).on("drop",this.dropHandler.bind(this)),n.createNode&&n.createNode(a,t),s.resolve(a),s.promise()},buildHierarchy:function(t,i,n,s,a){var d,o=this,r=i.children,l=!!r&&r.length,h=!!(s.verticalDepth&&n+1>=s.verticalDepth);if(Object.keys(i).length>1&&(d=h?t:e("<table>"),h||t.append(d),e.when(this.createNode(i,n,s)).done(function(t){h?d.append(t):d.append(e("<tr/>").append(e("<td"+(l?' colspan="'+2*r.length+'"':"")+"></td>").append(t))),a&&a()}).fail(function(){console.log("Failed to creat node")})),l){1===Object.keys(i).length&&(d=t);var c=n+1>=s.depth||i.collapsed?" hidden":"",g=!!(s.verticalDepth&&n+2>=s.verticalDepth);g||d.append('<tr class="lines'+c+'"><td colspan="'+2*r.length+'"><div class="downLine"></div></td></tr>');for(var p='<tr class="lines'+c+'"><td class="rightLine"></td>',f=1;f<r.length;f++)p+='<td class="leftLine topLine"></td><td class="rightLine topLine"></td>';p+='<td class="leftLine"></td></tr>';var v;g?(v=e("<ul>"),c&&s.depth+1!==s.verticalDepth&&v.addClass(c),n+2===s.verticalDepth?d.append('<tr class="verticalNodes'+c+'"><td></td></tr>').find(".verticalNodes").children().append(v):d.append(v)):(v=e('<tr class="nodes'+c+'">'),d.append(p).append(v)),e.each(r,function(){var t=e(g?"<li>":'<td colspan="2">');v.append(t),o.buildHierarchy(t,this,n+1,s,a)})}},buildChildNode:function(e,t,i,n){i=i||e.closest(".orgchart").data("options");var s=t.children||t.siblings;e.find("td:first").attr("colspan",2*s.length),this.buildHierarchy(e,{children:s},0,i,n)},addChildren:function(e,t,i){var n=this,s=(i=i||e.closest(".orgchart").data("options"),0);this.buildChildNode(e.closest("table"),t,i,function(){++s===t.children.length&&(e.children(".bottomEdge").length||e.append('<i class="edge verticalEdge bottomEdge fa"></i>'),e.find(".symbol").length||e.children(".title").prepend('<i class="fa '+i.parentNodeSymbol+' symbol"></i>'),n.showChildren(e))})},buildParentNode:function(t,i,n,s){var a=this,d=e("<table>");i.relationship=i.relationship||"001",e.when(this.createNode(i,0,n||t.closest(".orgchart").data("options"))).done(function(t){d.append(e('<tr class="hidden">').append(e('<td colspan="2">').append(t.removeClass("slide-up").addClass("slide-down")))),d.append('<tr class="lines hidden"><td colspan="2"><div class="downLine"></div></td></tr>');d.append('<tr class="lines hidden"><td class="rightLine"></td><td class="leftLine"></td></tr>');var i=a.$chart;i.prepend(d).children("table:first").append('<tr class="nodes"><td colspan="2"></td></tr>').children("tr:last").children().append(i.children("table").last()),s()}).fail(function(){console.log("Failed to create parent node")})},addParent:function(e,t,i){var n=this;this.buildParentNode(e,t,i,function(){e.children(".topEdge").length||e.children(".title").after('<i class="edge verticalEdge topEdge fa"></i>'),n.showParent(e)})},complementLine:function(e,t,i){for(var n="",s=0;s<i;s++)n+='<td class="leftLine topLine"></td><td class="rightLine topLine"></td>';e.parent().prevAll("tr:gt(0)").children().attr("colspan",2*t).end().next().children(":first").after(n)},buildSiblingNode:function(t,i,n,s){var a=this,d=(n=n||t.closest(".orgchart").data("options"),i.siblings?i.siblings.length:i.children.length),o=t.parent().is("td")?t.closest("tr").children().length:1,r=o+d,l=r>1?Math.floor(r/2-1):0;if(t.parent().is("td")){t.closest("tr").prevAll("tr:last");t.closest("tr").prevAll("tr:lt(2)").remove();var h=0;this.buildChildNode(t.parent().closest("table"),i,n,function(){if(++h===d){var e=t.parent().closest("table").children("tr:last").children("td");o>1?(a.complementLine(e.eq(0).before(t.closest("td").siblings().addBack().unwrap()),r,o),e.addClass("hidden").find(".node").addClass("slide-left")):(a.complementLine(e.eq(l).after(t.closest("td").unwrap()),r,1),e.not(":eq("+l+"1)").addClass("hidden").slice(0,l).find(".node").addClass("slide-right").end().end().slice(l).find(".node").addClass("slide-left")),s()}})}else{var c=0;this.buildHierarchy(t.closest(".orgchart"),i,0,n,function(){++c===r&&(a.complementLine(t.next().children("tr:last").children().eq(l).after(e('<td colspan="2">').append(t)),r,1),t.closest("tr").siblings().eq(0).addClass("hidden").find(".node").addClass("slide-down"),t.parent().siblings().addClass("hidden").slice(0,l).find(".node").addClass("slide-right").end().end().slice(l).find(".node").addClass("slide-left"),s())})}},addSiblings:function(e,t,i){var n=this;this.buildSiblingNode(e.closest("table"),t,i,function(){e.closest(".nodes").data("siblingsLoaded",!0),e.children(".leftEdge").length||e.children(".topEdge").after('<i class="edge horizontalEdge rightEdge fa"></i><i class="edge horizontalEdge leftEdge fa"></i>'),n.showSiblings(e)})},removeNodes:function(e){var t=e.closest("table").parent(),i=t.parent().siblings();t.is("td")?this.getNodeState(e,"siblings").exist?(i.eq(2).children(".topLine:lt(2)").remove(),i.slice(0,2).children().attr("colspan",i.eq(2).children().length),t.remove()):i.eq(0).children().removeAttr("colspan").find(".bottomEdge").remove().end().end().siblings().remove():t.add(t.siblings()).remove()},export:function(n,s){var a=this;if(n=void 0!==n?n:this.options.exportFilename,s=void 0!==s?s:this.options.exportFileextension,e(this).children(".spinner").length)return!1;var d=this.$chartContainer,o=d.find(".mask");o.length?o.removeClass("hidden"):d.append('<div class="mask"><i class="fa fa-circle-o-notch fa-spin spinner"></i></div>');var r=d.addClass("canvasContainer").find('.orgchart:not(".hidden")').get(0),l="l2r"===a.options.direction||"r2l"===a.options.direction;html2canvas(r,{width:l?r.clientHeight:r.clientWidth,height:l?r.clientWidth:r.clientHeight,onclone:function(t){e(t).find(".canvasContainer").css("overflow","visible").find('.orgchart:not(".hidden"):first').css("transform","")},onrendered:function(e){if(d.find(".mask").addClass("hidden"),"pdf"===s.toLowerCase()){var o={},r=Math.floor(.2646*e.width),l=Math.floor(.2646*e.height);(o=r>l?new jsPDF("l","mm",[r,l]):new jsPDF("p","mm",[l,r])).addImage(e.toDataURL(),"png",0,0),o.save(n+".pdf")}else{var h="WebkitAppearance"in i.documentElement.style,c=!!t.sidebar,g="Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&navigator.appVersion.indexOf("Edge")>-1;if(!h&&!c||g)t.navigator.msSaveBlob(e.msToBlob(),n+".png");else{var p=".oc-download-btn"+(""!==a.options.chartClass?"."+a.options.chartClass:"");d.find(p).length||d.append('<a class="oc-download-btn'+(""!==a.options.chartClass?" "+a.options.chartClass:"")+'" download="'+n+'.png"></a>'),d.find(p).attr("href",e.toDataURL())[0].click()}}}}).then(function(){d.removeClass("canvasContainer")},function(){d.removeClass("canvasContainer")})}},e.fn.orgchart=function(e){return new s(this,e).init()}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5vcmdjaGFydC5qcyJdLCJuYW1lcyI6WyJmYWN0b3J5IiwibW9kdWxlIiwiZXhwb3J0cyIsInJlcXVpcmUiLCJ3aW5kb3ciLCJkb2N1bWVudCIsImpRdWVyeSIsIiQiLCJ1bmRlZmluZWQiLCJPcmdDaGFydCIsImVsZW0iLCJvcHRzIiwidGhpcyIsIiRjaGFydENvbnRhaW5lciIsImRlZmF1bHRPcHRpb25zIiwibm9kZVRpdGxlIiwibm9kZUlkIiwidG9nZ2xlU2libGluZ3NSZXNwIiwiZGVwdGgiLCJjaGFydENsYXNzIiwiZXhwb3J0QnV0dG9uIiwiZXhwb3J0RmlsZW5hbWUiLCJleHBvcnRGaWxlZXh0ZW5zaW9uIiwicGFyZW50Tm9kZVN5bWJvbCIsImRyYWdnYWJsZSIsImRpcmVjdGlvbiIsInBhbiIsInpvb20iLCJ6b29taW5MaW1pdCIsInpvb21vdXRMaW1pdCIsInByb3RvdHlwZSIsImluaXQiLCJ0aGF0Iiwib3B0aW9ucyIsImV4dGVuZCIsIiRjaGFydCIsInJlbW92ZSIsImRhdGEiLCJjbGFzcyIsImNsaWNrIiwiZXZlbnQiLCJ0YXJnZXQiLCJjbG9zZXN0IiwibGVuZ3RoIiwiZmluZCIsInJlbW92ZUNsYXNzIiwiTXV0YXRpb25PYnNlcnZlciIsInRyaWdnZXJJbml0RXZlbnQiLCJ0eXBlIiwiYnVpbGRIaWVyYXJjaHkiLCJidWlsZEpzb25EUyIsImNoaWxkcmVuIiwiYWpheFVSTCIsImF0dGFjaFJlbCIsImFwcGVuZCIsImFqYXgiLCJ1cmwiLCJkYXRhVHlwZSIsImRvbmUiLCJ0ZXh0U3RhdHVzIiwianFYSFIiLCJmYWlsIiwiZXJyb3JUaHJvd24iLCJjb25zb2xlIiwibG9nIiwiYWx3YXlzIiwiYXR0YWNoRXhwb3J0QnV0dG9uIiwiYmluZFBhbiIsImJpbmRab29tIiwibW8iLCJtdXRhdGlvbnMiLCJkaXNjb25uZWN0IiwiaW5pdFRpbWUiLCJpIiwiaiIsImFkZGVkTm9kZXMiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImluaXRDb21wbGV0ZWQiLCJpbml0RXZlbnQiLCJFdmVudCIsInRyaWdnZXIiLCJvYnNlcnZlIiwiY2hpbGRMaXN0IiwiJGV4cG9ydEJ0biIsInRleHQiLCJlIiwicHJldmVudERlZmF1bHQiLCJleHBvcnQiLCJzZXRPcHRpb25zIiwidmFsIiwidW5iaW5kUGFuIiwidW5iaW5kWm9vbSIsInBhblN0YXJ0SGFuZGxlciIsImRlbGVnYXRlVGFyZ2V0IiwidG91Y2hlcyIsImNzcyIsImxhc3RYIiwibGFzdFkiLCJsYXN0VGYiLCJ0ZW1wIiwic3BsaXQiLCJpbmRleE9mIiwicGFyc2VJbnQiLCJzdGFydFgiLCJzdGFydFkiLCJ0YXJnZXRUb3VjaGVzIiwicGFnZVgiLCJwYWdlWSIsIm9uIiwibmV3WCIsIm5ld1kiLCJtYXRyaXgiLCJqb2luIiwicGFuRW5kSGFuZGxlciIsImNoYXJ0Iiwib2ZmIiwiem9vbVdoZWVsSGFuZGxlciIsIm9jIiwibmV3U2NhbGUiLCJvcmlnaW5hbEV2ZW50IiwiZGVsdGFZIiwic2V0Q2hhcnRTY2FsZSIsInpvb21TdGFydEhhbmRsZXIiLCJkaXN0IiwiZ2V0UGluY2hEaXN0Iiwiem9vbWluZ0hhbmRsZXIiLCJ6b29tRW5kSGFuZGxlciIsImRpZmYiLCJNYXRoIiwic3FydCIsImNsaWVudFgiLCJjbGllbnRZIiwidGFyZ2V0U2NhbGUiLCJhYnMiLCJwYXJzZUZsb2F0IiwiJGxpIiwic3ViT2JqIiwibmFtZSIsImNvbnRlbnRzIiwiZXEiLCJ0cmltIiwicmVsYXRpb25zaGlwIiwicGFyZW50IiwiaXMiLCJzaWJsaW5ncyIsImF0dHIiLCJpZCIsImVhY2giLCJwdXNoIiwiZmxhZ3MiLCJmb3JFYWNoIiwiaXRlbSIsImxvb3BDaGFydCIsIiR0ciIsImdldEhpZXJhcmNoeSIsInZhbGlkIiwiZ2V0Tm9kZVN0YXRlIiwiJG5vZGUiLCJyZWxhdGlvbiIsIiR0YXJnZXQiLCJleGlzdCIsInZpc2libGUiLCJnZXRSZWxhdGVkTm9kZXMiLCJoaWRlUGFyZW50RW5kIiwidXBwZXJMZXZlbCIsImFkZENsYXNzIiwic2xpY2UiLCJyZW1vdmVBdHRyIiwiaGlkZVBhcmVudCIsIiR1cHBlckxldmVsIiwiaGlkZVNpYmxpbmdzIiwiJHBhcmVudCIsIm9uZSIsInNob3dQYXJlbnRFbmQiLCJub2RlIiwiaXNJbkFjdGlvbiIsInN3aXRjaFZlcnRpY2FsQXJyb3ciLCJzaG93UGFyZW50IiwicmVwYWludCIsImJpbmQiLCJzdG9wQWpheCIsIiRub2RlTGV2ZWwiLCJpc1Zpc2libGVOb2RlIiwiaW5kZXgiLCJoaWRlQ2hpbGRyZW5FbmQiLCJhbmltYXRlZE5vZGVzIiwiaXNWZXJ0aWNhbERlc2MiLCJsb3dlckxldmVsIiwicHJldkFsbCIsImxhc3QiLCJoaWRlQ2hpbGRyZW4iLCIkbG93ZXJMZXZlbCIsIiRhbmltYXRlZE5vZGVzIiwiZmlsdGVyIiwiZ2V0Iiwic2hvd0NoaWxkcmVuRW5kIiwic2hvd0NoaWxkcmVuIiwiJGxldmVscyIsImhpZGVTaWJsaW5nc0VuZCIsIiRub2RlQ29udGFpbmVyIiwibm9kZUNvbnRhaW5lciIsImxpbmVzIiwiJHNpYmxpbmdzIiwibmV4dEFsbCIsInByZXYiLCJlbmQiLCJzd2l0Y2hIb3Jpem9udGFsQXJyb3ciLCIkbGluZXMiLCJzaG93U2libGluZ3NFbmQiLCJ2aXNpYmxlTm9kZXMiLCJzaG93UmVsYXRlZFBhcmVudEVuZCIsInNob3dTaWJsaW5ncyIsIiR2aXNpYmxlTm9kZXMiLCJzdGFydExvYWRpbmciLCIkZWRnZSIsIm5vdCIsInByb3AiLCJlbmRMb2FkaW5nIiwiJGFycm93IiwidG9nZ2xlQ2xhc3MiLCIkcHJldlNpYiIsIiRuZXh0U2liIiwibmV4dCIsIiRzaWJzIiwic2lic1Zpc2libGUiLCJzdHlsZSIsIm9mZnNldFdpZHRoIiwibm9kZUVudGVyTGVhdmVIYW5kbGVyIiwiZmxhZyIsIiR0b3BFZGdlIiwiJGJvdHRvbUVkZ2UiLCIkbGVmdEVkZ2UiLCJub2RlQ2xpY2tIYW5kbGVyIiwibG9hZE5vZGVzIiwicmVsIiwiaXNFbXB0eU9iamVjdCIsImFkZFBhcmVudCIsImFkZENoaWxkcmVuIiwiYWRkU2libGluZ3MiLCJIaWRlRmlyc3RQYXJlbnRFbmQiLCJ0b3BFZGdlIiwidG9wRWRnZUNsaWNrSGFuZGxlciIsInN0b3BQcm9wYWdhdGlvbiIsInBhcmVudFN0YXRlIiwiaXNGdW5jdGlvbiIsIm5vZGVEYXRhIiwiYm90dG9tRWRnZUNsaWNrSGFuZGxlciIsImNoaWxkcmVuU3RhdGUiLCJoRWRnZUNsaWNrSGFuZGxlciIsIiRoRWRnZSIsInNpYmxpbmdzU3RhdGUiLCJmYW1pbGllcyIsImV4cGFuZFZOb2Rlc0VuZCIsInZOb2RlcyIsImNvbGxhcHNlVk5vZGVzRW5kIiwidG9nZ2xlVk5vZGVzIiwiJHRvZ2dsZUJ0biIsIiRkZXNjV3JhcHBlciIsIiRkZXNjZW5kYW50cyIsIiRjaGlsZHJlbiIsImNyZWF0ZUdob3N0Tm9kZSIsIiRub2RlRGl2Iiwib3JpZ0V2ZW50IiwiaXNGaXJlZm94IiwidGVzdCIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInRvTG93ZXJDYXNlIiwiZGF0YVRyYW5zZmVyIiwic2V0RGF0YSIsImdob3N0Tm9kZSIsIm5vZGVDb3ZlciIsInF1ZXJ5U2VsZWN0b3IiLCJjcmVhdGVFbGVtZW50TlMiLCJhZGQiLCJhcHBlbmRDaGlsZCIsInRyYW5zVmFsdWVzIiwic2NhbGUiLCJzZXRBdHRyaWJ1dGUiLCJvdXRlcldpZHRoIiwib3V0ZXJIZWlnaHQiLCJ4T2Zmc2V0Iiwib2Zmc2V0WCIsInlPZmZzZXQiLCJvZmZzZXRZIiwiZ2hvc3ROb2RlV3JhcHBlciIsImNyZWF0ZUVsZW1lbnQiLCJzcmMiLCJYTUxTZXJpYWxpemVyIiwic2VyaWFsaXplVG9TdHJpbmciLCJzZXREcmFnSW1hZ2UiLCJmaWx0ZXJBbGxvd2VkRHJvcE5vZGVzIiwiJGRyYWdnZWQiLCIkZHJhZ1pvbmUiLCIkZHJhZ0hpZXIiLCJkcm9wQ3JpdGVyaWEiLCJkcmFnc3RhcnRIYW5kbGVyIiwiZHJhZ292ZXJIYW5kbGVyIiwiZHJvcEVmZmVjdCIsImRyYWdlbmRIYW5kbGVyIiwiZHJvcEhhbmRsZXIiLCIkZHJvcFpvbmUiLCJkcm9wRXZlbnQiLCJkcmFnZ2VkTm9kZSIsImRyYWdab25lIiwiZHJvcFpvbmUiLCJpc0RlZmF1bHRQcmV2ZW50ZWQiLCJkcm9wQ29sc3BhbiIsImhvcml6b250YWxFZGdlcyIsImFkZEJhY2siLCJiZWZvcmUiLCIkZHJvcFNpYnMiLCJhZnRlciIsImRyYWdDb2xzcGFuIiwiJGRyYWdTaWJzIiwiY3JlYXRlTm9kZSIsImxldmVsIiwiY2hpbGQiLCJwYXJlbnRJZCIsImR0ZCIsIkRlZmVycmVkIiwiY2xhc3NOYW1lIiwibm9kZVRlbXBsYXRlIiwiaXNTZXROb2RlQ29udGVudCIsIm5vZGVDb250ZW50IiwidmVydGljYWxEZXB0aCIsIk51bWJlciIsInN1YnN0ciIsImljb24iLCJwcmVwZW5kIiwicmVzb2x2ZSIsInByb21pc2UiLCIkYXBwZW5kVG8iLCJjYWxsYmFjayIsIiRub2RlV3JhcHBlciIsIiRjaGlsZE5vZGVzIiwiaGFzQ2hpbGRyZW4iLCJpc1ZlcnRpY2FsTm9kZSIsIk9iamVjdCIsImtleXMiLCJ3aGVuIiwiaXNIaWRkZW4iLCJjb2xsYXBzZWQiLCJpc1ZlcnRpY2FsTGF5ZXIiLCJsaW5lTGF5ZXIiLCIkbm9kZUxheWVyIiwiJG5vZGVDZWxsIiwiYnVpbGRDaGlsZE5vZGUiLCJjb3VudCIsImJ1aWxkUGFyZW50Tm9kZSIsIiRjdXJyZW50Um9vdCIsIiR0YWJsZSIsImNvbXBsZW1lbnRMaW5lIiwiJG9uZVNpYmxpbmciLCJzaWJsaW5nQ291bnQiLCJleGlzdGluZ1NpYmxpZ0NvdW50IiwiYnVpbGRTaWJsaW5nTm9kZSIsIiRub2RlQ2hhcnQiLCJuZXdTaWJsaW5nQ291bnQiLCJpbnNlcnRQb3N0aW9uIiwiZmxvb3IiLCJjaGlsZENvdW50IiwiJHNpYmxpbmdUZHMiLCJ1bndyYXAiLCJub2RlQ291bnQiLCJyZW1vdmVOb2RlcyIsIiRtYXNrIiwic291cmNlQ2hhcnQiLCJodG1sMmNhbnZhcyIsIndpZHRoIiwiY2xpZW50SGVpZ2h0IiwiY2xpZW50V2lkdGgiLCJoZWlnaHQiLCJvbmNsb25lIiwiY2xvbmVEb2MiLCJvbnJlbmRlcmVkIiwiY2FudmFzIiwiZG9jIiwiZG9jV2lkdGgiLCJkb2NIZWlnaHQiLCJqc1BERiIsImFkZEltYWdlIiwidG9EYXRhVVJMIiwic2F2ZSIsImlzV2Via2l0IiwiZG9jdW1lbnRFbGVtZW50IiwiaXNGZiIsInNpZGViYXIiLCJpc0VkZ2UiLCJhcHBOYW1lIiwiYXBwVmVyc2lvbiIsIm1zU2F2ZUJsb2IiLCJtc1RvQmxvYiIsInNlbGVjdG9yIiwidGhlbiIsImZuIiwib3JnY2hhcnQiXSwibWFwcGluZ3MiOiJBQVVBLGNBRUMsU0FBVUEsR0FDYSxpQkFBWEMsUUFBaUQsaUJBQW5CQSxPQUFPQyxRQUM5Q0YsRUFBUUcsUUFBUSxVQUFXQyxPQUFRQyxVQUVuQ0wsRUFBUU0sT0FBUUYsT0FBUUMsVUFKNUIsQ0FNRSxTQUFVRSxFQUFHSCxFQUFRQyxFQUFVRyxHQUMvQixJQUFJQyxFQUFXLFNBQVVDLEVBQU1DLEdBQzdCQyxLQUFLQyxnQkFBa0JOLEVBQUVHLEdBQ3pCRSxLQUFLRCxLQUFPQSxFQUNaQyxLQUFLRSxnQkFDSEMsVUFBYSxPQUNiQyxPQUFVLEtBQ1ZDLG9CQUFzQixFQUN0QkMsTUFBUyxJQUNUQyxXQUFjLEdBQ2RDLGNBQWdCLEVBQ2hCQyxlQUFrQixXQUNsQkMsb0JBQXVCLE1BQ3ZCQyxpQkFBb0IsV0FDcEJDLFdBQWEsRUFDYkMsVUFBYSxNQUNiQyxLQUFPLEVBQ1BDLE1BQVEsRUFDUkMsWUFBZSxFQUNmQyxhQUFnQixLQUlwQnBCLEVBQVNxQixXQUVQQyxLQUFNLFNBQVVwQixHQUNkLElBQUlxQixFQUFPcEIsS0FDWEEsS0FBS3FCLFFBQVUxQixFQUFFMkIsVUFBV3RCLEtBQUtFLGVBQWdCRixLQUFLRCxLQUFNQSxHQUU1RCxJQUFJRSxFQUFrQkQsS0FBS0MsZ0JBQ3ZCRCxLQUFLdUIsUUFDUHZCLEtBQUt1QixPQUFPQyxTQUVkLElBQUlDLEVBQU96QixLQUFLcUIsUUFBUUksS0FDcEJGLEVBQVN2QixLQUFLdUIsT0FBUzVCLEVB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QUt3TyxNQUFxQixNQUFmZ0IsRUFBT1AsT0FDN0JVLEVBQVkzUCxLQUFLd08sTUFBc0IsTUFBaEJnQixFQUFPSixTQUVoQ0ssRUFERUMsRUFBV0MsRUFDUCxJQUFJQyxNQUFNLElBQUssTUFBT0YsRUFBVUMsSUFFaEMsSUFBSUMsTUFBTSxJQUFLLE1BQU9ELEVBQVdELEtBRXJDRyxTQUFTTCxFQUFPTSxZQUFhLE1BQU8sRUFBRyxHQUMzQ0wsRUFBSU0sS0FBSzNXLEVBQWlCLFlBQ3JCLENBQ0wsSUFBSTRXLEVBQVcscUJBQXNCNVgsRUFBUzZYLGdCQUFnQmhLLE1BQzFEaUssSUFBUy9YLEVBQU9nWSxRQUNoQkMsRUFBK0IsZ0NBQXRCM0gsVUFBVTRILFNBQW9FLGFBQXRCNUgsVUFBVTRILFNBQTBCNUgsVUFBVTZILFdBQVdqUyxRQUFRLFNBQVcsRUFFakosSUFBTTJSLElBQWFFLEdBQVNFLEVBQzFCalksRUFBT3NRLFVBQVU4SCxXQUFXZixFQUFPZ0IsV0FBWXBYLEVBQWlCLFlBQzNELENBQ0wsSUFBSXFYLEVBQVcsb0JBQWtELEtBQTVCMVcsRUFBS0MsUUFBUWQsV0FBb0IsSUFBTWEsRUFBS0MsUUFBUWQsV0FBYSxJQUNqR04sRUFBZ0IrQixLQUFLOFYsR0FBVS9WLFFBQ2xDOUIsRUFBZ0J5QyxPQUFPLDZCQUEyRCxLQUE1QnRCLEVBQUtDLFFBQVFkLFdBQW9CLElBQU1hLEVBQUtDLFFBQVFkLFdBQWEsSUFBTSxlQUN6R0UsRUFBaUIsY0FFdkNSLEVBQWdCK0IsS0FBSzhWLEdBQVV4UCxLQUFLLE9BQVF1TyxFQUFPTSxhQUFhLEdBQUd4VixhQUsxRW9XLEtBQUssV0FDSjlYLEVBQWdCZ0MsWUFBWSxvQkFDM0IsV0FDRGhDLEVBQWdCZ0MsWUFBWSx1QkFLbEN0QyxFQUFFcVksR0FBR0MsU0FBVyxTQUFVbFksR0FDeEIsT0FBTyxJQUFJRixFQUFTRyxLQUFNRCxHQUFNb0IiLCJmaWxlIjoianF1ZXJ5Lm9yZ2NoYXJ0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXHJcbiAqIGpRdWVyeSBPcmdDaGFydCBQbHVnaW5cclxuICogaHR0cHM6Ly9naXRodWIuY29tL2RhYmVuZy9PcmdDaGFydFxyXG4gKlxyXG4gKiBDb3B5cmlnaHQgMjAxNiwgZGFiZW5nXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9kYWJlbmdcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlOlxyXG4gKiBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVFxyXG4gKi9cclxuJ3VzZSBzdHJpY3QnO1xyXG5cclxuKGZ1bmN0aW9uIChmYWN0b3J5KSB7XHJcbiAgaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gJ29iamVjdCcpIHtcclxuICAgIGZhY3RvcnkocmVxdWlyZSgnanF1ZXJ5JyksIHdpbmRvdywgZG9jdW1lbnQpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBmYWN0b3J5KGpRdWVyeSwgd2luZG93LCBkb2N1bWVudCk7XHJcbiAgfVxyXG59KGZ1bmN0aW9uICgkLCB3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQpIHtcclxuICB2YXIgT3JnQ2hhcnQgPSBmdW5jdGlvbiAoZWxlbSwgb3B0cykge1xyXG4gICAgdGhpcy4kY2hhcnRDb250YWluZXIgPSAkKGVsZW0pO1xyXG4gICAgdGhpcy5vcHRzID0gb3B0cztcclxuICAgIHRoaXMuZGVmYXVsdE9wdGlvbnMgPSB7XHJcbiAgICAgICdub2RlVGl0bGUnOiAnbmFtZScsXHJcbiAgICAgICdub2RlSWQnOiAnaWQnLFxyXG4gICAgICAndG9nZ2xlU2libGluZ3NSZXNwJzogZmFsc2UsXHJcbiAgICAgICdkZXB0aCc6IDk5OSxcclxuICAgICAgJ2NoYXJ0Q2xhc3MnOiAnJyxcclxuICAgICAgJ2V4cG9ydEJ1dHRvbic6IGZhbHNlLFxyXG4gICAgICAnZXhwb3J0RmlsZW5hbWUnOiAnT3JnQ2hhcnQnLFxyXG4gICAgICAnZXhwb3J0RmlsZWV4dGVuc2lvbic6ICdwbmcnLFxyXG4gICAgICAncGFyZW50Tm9kZVN5bWJvbCc6ICdmYS11c2VycycsXHJcbiAgICAgICdkcmFnZ2FibGUnOiBmYWxzZSxcclxuICAgICAgJ2RpcmVjdGlvbic6ICd0MmInLFxyXG4gICAgICAncGFuJzogZmFsc2UsXHJcbiAgICAgICd6b29tJzogZmFsc2UsXHJcbiAgICAgICd6b29taW5MaW1pdCc6IDcsXHJcbiAgICAgICd6b29tb3V0TGltaXQnOiAwLjVcclxuICAgIH07XHJcbiAgfTtcclxuICAvL1xyXG4gIE9yZ0NoYXJ0LnByb3RvdHlwZSA9IHtcclxuICAgIC8vXHJcbiAgICBpbml0OiBmdW5jdGlvbiAob3B0cykge1xyXG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgIHRoaXMub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCB0aGlzLmRlZmF1bHRPcHRpb25zLCB0aGlzLm9wdHMsIG9wdHMpO1xyXG4gICAgICAvLyBidWlsZCB0aGUgb3JnLWNoYXJ0XHJcbiAgICAgIHZhciAkY2hhcnRDb250YWluZXIgPSB0aGlzLiRjaGFydENvbnRhaW5lcjtcclxuICAgICAgaWYgKHRoaXMuJGNoYXJ0KSB7XHJcbiAgICAgICAgdGhpcy4kY2hhcnQucmVtb3ZlKCk7XHJcbiAgICAgIH1cclxuICAgICAgdmFyIGRhdGEgPSB0aGlzLm9wdGlvbnMuZGF0YTtcclxuICAgICAgdmFyICRjaGFydCA9IHRoaXMuJGNoYXJ0ID0gJCgnPGRpdj4nLCB7XHJcbiAgICAgICAgJ2RhdGEnOiB7ICdvcHRpb25zJzogdGhpcy5vcHRpb25zIH0sXHJcbiAgICAgICAgJ2NsYXNzJzogJ29yZ2NoYXJ0JyArICh0aGlzLm9wdGlvbnMuY2hhcnRDbGFzcyAhPT0gJycgPyAnICcgKyB0aGlzLm9wdGlvbnMuY2hhcnRDbGFzcyA6ICcnKSArICh0aGlzLm9wdGlvbnMuZGlyZWN0aW9uICE9PSAndDJiJyA/ICcgJyArIHRoaXMub3B0aW9ucy5kaXJlY3Rpb24gOiAnJyksXHJcbiAgICAgICAgJ2NsaWNrJzogZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAgIGlmICghJChldmVudC50YXJnZXQpLmNsb3Nlc3QoJy5ub2RlJykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICRjaGFydC5maW5kKCcubm9kZS5mb2N1c2VkJykucmVtb3ZlQ2xhc3MoJ2ZvY3VzZWQnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICBpZiAodHlwZW9mIE11dGF0aW9uT2JzZXJ2ZXIgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgdGhpcy50cmlnZ2VySW5pdEV2ZW50KCk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKCQudHlwZShkYXRhKSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICBpZiAoZGF0YSBpbnN0YW5jZW9mICQpIHsgLy8gdWwgZGF0YXNvdXJjZVxyXG4gICAgICAgICAgdGhpcy5idWlsZEhpZXJhcmNoeSgkY2hhcnQsIHRoaXMuYnVpbGRKc29uRFMoZGF0YS5jaGlsZHJlbigpKSwgMCwgdGhpcy5vcHRpb25zKTtcclxuICAgICAgICB9IGVsc2UgeyAvLyBsb2NhbCBqc29uIGRhdGFzb3VyY2VcclxuICAgICAgICAgIHRoaXMuYnVpbGRIaWVyYXJjaHkoJGNoYXJ0LCB0aGlzLm9wdGlvbnMuYWpheFVSTCA/IGRhdGEgOiB0aGlzLmF0dGFjaFJlbChkYXRhLCAnMDAnKSwgMCwgdGhpcy5vcHRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJGNoYXJ0LmFwcGVuZCgnPGkgY2xhc3M9XCJmYSBmYS1jaXJjbGUtby1ub3RjaCBmYS1zcGluIHNwaW5uZXJcIj48L2k+Jyk7XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICd1cmwnOiBkYXRhLFxyXG4gICAgICAgICAgJ2RhdGFUeXBlJzogJ2pzb24nXHJcbiAgICAgICAgfSlcclxuICAgICAgICAuZG9uZShmdW5jdGlvbihkYXRhLCB0ZXh0U3RhdHVzLCBqcVhIUikge1xyXG4gICAgICAgICAgdGhhdC5idWlsZEhpZXJhcmNoeSgkY2hhcnQsIHRoYXQub3B0aW9ucy5hamF4VVJMID8gZGF0YSA6IHRoYXQuYXR0YWNoUmVsKGRhdGEsICcwMCcpLCAwLCB0aGF0Lm9wdGlvbnMpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmZhaWwoZnVuY3Rpb24oanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvclRocm93bik7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuYWx3YXlzKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgJGNoYXJ0LmNoaWxkcmVuKCcuc3Bpbm5lcicpLnJlbW92ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgICRjaGFydENvbnRhaW5lci5hcHBlbmQoJGNoYXJ0KTtcclxuXHJcbiAgICAgIC8vIGFwcGVuZCB0aGUgZXhwb3J0IGJ1dHRvblxyXG4gICAgICBpZiAodGhpcy5vcHRpb25zLmV4cG9ydEJ1dHRvbiAmJiAhJGNoYXJ0Q29udGFpbmVyLmZpbmQoJy5vYy1leHBvcnQtYnRuJykubGVuZ3RoKSB7XHJcbiAgICAgICAgdGhpcy5hdHRhY2hFeHBvcnRCdXR0b24oKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5wYW4pIHtcclxuICAgICAgICB0aGlzLmJpbmRQYW4oKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHRoaXMub3B0aW9ucy56b29tKSB7XHJcbiAgICAgICAgdGhpcy5iaW5kWm9vbSgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH0sXHJcbiAgICAvL1xyXG4gICAgdHJpZ2dlckluaXRFdmVudDogZnVuY3Rpb24gKCkge1xyXG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgIHZhciBtbyA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uIChtdXRhdGlvbnMpIHtcclxuICAgICAgICBtby5kaXNjb25uZWN0KCk7XHJcbiAgICAgICAgaW5pdFRpbWU6XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtdXRhdGlvbnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbXV0YXRpb25zW2ldLmFkZGVkTm9kZXMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgaWYgKG11dGF0aW9uc1tpXS5hZGRlZE5vZGVzW2pdLmNsYXNzTGlzdC5jb250YWlucygnb3JnY2hhcnQnKSkge1xyXG4gICAgICAgICAgICAgIGlmICh0aGF0Lm9wdGlvbnMuaW5pdENvbXBsZXRlZCAmJiB0eXBlb2YgdGhhdC5vcHRpb25zLmluaXRDb21wbGV0ZWQgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIHRoYXQub3B0aW9ucy5pbml0Q29tcGxldGVkKHRoYXQuJGNoYXJ0KTtcclxuICAgICAgICAgICAgICAgIHZhciBpbml0RXZlbnQgPSAkLkV2ZW50KCdpbml0Lm9yZ2NoYXJ0Jyk7XHJcbiAgICAgICAgICAgICAgICB0aGF0LiRjaGFydC50cmlnZ2VyKGluaXRFdmVudCk7XHJcbiAgICAgICAgICAgICAgICBicmVhayBpbml0VGltZTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICBtby5vYnNlcnZlKHRoaXMuJGNoYXJ0Q29udGFpbmVyWzBdLCB7IGNoaWxkTGlzdDogdHJ1ZSB9KTtcclxuICAgIH0sXHJcbiAgICAvL1xyXG4gICAgYXR0YWNoRXhwb3J0QnV0dG9uOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgdmFyICRleHBvcnRCdG4gPSAkKCc8YnV0dG9uPicsIHtcclxuICAgICAgICAnY2xhc3MnOiAnb2MtZXhwb3J0LWJ0bicgKyAodGhpcy5vcHRpb25zLmNoYXJ0Q2xhc3MgIT09ICcnID8gJyAnICsgdGhpcy5vcHRpb25zLmNoYXJ0Q2xhc3MgOiAnJyksXHJcbiAgICAgICAgJ3RleHQnOiAnRXhwb3J0JyxcclxuICAgICAgICAnY2xpY2snOiBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICB0aGF0LmV4cG9ydCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMuJGNoYXJ0Q29udGFpbmVyLmFwcGVuZCgkZXhwb3J0QnRuKTtcclxuICAgIH0sXHJcbiAgICBzZXRPcHRpb25zOiBmdW5jdGlvbiAob3B0cywgdmFsKSB7XHJcbiAgICAgIGlmICh0eXBlb2Ygb3B0cyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICBpZiAob3B0cyA9PT0gJ3BhbicpIHtcclxuICAgICAgICAgIGlmICh2YWwpIHtcclxuICAgICAgICAgICAgdGhpcy5iaW5kUGFuKCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnVuYmluZFBhbigpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob3B0cyA9PT0gJ3pvb20nKSB7XHJcbiAgICAgICAgICBpZiAodmFsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmluZFpvb20oKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudW5iaW5kWm9vbSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpZiAodHlwZW9mIG9wdHMgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgaWYgKG9wdHMuZGF0YSkge1xyXG4gICAgICAgICAgdGhpcy5pbml0KG9wdHMpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpZiAodHlwZW9mIG9wdHMucGFuICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICBpZiAob3B0cy5wYW4pIHtcclxuICAgICAgICAgICAgICB0aGlzLmJpbmRQYW4oKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB0aGlzLnVuYmluZFBhbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAodHlwZW9mIG9wdHMuem9vbSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgaWYgKG9wdHMuem9vbSkge1xyXG4gICAgICAgICAgICAgIHRoaXMuYmluZFpvb20oKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB0aGlzLnVuYmluZFpvb20oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9LFxyXG4gICAgLy9cclxuICAgIHBhblN0YXJ0SGFuZGxlcjogZnVuY3Rpb24gKGUpIHtcclxuICAgICAgdmFyICRjaGFydCA9ICQoZS5kZWxlZ2F0ZVRhcmdldCk7XHJcbiAgICAgIGlmICgkKGUudGFyZ2V0KS5jbG9zZXN0KCcubm9kZScpLmxlbmd0aCB8fCAoZS50b3VjaGVzICYmIGUudG91Y2hlcy5sZW5ndGggPiAxKSkge1xyXG4gICAgICAgICRjaGFydC5kYXRhKCdwYW5uaW5nJywgZmFsc2UpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAkY2hhcnQuY3NzKCdjdXJzb3InLCAnbW92ZScpLmRhdGEoJ3Bhbm5pbmcnLCB0cnVlKTtcclxuICAgICAgfVxyXG4gICAgICB2YXIgbGFzdFggPSAwO1xyXG4gICAgICB2YXIgbGFzdFkgPSAwO1xyXG4gICAgICB2YXIgbGFzdFRmID0gJGNoYXJ0LmNzcygndHJhbnNmb3JtJyk7XHJcbiAgICAgIGlmIChsYXN0VGYgIT09ICdub25lJykge1xyXG4gICAgICAgIHZhciB0ZW1wID0gbGFzdFRmLnNwbGl0KCcsJyk7XHJcbiAgICAgICAgaWYgKGxhc3RUZi5pbmRleE9mKCczZCcpID09PSAtMSkge1xyXG4gICAgICAgICAgbGFzdFggPSBwYXJzZUludCh0ZW1wWzRdKTtcclxuICAgICAgICAgIGxhc3RZID0gcGFyc2VJbnQodGVtcFs1XSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGxhc3RYID0gcGFyc2VJbnQodGVtcFsxMl0pO1xyXG4gICAgICAgICAgbGFzdFkgPSBwYXJzZUludCh0ZW1wWzEzXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHZhciBzdGFydFggPSAwO1xyXG4gICAgICB2YXIgc3RhcnRZID0gMDtcclxuICAgICAgaWYgKCFlLnRhcmdldFRvdWNoZXMpIHsgLy8gcGFuZCBvbiBkZXNrdG9wXHJcbiAgICAgICAgc3RhcnRYID0gZS5wYWdlWCAtIGxhc3RYO1xyXG4gICAgICAgIHN0YXJ0WSA9IGUucGFnZVkgLSBsYXN0WTtcclxuICAgICAgfSBlbHNlIGlmIChlLnRhcmdldFRvdWNoZXMubGVuZ3RoID09PSAxKSB7IC8vIHBhbiBvbiBtb2JpbGUgZGV2aWNlXHJcbiAgICAgICAgc3RhcnRYID0gZS50YXJnZXRUb3VjaGVzWzBdLnBhZ2VYIC0gbGFzdFg7XHJcbiAgICAgICAgc3RhcnRZID0gZS50YXJnZXRUb3VjaGVzWzBdLnBhZ2VZIC0gbGFzdFk7XHJcbiAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXRUb3VjaGVzLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgJGNoYXJ0Lm9uKCdtb3VzZW1vdmUgdG91Y2htb3ZlJyxmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgaWYgKCEkY2hhcnQuZGF0YSgncGFubmluZycpKSB7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBuZXdYID0gMDtcclxuICAgICAgICB2YXIgbmV3WSA9IDA7XHJcbiAgICAgICAgaWYgKCFlLnRhcmdldFRvdWNoZXMpIHsgLy8gcGFuZCBvbiBkZXNrdG9wXHJcbiAgICAgICAgICBuZXdYID0gZS5wYWdlWCAtIHN0YXJ0WDtcclxuICAgICAgICAgIG5ld1kgPSBlLnBhZ2VZIC0gc3RhcnRZO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXRUb3VjaGVzLmxlbmd0aCA9PT0gMSkgeyAvLyBwYW4gb24gbW9iaWxlIGRldmljZVxyXG4gICAgICAgICAgbmV3WCA9IGUudGFyZ2V0VG91Y2hlc1swXS5wYWdlWCAtIHN0YXJ0WDtcclxuICAgICAgICAgIG5ld1kgPSBlLnRhcmdldFRvdWNoZXNbMF0ucGFnZVkgLSBzdGFydFk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLnRhcmdldFRvdWNoZXMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbGFzdFRmID0gJGNoYXJ0LmNzcygndHJhbnNmb3JtJyk7XHJcbiAgICAgICAgaWYgKGxhc3RUZiA9PT0gJ25vbmUnKSB7XHJcbiAgICAgICAgICBpZiAobGFzdFRmLmluZGV4T2YoJzNkJykgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICRjaGFydC5jc3MoJ3RyYW5zZm9ybScsICdtYXRyaXgoMSwgMCwgMCwgMSwgJyArIG5ld1ggKyAnLCAnICsgbmV3WSArICcpJyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkY2hhcnQuY3NzKCd0cmFuc2Zvcm0nLCAnbWF0cml4M2QoMSwgMCwgMCwgMCwgMCwgMSwgMCwgMCwgMCwgMCwgMSwgMCwgJyArIG5ld1ggKyAnLCAnICsgbmV3WSArICcsIDAsIDEpJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHZhciBtYXRyaXggPSBsYXN0VGYuc3BsaXQoJywnKTtcclxuICAgICAgICAgIGlmIChsYXN0VGYuaW5kZXhPZignM2QnKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgbWF0cml4WzRdID0gJyAnICsgbmV3WDtcclxuICAgICAgICAgICAgbWF0cml4WzVdID0gJyAnICsgbmV3WSArICcpJztcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG1hdHJpeFsxMl0gPSAnICcgKyBuZXdYO1xyXG4gICAgICAgICAgICBtYXRyaXhbMTNdID0gJyAnICsgbmV3WTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgICRjaGFydC5jc3MoJ3RyYW5zZm9ybScsIG1hdHJpeC5qb2luKCcsJykpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgLy9cclxuICAgIHBhbkVuZEhhbmRsZXI6IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgIGlmIChlLmRhdGEuY2hhcnQuZGF0YSgncGFubmluZycpKSB7XHJcbiAgICAgICAgZS5kYXRhLmNoYXJ0LmRhdGEoJ3Bhbm5pbmcnLCBmYWxzZSkuY3NzKCdjdXJzb3InLCAnZGVmYXVsdCcpLm9mZignbW91c2Vtb3ZlJyk7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvL1xyXG4gICAgYmluZFBhbjogZnVuY3Rpb24gKCkge1xyXG4gICAgICB0aGlzLiRjaGFydENvbnRhaW5lci5jc3MoJ292ZXJmbG93JywgJ2hpZGRlbicpO1xyXG4gICAgICB0aGlzLiRjaGFydC5vbignbW91c2Vkb3duIHRvdWNoc3RhcnQnLCB0aGlzLnBhblN0YXJ0SGFuZGxlcik7XHJcbiAgICAgICQoZG9jdW1lbnQpLm9uKCdtb3VzZXVwIHRvdWNoZW5kJywgeyAnY2hhcnQnOiB0aGlzLiRjaGFydCB9LCB0aGlzLnBhbkVuZEhhbmRsZXIpO1xyXG4gICAgfSxcclxuICAgIC8vXHJcbiAgICB1bmJpbmRQYW46IGZ1bmN0aW9uICgpIHtcclxuICAgICAgdGhpcy4kY2hhcnRDb250YWluZXIuY3NzKCdvdmVyZmxvdycsICdhdXRvJyk7XHJcbiAgICAgIHRoaXMuJGNoYXJ0Lm9mZignbW91c2Vkb3duIHRvdWNoc3RhcnQnLCB0aGlzLnBhblN0YXJ0SGFuZGxlcik7XHJcbiAgICAgICQoZG9jdW1lbnQpLm9mZignbW91c2V1cCB0b3VjaGVuZCcsIHRoaXMucGFuRW5kSGFuZGxlcik7XHJcbiAgICB9LFxyXG4gICAgLy9cclxuICAgIHpvb21XaGVlbEhhbmRsZXI6IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgIHZhciBvYyA9IGUuZGF0YS5vYztcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB2YXIgbmV3U2NhbGUgID0gMSArIChlLm9yaWdpbmFsRXZlbnQuZGVsdGFZID4gMCA/IC0wLjIgOiAwLjIpO1xyXG4gICAgICBvYy5zZXRDaGFydFNjYWxlKG9jLiRjaGFydCwgbmV3U2NhbGUpO1xyXG4gICAgfSxcclxuICAgIC8vXHJcbiAgICB6b29tU3RhcnRIYW5kbGVyOiBmdW5jdGlvbiAoZSkge1xyXG4gICAgICBpZihlLnRvdWNoZXMgJiYgZS50b3VjaGVzLmxlbmd0aCA9PT0gMikge1xyXG4gICAgICAgIHZhciBvYyA9IGUuZGF0YS5vYztcclxuICAgICAgICBvYy4kY2hhcnQuZGF0YSgncGluY2hpbmcnLCB0cnVlKTtcclxuICAgICAgICB2YXIgZGlzdCA9IG9jLmdldFBpbmNoRGlzdChlKTtcclxuICAgICAgICBvYy4kY2hhcnQuZGF0YSgncGluY2hEaXN0U3RhcnQnLCBkaXN0KTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHpvb21pbmdIYW5kbGVyOiBmdW5jdGlvbiAoZSkge1xyXG4gICAgICB2YXIgb2MgPSBlLmRhdGEub2M7XHJcbiAgICAgIGlmKG9jLiRjaGFydC5kYXRhKCdwaW5jaGluZycpKSB7XHJcbiAgICAgICAgdmFyIGRpc3QgPSBvYy5nZXRQaW5jaERpc3QoZSk7XHJcbiAgICAgICAgb2MuJGNoYXJ0LmRhdGEoJ3BpbmNoRGlzdEVuZCcsIGRpc3QpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgem9vbUVuZEhhbmRsZXI6IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgIHZhciBvYyA9IGUuZGF0YS5vYztcclxuICAgICAgaWYob2MuJGNoYXJ0LmRhdGEoJ3BpbmNoaW5nJykpIHtcclxuICAgICAgICBvYy4kY2hhcnQuZGF0YSgncGluY2hpbmcnLCBmYWxzZSk7XHJcbiAgICAgICAgdmFyIGRpZmYgPSBvYy4kY2hhcnQuZGF0YSgncGluY2hEaXN0RW5kJykgLSBvYy4kY2hhcnQuZGF0YSgncGluY2hEaXN0U3RhcnQnKTtcclxuICAgICAgICBpZiAoZGlmZiA+IDApIHtcclxuICAgICAgICAgIG9jLnNldENoYXJ0U2NhbGUob2MuJGNoYXJ0LCAxLjIpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZGlmZiA8IDApIHtcclxuICAgICAgICAgIG9jLnNldENoYXJ0U2NhbGUob2MuJGNoYXJ0LCAwLjgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8vXHJcbiAgICBiaW5kWm9vbTogZnVuY3Rpb24gKCkge1xyXG4gICAgICB0aGlzLiRjaGFydENvbnRhaW5lci5vbignd2hlZWwnLCB7ICdvYyc6IHRoaXMgfSwgdGhpcy56b29tV2hlZWxIYW5kbGVyKTtcclxuICAgICAgdGhpcy4kY2hhcnRDb250YWluZXIub24oJ3RvdWNoc3RhcnQnLCB7ICdvYyc6IHRoaXMgfSwgdGhpcy56b29tU3RhcnRIYW5kbGVyKTtcclxuICAgICAgJChkb2N1bWVudCkub24oJ3RvdWNobW92ZScsIHsgJ29jJzogdGhpcyB9LCB0aGlzLnpvb21pbmdIYW5kbGVyKTtcclxuICAgICAgJChkb2N1bWVudCkub24oJ3RvdWNoZW5kJywgeyAnb2MnOiB0aGlzIH0sIHRoaXMuem9vbUVuZEhhbmRsZXIpO1xyXG4gICAgfSxcclxuICAgIHVuYmluZFpvb206IGZ1bmN0aW9uICgpIHtcclxuICAgICAgdGhpcy4kY2hhcnRDb250YWluZXIub2ZmKCd3aGVlbCcsIHRoaXMuem9vbVdoZWVsSGFuZGxlcik7XHJcbiAgICAgIHRoaXMuJGNoYXJ0Q29udGFpbmVyLm9mZigndG91Y2hzdGFydCcsIHRoaXMuem9vbVN0YXJ0SGFuZGxlcik7XHJcbiAgICAgICQoZG9jdW1lbnQpLm9mZigndG91Y2htb3ZlJywgdGhpcy56b29taW5nSGFuZGxlcik7XHJcbiAgICAgICQoZG9jdW1lbnQpLm9mZigndG91Y2hlbmQnLCB0aGlzLnpvb21FbmRIYW5kbGVyKTtcclxuICAgIH0sXHJcbiAgICAvL1xyXG4gICAgZ2V0UGluY2hEaXN0OiBmdW5jdGlvbiAoZSkge1xyXG4gICAgICByZXR1cm4gTWF0aC5zcXJ0KChlLnRvdWNoZXNbMF0uY2xpZW50WCAtIGUudG91Y2hlc1sxXS5jbGllbnRYKSAqIChlLnRvdWNoZXNbMF0uY2xpZW50WCAtIGUudG91Y2hlc1sxXS5jbGllbnRYKSArXHJcbiAgICAgIChlLnRvdWNoZXNbMF0uY2xpZW50WSAtIGUudG91Y2hlc1sxXS5jbGllbnRZKSAqIChlLnRvdWNoZXNbMF0uY2xpZW50WSAtIGUudG91Y2hlc1sxXS5jbGllbnRZKSk7XHJcbiAgICB9LFxyXG4gICAgLy9cclxuICAgIHNldENoYXJ0U2NhbGU6IGZ1bmN0aW9uICgkY2hhcnQsIG5ld1NjYWxlKSB7XHJcbiAgICAgIHZhciBvcHRzID0gJGNoYXJ0LmRhdGEoJ29wdGlvbnMnKTtcclxuICAgICAgdmFyIGxhc3RUZiA9ICRjaGFydC5jc3MoJ3RyYW5zZm9ybScpO1xyXG4gICAgICB2YXIgbWF0cml4ID0gJyc7XHJcbiAgICAgIHZhciB0YXJnZXRTY2FsZSA9IDE7XHJcbiAgICAgIGlmIChsYXN0VGYgPT09ICdub25lJykge1xyXG4gICAgICAgICRjaGFydC5jc3MoJ3RyYW5zZm9ybScsICdzY2FsZSgnICsgbmV3U2NhbGUgKyAnLCcgKyBuZXdTY2FsZSArICcpJyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbWF0cml4ID0gbGFzdFRmLnNwbGl0KCcsJyk7XHJcbiAgICAgICAgaWYgKGxhc3RUZi5pbmRleE9mKCczZCcpID09PSAtMSkge1xyXG4gICAgICAgICAgdGFyZ2V0U2NhbGUgPSBNYXRoLmFicyh3aW5kb3cucGFyc2VGbG9hdChtYXRyaXhbM10pICogbmV3U2NhbGUpO1xyXG4gICAgICAgICAgaWYgKHRhcmdldFNjYWxlID4gb3B0cy56b29tb3V0TGltaXQgJiYgdGFyZ2V0U2NhbGUgPCBvcHRzLnpvb21pbkxpbWl0KSB7XHJcbiAgICAgICAgICAgICRjaGFydC5jc3MoJ3RyYW5zZm9ybScsIGxhc3RUZiArICcgc2NhbGUoJyArIG5ld1NjYWxlICsgJywnICsgbmV3U2NhbGUgKyAnKScpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0YXJnZXRTY2FsZSA9IE1hdGguYWJzKHdpbmRvdy5wYXJzZUZsb2F0KG1hdHJpeFsxXSkgKiBuZXdTY2FsZSk7XHJcbiAgICAgICAgICBpZiAodGFyZ2V0U2NhbGUgPiBvcHRzLnpvb21vdXRMaW1pdCAmJiB0YXJnZXRTY2FsZSA8IG9wdHMuem9vbWluTGltaXQpIHtcclxuICAgICAgICAgICAgJGNoYXJ0LmNzcygndHJhbnNmb3JtJywgbGFzdFRmICsgJyBzY2FsZTNkKCcgKyBuZXdTY2FsZSArICcsJyArIG5ld1NjYWxlICsgJywgMSknKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvL1xyXG4gICAgYnVpbGRKc29uRFM6IGZ1bmN0aW9uICgkbGkpIHtcclxuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICB2YXIgc3ViT2JqID0ge1xyXG4gICAgICAgICduYW1lJzogJGxpLmNvbnRlbnRzKCkuZXEoMCkudGV4dCgpLnRyaW0oKSxcclxuICAgICAgICAncmVsYXRpb25zaGlwJzogKCRsaS5wYXJlbnQoKS5wYXJlbnQoKS5pcygnbGknKSA/ICcxJzogJzAnKSArICgkbGkuc2libGluZ3MoJ2xpJykubGVuZ3RoID8gMTogMCkgKyAoJGxpLmNoaWxkcmVuKCd1bCcpLmxlbmd0aCA/IDEgOiAwKVxyXG4gICAgICB9O1xyXG4gICAgICBpZiAoJGxpLmF0dHIoJ2RhdGEtaWQnKSkge1xyXG4gICAgICAgIHN1Yk9iai5pZCA9ICRsaS5hdHRyKCdkYXRhLWlkJyk7XHJcbiAgICAgIH1cclxuICAgICAgJGxpLmNoaWxkcmVuKCd1bCcpLmNoaWxkcmVuKCkuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoIXN1Yk9iai5jaGlsZHJlbikgeyBzdWJPYmouY2hpbGRyZW4gPSBbXTsgfVxyXG4gICAgICAgIHN1Yk9iai5jaGlsZHJlbi5wdXNoKHRoYXQuYnVpbGRKc29uRFMoJCh0aGlzKSkpO1xyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIHN1Yk9iajtcclxuICAgIH0sXHJcbiAgICAvL1xyXG4gICAgYXR0YWNoUmVsOiBmdW5jdGlvbiAoZGF0YSwgZmxhZ3MpIHtcclxuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICBkYXRhLnJlbGF0aW9uc2hpcCA9IGZsYWdzICsgKGRhdGEuY2hpbGRyZW4gJiYgZGF0YS5jaGlsZHJlbi5sZW5ndGggPiAwID8gMSA6IDApO1xyXG4gICAgICBpZiAoZGF0YS5jaGlsZHJlbikge1xyXG4gICAgICAgIGRhdGEuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XHJcbiAgICAgICAgICB0aGF0LmF0dGFjaFJlbChpdGVtLCAnMScgKyAoZGF0YS5jaGlsZHJlbi5sZW5ndGggPiAxID8gMSA6IDApKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZGF0YTtcclxuICAgIH0sXHJcbiAgICAvL1xyXG4gICAgbG9vcENoYXJ0OiBmdW5jdGlvbiAoJGNoYXJ0KSB7XHJcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgdmFyICR0ciA9ICRjaGFydC5maW5kKCd0cjpmaXJzdCcpO1xyXG4gICAgICB2YXIgc3ViT2JqID0geyAnaWQnOiAkdHIuZmluZCgnLm5vZGUnKVswXS5pZCB9O1xyXG4gICAgICAkdHIuc2libGluZ3MoJzpsYXN0JykuY2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmICghc3ViT2JqLmNoaWxkcmVuKSB7IHN1Yk9iai5jaGlsZHJlbiA9IFtdOyB9XHJcbiAgICAgICAgc3ViT2JqLmNoaWxkcmVuLnB1c2godGhhdC5sb29wQ2hhcnQoJCh0aGlzKSkpO1xyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIHN1Yk9iajtcclxuICAgIH0sXHJcbiAgICAvL1xyXG4gICAgZ2V0SGllcmFyY2h5OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGlmICh0eXBlb2YgdGhpcy4kY2hhcnQgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuICdFcnJvcjogb3JnY2hhcnQgZG9lcyBub3QgZXhpc3QnXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLiRjaGFydC5maW5kKCcubm9kZScpLmxlbmd0aCkge1xyXG4gICAgICAgICAgcmV0dXJuICdFcnJvcjogbm9kZXMgZG8gbm90IGV4aXN0J1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB2YXIgdmFsaWQgPSB0cnVlO1xyXG4gICAgICAgICAgdGhpcy4kY2hhcnQuZmluZCgnLm5vZGUnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmlkKSB7XHJcbiAgICAgICAgICAgICAgdmFsaWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgaWYgKCF2YWxpZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJ0Vycm9yOiBBbGwgbm9kZXMgb2Ygb3JnaGNhcnQgdG8gYmUgZXhwb3J0ZWQgbXVzdCBoYXZlIGRhdGEtaWQgYXR0cmlidXRlISc7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0aGlzLmxvb3BDaGFydCh0aGlzLiRjaGFydCk7XHJcbiAgICB9LFxyXG4gICAgLy8gZGV0ZWN0IHRoZSBleGlzdC9kaXNwbGF5IHN0YXRlIG9mIHJlbGF0ZWQgbm9kZVxyXG4gICAgZ2V0Tm9kZVN0YXRlOiBmdW5jdGlvbiAoJG5vZGUsIHJlbGF0aW9uKSB7XHJcbiAgICAgIHZhciAkdGFyZ2V0ID0ge307XHJcbiAgICAgIHZhciByZWxhdGlvbiA9IHJlbGF0aW9uIHx8ICdzZWxmJztcclxuICAgICAgaWYgKHJlbGF0aW9uID09PSAncGFyZW50Jykge1xyXG4gICAgICAgICR0YXJnZXQgPSAkbm9kZS5jbG9zZXN0KCcubm9kZXMnKS5zaWJsaW5ncygnOmZpcnN0Jyk7XHJcbiAgICAgICAgaWYgKCR0YXJnZXQubGVuZ3RoKSB7XHJcbiAgICAgICAgICBpZiAoJHRhcmdldC5pcygnLmhpZGRlbicpIHx8ICghJHRhcmdldC5pcygnLmhpZGRlbicpICYmICR0YXJnZXQuY2xvc2VzdCgnLm5vZGVzJykuaXMoJy5oaWRkZW4nKSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgJ2V4aXN0JzogdHJ1ZSwgJ3Zpc2libGUnOiBmYWxzZSB9O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIHsgJ2V4aXN0JzogdHJ1ZSwgJ3Zpc2libGUnOiB0cnVlIH07XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2UgaWYgKHJlbGF0aW9uID09PSAnY2hpbGRyZW4nKSB7XHJcbiAgICAgICAgJHRhcmdldCA9ICRub2RlLmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoJzpsYXN0Jyk7XHJcbiAgICAgICAgaWYgKCR0YXJnZXQubGVuZ3RoKSB7XHJcbiAgICAgICAgICBpZiAoISR0YXJnZXQuaXMoJy5oaWRkZW4nKSkge1xyXG4gICAgICAgICAgICByZXR1cm4geyAnZXhpc3QnOiB0cnVlLCAndmlzaWJsZSc6IHRydWUgfTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiB7ICdleGlzdCc6IHRydWUsICd2aXNpYmxlJzogZmFsc2UgfTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSBpZiAocmVsYXRpb24gPT09ICdzaWJsaW5ncycpIHtcclxuICAgICAgICAkdGFyZ2V0ID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5zaWJsaW5ncygpO1xyXG4gICAgICAgIGlmICgkdGFyZ2V0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgaWYgKCEkdGFyZ2V0LmlzKCcuaGlkZGVuJykgJiYgISR0YXJnZXQucGFyZW50KCkuaXMoJy5oaWRkZW4nKSkge1xyXG4gICAgICAgICAgICByZXR1cm4geyAnZXhpc3QnOiB0cnVlLCAndmlzaWJsZSc6IHRydWUgfTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiB7ICdleGlzdCc6IHRydWUsICd2aXNpYmxlJzogZmFsc2UgfTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJHRhcmdldCA9ICRub2RlO1xyXG4gICAgICAgIGlmICgkdGFyZ2V0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgaWYgKCEoKCR0YXJnZXQuY2xvc2VzdCgnLm5vZGVzJykubGVuZ3RoICYmICR0YXJnZXQuY2xvc2VzdCgnLm5vZGVzJykuaXMoJy5oaWRkZW4nKSkgfHxcclxuICAgICAgICAgICAgKCR0YXJnZXQuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5sZW5ndGggJiYgJHRhcmdldC5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLmlzKCcuaGlkZGVuJykpIHx8XHJcbiAgICAgICAgICAgICgkdGFyZ2V0LnBhcmVudCgpLmlzKCdsaScpICYmICgkdGFyZ2V0LmNsb3Nlc3QoJ3VsJykuaXMoJy5oaWRkZW4nKSB8fCAkdGFyZ2V0LmNsb3Nlc3QoJ3ZlcnRpY2FsTm9kZXMnKS5pcygnLmhpZGRlbicpKSlcclxuICAgICAgICAgICkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgJ2V4aXN0JzogdHJ1ZSwgJ3Zpc2libGUnOiB0cnVlIH07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4geyAnZXhpc3QnOiB0cnVlLCAndmlzaWJsZSc6IGZhbHNlIH07XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB7ICdleGlzdCc6IGZhbHNlLCAndmlzaWJsZSc6IGZhbHNlIH07XHJcbiAgICB9LFxyXG4gICAgLy8gZmluZCB0aGUgcmVsYXRlZCBub2Rlc1xyXG4gICAgZ2V0UmVsYXRlZE5vZGVzOiBmdW5jdGlvbiAoJG5vZGUsIHJlbGF0aW9uKSB7XHJcbiAgICAgIGlmICghJG5vZGUgfHwgISgkbm9kZSBpbnN0YW5jZW9mICQpIHx8ICEkbm9kZS5pcygnLm5vZGUnKSkge1xyXG4gICAgICAgIHJldHVybiAkKCk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHJlbGF0aW9uID09PSAncGFyZW50Jykge1xyXG4gICAgICAgIHJldHVybiAkbm9kZS5jbG9zZXN0KCcubm9kZXMnKS5wYXJlbnQoKS5jaGlsZHJlbignOmZpcnN0JykuZmluZCgnLm5vZGUnKTtcclxuICAgICAgfSBlbHNlIGlmIChyZWxhdGlvbiA9PT0gJ2NoaWxkcmVuJykge1xyXG4gICAgICAgIHJldHVybiAkbm9kZS5jbG9zZXN0KCd0cicpLnNpYmxpbmdzKCcubm9kZXMnKS5jaGlsZHJlbigpLmZpbmQoJy5ub2RlOmZpcnN0Jyk7XHJcbiAgICAgIH0gZWxzZSBpZiAocmVsYXRpb24gPT09ICdzaWJsaW5ncycpIHtcclxuICAgICAgICByZXR1cm4gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5zaWJsaW5ncygpLmZpbmQoJy5ub2RlOmZpcnN0Jyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuICQoKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIGhpZGVQYXJlbnRFbmQ6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAkKGV2ZW50LnRhcmdldCkucmVtb3ZlQ2xhc3MoJ3NsaWRpbmcnKTtcclxuICAgICAgZXZlbnQuZGF0YS51cHBlckxldmVsLmFkZENsYXNzKCdoaWRkZW4nKS5zbGljZSgxKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xyXG4gICAgfSxcclxuICAgIC8vIHJlY3Vyc2l2ZWx5IGhpZGUgdGhlIGFuY2VzdG9yIG5vZGUgYW5kIHNpYmxpbmcgbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlXHJcbiAgICBoaWRlUGFyZW50OiBmdW5jdGlvbiAoJG5vZGUpIHtcclxuICAgICAgdmFyICR1cHBlckxldmVsID0gJG5vZGUuY2xvc2VzdCgnLm5vZGVzJykuc2libGluZ3MoKTtcclxuICAgICAgaWYgKCR1cHBlckxldmVsLmVxKDApLmZpbmQoJy5zcGlubmVyJykubGVuZ3RoKSB7XHJcbiAgICAgICAgJG5vZGUuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuZGF0YSgnaW5BamF4JywgZmFsc2UpO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIGhpZGUgdGhlIHNpYmxpbmcgbm9kZXNcclxuICAgICAgaWYgKHRoaXMuZ2V0Tm9kZVN0YXRlKCRub2RlLCAnc2libGluZ3MnKS52aXNpYmxlKSB7XHJcbiAgICAgICAgdGhpcy5oaWRlU2libGluZ3MoJG5vZGUpO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIGhpZGUgdGhlIGxpbmVzXHJcbiAgICAgIHZhciAkbGluZXMgPSAkdXBwZXJMZXZlbC5zbGljZSgxKTtcclxuICAgICAgJGxpbmVzLmNzcygndmlzaWJpbGl0eScsICdoaWRkZW4nKTtcclxuICAgICAgLy8gaGlkZSB0aGUgc3VwZXJpb3Igbm9kZXMgd2l0aCB0cmFuc2l0aW9uXHJcbiAgICAgIHZhciAkcGFyZW50ID0gJHVwcGVyTGV2ZWwuZXEoMCkuZmluZCgnLm5vZGUnKTtcclxuICAgICAgaWYgKHRoaXMuZ2V0Tm9kZVN0YXRlKCRwYXJlbnQpLnZpc2libGUpIHtcclxuICAgICAgICAkcGFyZW50LmFkZENsYXNzKCdzbGlkaW5nIHNsaWRlLWRvd24nKS5vbmUoJ3RyYW5zaXRpb25lbmQnLCB7ICd1cHBlckxldmVsJzogJHVwcGVyTGV2ZWwgfSwgdGhpcy5oaWRlUGFyZW50RW5kKTtcclxuICAgICAgfVxyXG4gICAgICAvLyBpZiB0aGUgY3VycmVudCBub2RlIGhhcyB0aGUgcGFyZW50IG5vZGUsIGhpZGUgaXQgcmVjdXJzaXZlbHlcclxuICAgICAgaWYgKHRoaXMuZ2V0Tm9kZVN0YXRlKCRwYXJlbnQsICdwYXJlbnQnKS52aXNpYmxlKSB7XHJcbiAgICAgICAgdGhpcy5oaWRlUGFyZW50KCRwYXJlbnQpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgc2hvd1BhcmVudEVuZDogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgIHZhciAkbm9kZSA9IGV2ZW50LmRhdGEubm9kZTtcclxuICAgICAgJChldmVudC50YXJnZXQpLnJlbW92ZUNsYXNzKCdzbGlkaW5nJyk7XHJcbiAgICAgIGlmICh0aGlzLmlzSW5BY3Rpb24oJG5vZGUpKSB7XHJcbiAgICAgICAgdGhpcy5zd2l0Y2hWZXJ0aWNhbEFycm93KCRub2RlLmNoaWxkcmVuKCcudG9wRWRnZScpKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8vIHNob3cgdGhlIHBhcmVudCBub2RlIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxyXG4gICAgc2hvd1BhcmVudDogZnVuY3Rpb24gKCRub2RlKSB7XHJcbiAgICAgIC8vIGp1c3Qgc2hvdyBvbmx5IG9uZSBzdXBlcmlvciBsZXZlbFxyXG4gICAgICB2YXIgJHVwcGVyTGV2ZWwgPSAkbm9kZS5jbG9zZXN0KCcubm9kZXMnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcclxuICAgICAgLy8ganVzdCBzaG93IG9ubHkgb25lIGxpbmVcclxuICAgICAgJHVwcGVyTGV2ZWwuZXEoMikuY2hpbGRyZW4oKS5zbGljZSgxLCAtMSkuYWRkQ2xhc3MoJ2hpZGRlbicpO1xyXG4gICAgICAvLyBzaG93IHBhcmVudCBub2RlIHdpdGggYW5pbWF0aW9uXHJcbiAgICAgIHZhciAkcGFyZW50ID0gJHVwcGVyTGV2ZWwuZXEoMCkuZmluZCgnLm5vZGUnKTtcclxuICAgICAgdGhpcy5yZXBhaW50KCRwYXJlbnRbMF0pO1xyXG4gICAgICAkcGFyZW50LmFkZENsYXNzKCdzbGlkaW5nJykucmVtb3ZlQ2xhc3MoJ3NsaWRlLWRvd24nKS5vbmUoJ3RyYW5zaXRpb25lbmQnLCB7ICdub2RlJzogJG5vZGUgfSwgdGhpcy5zaG93UGFyZW50RW5kLmJpbmQodGhpcykpO1xyXG4gICAgfSxcclxuICAgIHN0b3BBamF4OiBmdW5jdGlvbiAoJG5vZGVMZXZlbCkge1xyXG4gICAgICBpZiAoJG5vZGVMZXZlbC5maW5kKCcuc3Bpbm5lcicpLmxlbmd0aCkge1xyXG4gICAgICAgICRub2RlTGV2ZWwuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuZGF0YSgnaW5BamF4JywgZmFsc2UpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgaXNWaXNpYmxlTm9kZTogZnVuY3Rpb24gKGluZGV4LCBlbGVtKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmdldE5vZGVTdGF0ZSgkKGVsZW0pKS52aXNpYmxlO1xyXG4gICAgfSxcclxuICAgIC8vXHJcbiAgICBoaWRlQ2hpbGRyZW5FbmQ6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICBldmVudC5kYXRhLmFuaW1hdGVkTm9kZXMucmVtb3ZlQ2xhc3MoJ3NsaWRpbmcnKTtcclxuICAgICAgaWYgKGV2ZW50LmRhdGEuaXNWZXJ0aWNhbERlc2MpIHtcclxuICAgICAgICBldmVudC5kYXRhLmxvd2VyTGV2ZWwuYWRkQ2xhc3MoJ2hpZGRlbicpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGV2ZW50LmRhdGEuYW5pbWF0ZWROb2Rlcy5jbG9zZXN0KCd0YWJsZScpLmNsb3Nlc3QoJ3RyJykucHJldkFsbCgnLmxpbmVzJykucmVtb3ZlQXR0cignc3R5bGUnKS5hZGRDbGFzcygnaGlkZGVuJylcclxuICAgICAgICAgIC5zaWJsaW5ncygnLm5vZGVzJykuYWRkQ2xhc3MoJ2hpZGRlbicpO1xyXG4gICAgICAgIGV2ZW50LmRhdGEubG93ZXJMZXZlbC5sYXN0KCkuZmluZCgnLnZlcnRpY2FsTm9kZXMnKS5hZGRDbGFzcygnaGlkZGVuJyk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMuaXNJbkFjdGlvbihldmVudC5kYXRhLm5vZGUpKSB7XHJcbiAgICAgICAgdGhpcy5zd2l0Y2hWZXJ0aWNhbEFycm93KGV2ZW50LmRhdGEubm9kZS5jaGlsZHJlbignLmJvdHRvbUVkZ2UnKSk7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvLyByZWN1cnNpdmVseSBoaWRlIHRoZSBkZXNjZW5kYW50IG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxyXG4gICAgaGlkZUNoaWxkcmVuOiBmdW5jdGlvbiAoJG5vZGUpIHtcclxuICAgICAgdmFyICRsb3dlckxldmVsID0gJG5vZGUuY2xvc2VzdCgndHInKS5zaWJsaW5ncygpO1xyXG4gICAgICB0aGlzLnN0b3BBamF4KCRsb3dlckxldmVsLmxhc3QoKSk7XHJcbiAgICAgIHZhciAkYW5pbWF0ZWROb2RlcyA9ICRsb3dlckxldmVsLmxhc3QoKS5maW5kKCcubm9kZScpLmZpbHRlcih0aGlzLmlzVmlzaWJsZU5vZGUuYmluZCh0aGlzKSk7XHJcbiAgICAgIHZhciBpc1ZlcnRpY2FsRGVzYyA9ICRsb3dlckxldmVsLmxhc3QoKS5pcygnLnZlcnRpY2FsTm9kZXMnKSA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgaWYgKCFpc1ZlcnRpY2FsRGVzYykge1xyXG4gICAgICAgICRhbmltYXRlZE5vZGVzLmNsb3Nlc3QoJ3RhYmxlJykuY2xvc2VzdCgndHInKS5wcmV2QWxsKCcubGluZXMnKS5jc3MoJ3Zpc2liaWxpdHknLCAnaGlkZGVuJyk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5yZXBhaW50KCRhbmltYXRlZE5vZGVzLmdldCgwKSk7XHJcbiAgICAgICRhbmltYXRlZE5vZGVzLmFkZENsYXNzKCdzbGlkaW5nIHNsaWRlLXVwJykuZXEoMCkub25lKCd0cmFuc2l0aW9uZW5kJywgeyAnYW5pbWF0ZWROb2Rlcyc6ICRhbmltYXRlZE5vZGVzLCAnbG93ZXJMZXZlbCc6ICRsb3dlckxldmVsLCAnaXNWZXJ0aWNhbERlc2MnOiBpc1ZlcnRpY2FsRGVzYywgJ25vZGUnOiAkbm9kZSB9LCB0aGlzLmhpZGVDaGlsZHJlbkVuZC5iaW5kKHRoaXMpKTtcclxuICAgIH0sXHJcbiAgICAvL1xyXG4gICAgc2hvd0NoaWxkcmVuRW5kOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgdmFyICRub2RlID0gZXZlbnQuZGF0YS5ub2RlO1xyXG4gICAgICBldmVudC5kYXRhLmFuaW1hdGVkTm9kZXMucmVtb3ZlQ2xhc3MoJ3NsaWRpbmcnKTtcclxuICAgICAgaWYgKHRoaXMuaXNJbkFjdGlvbigkbm9kZSkpIHtcclxuICAgICAgICB0aGlzLnN3aXRjaFZlcnRpY2FsQXJyb3coJG5vZGUuY2hpbGRyZW4oJy5ib3R0b21FZGdlJykpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy8gc2hvdyB0aGUgY2hpbGRyZW4gbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlXHJcbiAgICBzaG93Q2hpbGRyZW46IGZ1bmN0aW9uICgkbm9kZSkge1xyXG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgIHZhciAkbGV2ZWxzID0gJG5vZGUuY2xvc2VzdCgndHInKS5zaWJsaW5ncygpO1xyXG4gICAgICB2YXIgaXNWZXJ0aWNhbERlc2MgPSAkbGV2ZWxzLmlzKCcudmVydGljYWxOb2RlcycpID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICB2YXIgJGFuaW1hdGVkTm9kZXMgPSBpc1ZlcnRpY2FsRGVzY1xyXG4gICAgICAgID8gJGxldmVscy5yZW1vdmVDbGFzcygnaGlkZGVuJykuZmluZCgnLm5vZGUnKS5maWx0ZXIodGhpcy5pc1Zpc2libGVOb2RlLmJpbmQodGhpcykpXHJcbiAgICAgICAgOiAkbGV2ZWxzLnJlbW92ZUNsYXNzKCdoaWRkZW4nKS5lcSgyKS5jaGlsZHJlbigpLmZpbmQoJy5ub2RlOmZpcnN0JykuZmlsdGVyKHRoaXMuaXNWaXNpYmxlTm9kZS5iaW5kKHRoaXMpKTtcclxuICAgICAgLy8gdGhlIHR3byBmb2xsb3dpbmcgc3RhdGVtZW50cyBhcmUgdXNlZCB0byBlbmZvcmNlIGJyb3dzZXIgdG8gcmVwYWludFxyXG4gICAgICB0aGlzLnJlcGFpbnQoJGFuaW1hdGVkTm9kZXMuZ2V0KDApKTtcclxuICAgICAgJGFuaW1hdGVkTm9kZXMuYWRkQ2xhc3MoJ3NsaWRpbmcnKS5yZW1vdmVDbGFzcygnc2xpZGUtdXAnKS5lcSgwKS5vbmUoJ3RyYW5zaXRpb25lbmQnLCB7ICdub2RlJzogJG5vZGUsICdhbmltYXRlZE5vZGVzJzogJGFuaW1hdGVkTm9kZXMgfSwgdGhpcy5zaG93Q2hpbGRyZW5FbmQuYmluZCh0aGlzKSk7XHJcbiAgICB9LFxyXG4gICAgLy9cclxuICAgIGhpZGVTaWJsaW5nc0VuZDogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgIHZhciAkbm9kZSA9IGV2ZW50LmRhdGEubm9kZTtcclxuICAgICAgdmFyICRub2RlQ29udGFpbmVyID0gZXZlbnQuZGF0YS5ub2RlQ29udGFpbmVyO1xyXG4gICAgICB2YXIgZGlyZWN0aW9uID0gZXZlbnQuZGF0YS5kaXJlY3Rpb247XHJcbiAgICAgIGV2ZW50LmRhdGEubGluZXMucmVtb3ZlQXR0cignc3R5bGUnKTtcclxuICAgICAgdmFyICRzaWJsaW5ncyA9IGRpcmVjdGlvbiA/IChkaXJlY3Rpb24gPT09ICdsZWZ0JyA/ICRub2RlQ29udGFpbmVyLnByZXZBbGwoJzpub3QoLmhpZGRlbiknKSA6ICRub2RlQ29udGFpbmVyLm5leHRBbGwoJzpub3QoLmhpZGRlbiknKSkgOiAkbm9kZUNvbnRhaW5lci5zaWJsaW5ncygpO1xyXG4gICAgICAkbm9kZUNvbnRhaW5lci5jbG9zZXN0KCcubm9kZXMnKS5wcmV2KCkuY2hpbGRyZW4oJzpub3QoLmhpZGRlbiknKVxyXG4gICAgICAgIC5zbGljZSgxLCBkaXJlY3Rpb24gPyAkc2libGluZ3MubGVuZ3RoICogMiArIDEgOiAtMSkuYWRkQ2xhc3MoJ2hpZGRlbicpO1xyXG4gICAgICBldmVudC5kYXRhLmFuaW1hdGVkTm9kZXMucmVtb3ZlQ2xhc3MoJ3NsaWRpbmcnKTtcclxuICAgICAgJHNpYmxpbmdzLmZpbmQoJy5ub2RlOmd0KDApJykuZmlsdGVyKHRoaXMuaXNWaXNpYmxlTm9kZS5iaW5kKHRoaXMpKVxyXG4gICAgICAgIC5yZW1vdmVDbGFzcygnc2xpZGUtbGVmdCBzbGlkZS1yaWdodCcpLmFkZENsYXNzKCdzbGlkZS11cCcpO1xyXG4gICAgICAkc2libGluZ3MuZmluZCgnLmxpbmVzLCAubm9kZXMsIC52ZXJ0aWNhbE5vZGVzJykuYWRkQ2xhc3MoJ2hpZGRlbicpXHJcbiAgICAgICAgLmVuZCgpLmFkZENsYXNzKCdoaWRkZW4nKTtcclxuXHJcbiAgICAgIGlmICh0aGlzLmlzSW5BY3Rpb24oJG5vZGUpKSB7XHJcbiAgICAgICAgdGhpcy5zd2l0Y2hIb3Jpem9udGFsQXJyb3coJG5vZGUpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy8gaGlkZSB0aGUgc2libGluZyBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGVcclxuICAgIGhpZGVTaWJsaW5nczogZnVuY3Rpb24gKCRub2RlLCBkaXJlY3Rpb24pIHtcclxuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICB2YXIgJG5vZGVDb250YWluZXIgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpO1xyXG4gICAgICBpZiAoJG5vZGVDb250YWluZXIuc2libGluZ3MoKS5maW5kKCcuc3Bpbm5lcicpLmxlbmd0aCkge1xyXG4gICAgICAgICRub2RlLmNsb3Nlc3QoJy5vcmdjaGFydCcpLmRhdGEoJ2luQWpheCcsIGZhbHNlKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoZGlyZWN0aW9uKSB7XHJcbiAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ2xlZnQnKSB7XHJcbiAgICAgICAgICAkbm9kZUNvbnRhaW5lci5wcmV2QWxsKCkuZmluZCgnLm5vZGUnKS5maWx0ZXIodGhpcy5pc1Zpc2libGVOb2RlLmJpbmQodGhpcykpLmFkZENsYXNzKCdzbGlkaW5nIHNsaWRlLXJpZ2h0Jyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICRub2RlQ29udGFpbmVyLm5leHRBbGwoKS5maW5kKCcubm9kZScpLmZpbHRlcih0aGlzLmlzVmlzaWJsZU5vZGUuYmluZCh0aGlzKSkuYWRkQ2xhc3MoJ3NsaWRpbmcgc2xpZGUtbGVmdCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAkbm9kZUNvbnRhaW5lci5wcmV2QWxsKCkuZmluZCgnLm5vZGUnKS5maWx0ZXIodGhpcy5pc1Zpc2libGVOb2RlLmJpbmQodGhpcykpLmFkZENsYXNzKCdzbGlkaW5nIHNsaWRlLXJpZ2h0Jyk7XHJcbiAgICAgICAgJG5vZGVDb250YWluZXIubmV4dEFsbCgpLmZpbmQoJy5ub2RlJykuZmlsdGVyKHRoaXMuaXNWaXNpYmxlTm9kZS5iaW5kKHRoaXMpKS5hZGRDbGFzcygnc2xpZGluZyBzbGlkZS1sZWZ0Jyk7XHJcbiAgICAgIH1cclxuICAgICAgdmFyICRhbmltYXRlZE5vZGVzID0gJG5vZGVDb250YWluZXIuc2libGluZ3MoKS5maW5kKCcuc2xpZGluZycpO1xyXG4gICAgICB2YXIgJGxpbmVzID0gJGFuaW1hdGVkTm9kZXMuY2xvc2VzdCgnLm5vZGVzJykucHJldkFsbCgnLmxpbmVzJykuY3NzKCd2aXNpYmlsaXR5JywgJ2hpZGRlbicpO1xyXG4gICAgICAkYW5pbWF0ZWROb2Rlcy5lcSgwKS5vbmUoJ3RyYW5zaXRpb25lbmQnLCB7ICdub2RlJzogJG5vZGUsICdub2RlQ29udGFpbmVyJzogJG5vZGVDb250YWluZXIsICdkaXJlY3Rpb24nOiBkaXJlY3Rpb24sICdhbmltYXRlZE5vZGVzJzogJGFuaW1hdGVkTm9kZXMsICdsaW5lcyc6ICRsaW5lcyB9LCB0aGlzLmhpZGVTaWJsaW5nc0VuZC5iaW5kKHRoaXMpKTtcclxuICAgIH0sXHJcbiAgICAvL1xyXG4gICAgc2hvd1NpYmxpbmdzRW5kOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgdmFyICRub2RlID0gZXZlbnQuZGF0YS5ub2RlO1xyXG4gICAgICBldmVudC5kYXRhLnZpc2libGVOb2Rlcy5yZW1vdmVDbGFzcygnc2xpZGluZycpO1xyXG4gICAgICBpZiAodGhpcy5pc0luQWN0aW9uKCRub2RlKSkge1xyXG4gICAgICAgIHRoaXMuc3dpdGNoSG9yaXpvbnRhbEFycm93KCRub2RlKTtcclxuICAgICAgICAkbm9kZS5jaGlsZHJlbignLnRvcEVkZ2UnKS5yZW1vdmVDbGFzcygnZmEtY2hldnJvbi11cCcpLmFkZENsYXNzKCdmYS1jaGV2cm9uLWRvd24nKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8vXHJcbiAgICBzaG93UmVsYXRlZFBhcmVudEVuZDogZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgJChldmVudC50YXJnZXQpLnJlbW92ZUNsYXNzKCdzbGlkaW5nJyk7XHJcbiAgICB9LFxyXG4gICAgLy8gc2hvdyB0aGUgc2libGluZyBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGVcclxuICAgIHNob3dTaWJsaW5nczogZnVuY3Rpb24gKCRub2RlLCBkaXJlY3Rpb24pIHtcclxuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAvLyBmaXJzdGx5LCBzaG93IHRoZSBzaWJsaW5nIHRkIHRhZ3NcclxuICAgICAgdmFyICRzaWJsaW5ncyA9ICQoKTtcclxuICAgICAgaWYgKGRpcmVjdGlvbikge1xyXG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdsZWZ0Jykge1xyXG4gICAgICAgICAgJHNpYmxpbmdzID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5wcmV2QWxsKCkucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAkc2libGluZ3MgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLm5leHRBbGwoKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICRzaWJsaW5ncyA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XHJcbiAgICAgIH1cclxuICAgICAgLy8gc2Vjb25kbHksIHNob3cgdGhlIGxpbmVzXHJcbiAgICAgIHZhciAkdXBwZXJMZXZlbCA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykuY2xvc2VzdCgndHInKS5zaWJsaW5ncygpO1xyXG4gICAgICBpZiAoZGlyZWN0aW9uKSB7XHJcbiAgICAgICAgJHVwcGVyTGV2ZWwuZXEoMikuY2hpbGRyZW4oJy5oaWRkZW4nKS5zbGljZSgwLCAkc2libGluZ3MubGVuZ3RoICogMikucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICR1cHBlckxldmVsLmVxKDIpLmNoaWxkcmVuKCcuaGlkZGVuJykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIHRoaXJkbHksIGRvIHNvbWUgY2xlYW5pbmcgc3R1ZmZcclxuICAgICAgaWYgKCF0aGlzLmdldE5vZGVTdGF0ZSgkbm9kZSwgJ3BhcmVudCcpLnZpc2libGUpIHtcclxuICAgICAgICAkdXBwZXJMZXZlbC5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XHJcbiAgICAgICAgdmFyIHBhcmVudCA9ICR1cHBlckxldmVsLmZpbmQoJy5ub2RlJylbMF07XHJcbiAgICAgICAgdGhpcy5yZXBhaW50KHBhcmVudCk7XHJcbiAgICAgICAgJChwYXJlbnQpLmFkZENsYXNzKCdzbGlkaW5nJykucmVtb3ZlQ2xhc3MoJ3NsaWRlLWRvd24nKS5vbmUoJ3RyYW5zaXRpb25lbmQnLCB0aGlzLnNob3dSZWxhdGVkUGFyZW50RW5kKTtcclxuICAgICAgfVxyXG4gICAgICAvLyBsYXN0bHksIHNob3cgdGhlIHNpYmxpbmcgbm9kZXMgd2l0aCBhbmltYXRpb25cclxuICAgICAgdmFyICR2aXNpYmxlTm9kZXMgPSAkc2libGluZ3MuZmluZCgnLm5vZGUnKS5maWx0ZXIodGhpcy5pc1Zpc2libGVOb2RlLmJpbmQodGhpcykpO1xyXG4gICAgICB0aGlzLnJlcGFpbnQoJHZpc2libGVOb2Rlcy5nZXQoMCkpO1xyXG4gICAgICAkdmlzaWJsZU5vZGVzLmFkZENsYXNzKCdzbGlkaW5nJykucmVtb3ZlQ2xhc3MoJ3NsaWRlLWxlZnQgc2xpZGUtcmlnaHQnKTtcclxuICAgICAgJHZpc2libGVOb2Rlcy5lcSgwKS5vbmUoJ3RyYW5zaXRpb25lbmQnLCB7ICdub2RlJzogJG5vZGUsICd2aXNpYmxlTm9kZXMnOiAkdmlzaWJsZU5vZGVzIH0sIHRoaXMuc2hvd1NpYmxpbmdzRW5kLmJpbmQodGhpcykpO1xyXG4gICAgfSxcclxuICAgIC8vIHN0YXJ0IHVwIGxvYWRpbmcgc3RhdHVzIGZvciByZXF1ZXN0aW5nIG5ldyBub2Rlc1xyXG4gICAgc3RhcnRMb2FkaW5nOiBmdW5jdGlvbiAoJGVkZ2UpIHtcclxuICAgICAgdmFyICRjaGFydCA9IHRoaXMuJGNoYXJ0O1xyXG4gICAgICBpZiAodHlwZW9mICRjaGFydC5kYXRhKCdpbkFqYXgnKSAhPT0gJ3VuZGVmaW5lZCcgJiYgJGNoYXJ0LmRhdGEoJ2luQWpheCcpID09PSB0cnVlKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAkZWRnZS5hZGRDbGFzcygnaGlkZGVuJyk7XHJcbiAgICAgICRlZGdlLnBhcmVudCgpLmFwcGVuZCgnPGkgY2xhc3M9XCJmYSBmYS1jaXJjbGUtby1ub3RjaCBmYS1zcGluIHNwaW5uZXJcIj48L2k+JylcclxuICAgICAgICAuY2hpbGRyZW4oKS5ub3QoJy5zcGlubmVyJykuY3NzKCdvcGFjaXR5JywgMC4yKTtcclxuICAgICAgJGNoYXJ0LmRhdGEoJ2luQWpheCcsIHRydWUpO1xyXG4gICAgICAkKCcub2MtZXhwb3J0LWJ0bicgKyAodGhpcy5vcHRpb25zLmNoYXJ0Q2xhc3MgIT09ICcnID8gJy4nICsgdGhpcy5vcHRpb25zLmNoYXJ0Q2xhc3MgOiAnJykpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSxcclxuICAgIC8vIHRlcm1pbmF0ZSBsb2FkaW5nIHN0YXR1cyBmb3IgcmVxdWVzdGluZyBuZXcgbm9kZXNcclxuICAgIGVuZExvYWRpbmc6IGZ1bmN0aW9uICgkZWRnZSkge1xyXG4gICAgICB2YXIgJG5vZGUgPSAkZWRnZS5wYXJlbnQoKTtcclxuICAgICAgJGVkZ2UucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xyXG4gICAgICAkbm9kZS5maW5kKCcuc3Bpbm5lcicpLnJlbW92ZSgpO1xyXG4gICAgICAkbm9kZS5jaGlsZHJlbigpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XHJcbiAgICAgIHRoaXMuJGNoYXJ0LmRhdGEoJ2luQWpheCcsIGZhbHNlKTtcclxuICAgICAgJCgnLm9jLWV4cG9ydC1idG4nICsgKHRoaXMub3B0aW9ucy5jaGFydENsYXNzICE9PSAnJyA/ICcuJyArIHRoaXMub3B0aW9ucy5jaGFydENsYXNzIDogJycpKS5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcclxuICAgIH0sXHJcbiAgICAvLyB3aGV0aGVyIHRoZSBjdXJzb3IgaXMgaG92ZXJpbmcgb3ZlciB0aGUgbm9kZVxyXG4gICAgaXNJbkFjdGlvbjogZnVuY3Rpb24gKCRub2RlKSB7XHJcbiAgICAgIHJldHVybiAkbm9kZS5jaGlsZHJlbignLmVkZ2UnKS5hdHRyKCdjbGFzcycpLmluZGV4T2YoJ2ZhLScpID4gLTEgPyB0cnVlIDogZmFsc2U7XHJcbiAgICB9LFxyXG4gICAgLy9cclxuICAgIHN3aXRjaFZlcnRpY2FsQXJyb3c6IGZ1bmN0aW9uICgkYXJyb3cpIHtcclxuICAgICAgJGFycm93LnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLXVwJykudG9nZ2xlQ2xhc3MoJ2ZhLWNoZXZyb24tZG93bicpO1xyXG4gICAgfSxcclxuICAgIC8vXHJcbiAgICBzd2l0Y2hIb3Jpem9udGFsQXJyb3c6IGZ1bmN0aW9uICgkbm9kZSkge1xyXG4gICAgICB2YXIgb3B0cyA9ICRub2RlLmNsb3Nlc3QoJy5vcmdjaGFydCcpLmRhdGEoJ29wdGlvbnMnKTtcclxuICAgICAgaWYgKG9wdHMudG9nZ2xlU2libGluZ3NSZXNwICYmICh0eXBlb2Ygb3B0cy5hamF4VVJMID09PSAndW5kZWZpbmVkJyB8fCAkbm9kZS5jbG9zZXN0KCcubm9kZXMnKS5kYXRhKCdzaWJsaW5nc0xvYWRlZCcpKSkge1xyXG4gICAgICAgIHZhciAkcHJldlNpYiA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkucHJldigpO1xyXG4gICAgICAgIGlmICgkcHJldlNpYi5sZW5ndGgpIHtcclxuICAgICAgICAgIGlmICgkcHJldlNpYi5pcygnLmhpZGRlbicpKSB7XHJcbiAgICAgICAgICAgICRub2RlLmNoaWxkcmVuKCcubGVmdEVkZ2UnKS5hZGRDbGFzcygnZmEtY2hldnJvbi1sZWZ0JykucmVtb3ZlQ2xhc3MoJ2ZhLWNoZXZyb24tcmlnaHQnKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICRub2RlLmNoaWxkcmVuKCcubGVmdEVkZ2UnKS5hZGRDbGFzcygnZmEtY2hldnJvbi1yaWdodCcpLnJlbW92ZUNsYXNzKCdmYS1jaGV2cm9uLWxlZnQnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyICRuZXh0U2liID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5uZXh0KCk7XHJcbiAgICAgICAgaWYgKCRuZXh0U2liLmxlbmd0aCkge1xyXG4gICAgICAgICAgaWYgKCRuZXh0U2liLmlzKCcuaGlkZGVuJykpIHtcclxuICAgICAgICAgICAgJG5vZGUuY2hpbGRyZW4oJy5yaWdodEVkZ2UnKS5hZGRDbGFzcygnZmEtY2hldnJvbi1yaWdodCcpLnJlbW92ZUNsYXNzKCdmYS1jaGV2cm9uLWxlZnQnKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICRub2RlLmNoaWxkcmVuKCcucmlnaHRFZGdlJykuYWRkQ2xhc3MoJ2ZhLWNoZXZyb24tbGVmdCcpLnJlbW92ZUNsYXNzKCdmYS1jaGV2cm9uLXJpZ2h0Jyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhciAkc2licyA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkuc2libGluZ3MoKTtcclxuICAgICAgICB2YXIgc2lic1Zpc2libGUgPSAkc2licy5sZW5ndGggPyAhJHNpYnMuaXMoJy5oaWRkZW4nKSA6IGZhbHNlO1xyXG4gICAgICAgICRub2RlLmNoaWxkcmVuKCcubGVmdEVkZ2UnKS50b2dnbGVDbGFzcygnZmEtY2hldnJvbi1yaWdodCcsIHNpYnNWaXNpYmxlKS50b2dnbGVDbGFzcygnZmEtY2hldnJvbi1sZWZ0JywgIXNpYnNWaXNpYmxlKTtcclxuICAgICAgICAkbm9kZS5jaGlsZHJlbignLnJpZ2h0RWRnZScpLnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLWxlZnQnLCBzaWJzVmlzaWJsZSkudG9nZ2xlQ2xhc3MoJ2ZhLWNoZXZyb24tcmlnaHQnLCAhc2lic1Zpc2libGUpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy9cclxuICAgIHJlcGFpbnQ6IGZ1bmN0aW9uIChub2RlKSB7XHJcbiAgICAgIGlmIChub2RlKSB7XHJcbiAgICAgICAgbm9kZS5zdHlsZS5vZmZzZXRXaWR0aCA9IG5vZGUub2Zmc2V0V2lkdGg7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvL1xyXG4gICAgbm9kZUVudGVyTGVhdmVIYW5kbGVyOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgdmFyICRub2RlID0gJChldmVudC5kZWxlZ2F0ZVRhcmdldCksIGZsYWcgPSBmYWxzZTtcclxuICAgICAgdmFyICR0b3BFZGdlID0gJG5vZGUuY2hpbGRyZW4oJy50b3BFZGdlJyk7XHJcbiAgICAgIHZhciAkcmlnaHRFZGdlID0gJG5vZGUuY2hpbGRyZW4oJy5yaWdodEVkZ2UnKTtcclxuICAgICAgdmFyICRib3R0b21FZGdlID0gJG5vZGUuY2hpbGRyZW4oJy5ib3R0b21FZGdlJyk7XHJcbiAgICAgIHZhciAkbGVmdEVkZ2UgPSAkbm9kZS5jaGlsZHJlbignLmxlZnRFZGdlJyk7XHJcbiAgICAgIGlmIChldmVudC50eXBlID09PSAnbW91c2VlbnRlcicpIHtcclxuICAgICAgICBpZiAoJHRvcEVkZ2UubGVuZ3RoKSB7XHJcbiAgICAgICAgICBmbGFnID0gdGhpcy5nZXROb2RlU3RhdGUoJG5vZGUsICdwYXJlbnQnKS52aXNpYmxlO1xyXG4gICAgICAgICAgJHRvcEVkZ2UudG9nZ2xlQ2xhc3MoJ2ZhLWNoZXZyb24tdXAnLCAhZmxhZykudG9nZ2xlQ2xhc3MoJ2ZhLWNoZXZyb24tZG93bicsIGZsYWcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoJGJvdHRvbUVkZ2UubGVuZ3RoKSB7XHJcbiAgICAgICAgICBmbGFnID0gdGhpcy5nZXROb2RlU3RhdGUoJG5vZGUsICdjaGlsZHJlbicpLnZpc2libGU7XHJcbiAgICAgICAgICAkYm90dG9tRWRnZS50b2dnbGVDbGFzcygnZmEtY2hldnJvbi1kb3duJywgIWZsYWcpLnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLXVwJywgZmxhZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgkbGVmdEVkZ2UubGVuZ3RoKSB7XHJcbiAgICAgICAgICB0aGlzLnN3aXRjaEhvcml6b250YWxBcnJvdygkbm9kZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICRub2RlLmNoaWxkcmVuKCcuZWRnZScpLnJlbW92ZUNsYXNzKCdmYS1jaGV2cm9uLXVwIGZhLWNoZXZyb24tZG93biBmYS1jaGV2cm9uLXJpZ2h0IGZhLWNoZXZyb24tbGVmdCcpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy9cclxuICAgIG5vZGVDbGlja0hhbmRsZXI6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICB0aGlzLiRjaGFydC5maW5kKCcuZm9jdXNlZCcpLnJlbW92ZUNsYXNzKCdmb2N1c2VkJyk7XHJcbiAgICAgICQoZXZlbnQuZGVsZWdhdGVUYXJnZXQpLmFkZENsYXNzKCdmb2N1c2VkJyk7XHJcbiAgICB9LFxyXG4gICAgLy8gbG9hZCBuZXcgbm9kZXMgYnkgYWpheFxyXG4gICAgbG9hZE5vZGVzOiBmdW5jdGlvbiAocmVsLCB1cmwsICRlZGdlKSB7XHJcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgdmFyIG9wdHMgPSB0aGlzLm9wdGlvbnM7XHJcbiAgICAgICQuYWpheCh7ICd1cmwnOiB1cmwsICdkYXRhVHlwZSc6ICdqc29uJyB9KVxyXG4gICAgICAuZG9uZShmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIGlmICh0aGF0LiRjaGFydC5kYXRhKCdpbkFqYXgnKSkge1xyXG4gICAgICAgICAgaWYgKHJlbCA9PT0gJ3BhcmVudCcpIHtcclxuICAgICAgICAgICAgaWYgKCEkLmlzRW1wdHlPYmplY3QoZGF0YSkpIHtcclxuICAgICAgICAgICAgICB0aGF0LmFkZFBhcmVudCgkZWRnZS5wYXJlbnQoKSwgZGF0YSwgb3B0cyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gZWxzZSBpZiAocmVsID09PSAnY2hpbGRyZW4nKSB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLmNoaWxkcmVuLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgIHRoYXQuYWRkQ2hpbGRyZW4oJGVkZ2UucGFyZW50KCksIGRhdGEsICQuZXh0ZW5kKHt9LCBvcHRzLCB7IGRlcHRoOiAwIH0pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGRhdGEuc2libGluZ3MgfHwgZGF0YS5jaGlsZHJlbikge1xyXG4gICAgICAgICAgICAgIHRoYXQuYWRkU2libGluZ3MoJGVkZ2UucGFyZW50KCksIGRhdGEsIG9wdHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICAuZmFpbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0ZhaWxlZCB0byBnZXQgJyArIHJlbCArICcgZGF0YScpO1xyXG4gICAgICB9KVxyXG4gICAgICAuYWx3YXlzKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGF0LmVuZExvYWRpbmcoJGVkZ2UpO1xyXG4gICAgICB9KTtcclxuICAgIH0sXHJcbiAgICAvL1xyXG4gICAgSGlkZUZpcnN0UGFyZW50RW5kOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgdmFyICR0b3BFZGdlID0gZXZlbnQuZGF0YS50b3BFZGdlO1xyXG4gICAgICB2YXIgJG5vZGUgPSAkdG9wRWRnZS5wYXJlbnQoKTtcclxuICAgICAgaWYgKHRoaXMuaXNJbkFjdGlvbigkbm9kZSkpIHtcclxuICAgICAgICB0aGlzLnN3aXRjaFZlcnRpY2FsQXJyb3coJHRvcEVkZ2UpO1xyXG4gICAgICAgIHRoaXMuc3dpdGNoSG9yaXpvbnRhbEFycm93KCRub2RlKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8vXHJcbiAgICB0b3BFZGdlQ2xpY2tIYW5kbGVyOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgdmFyICR0b3BFZGdlID0gJChldmVudC50YXJnZXQpO1xyXG4gICAgICB2YXIgJG5vZGUgPSAkKGV2ZW50LmRlbGVnYXRlVGFyZ2V0KTtcclxuICAgICAgdmFyIHBhcmVudFN0YXRlID0gdGhpcy5nZXROb2RlU3RhdGUoJG5vZGUsICdwYXJlbnQnKTtcclxuICAgICAgaWYgKHBhcmVudFN0YXRlLmV4aXN0KSB7XHJcbiAgICAgICAgdmFyICRwYXJlbnQgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoJzpmaXJzdCcpLmZpbmQoJy5ub2RlJyk7XHJcbiAgICAgICAgaWYgKCRwYXJlbnQuaXMoJy5zbGlkaW5nJykpIHsgcmV0dXJuOyB9XHJcbiAgICAgICAgLy8gaGlkZSB0aGUgYW5jZXN0b3Igbm9kZXMgYW5kIHNpYmxpbmcgbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlXHJcbiAgICAgICAgaWYgKHBhcmVudFN0YXRlLnZpc2libGUpIHtcclxuICAgICAgICAgIHRoaXMuaGlkZVBhcmVudCgkbm9kZSk7XHJcbiAgICAgICAgICAkcGFyZW50Lm9uZSgndHJhbnNpdGlvbmVuZCcsIHsgJ3RvcEVkZ2UnOiAkdG9wRWRnZSB9LCB0aGlzLkhpZGVGaXJzdFBhcmVudEVuZC5iaW5kKHRoaXMpKTtcclxuICAgICAgICB9IGVsc2UgeyAvLyBzaG93IHRoZSBhbmNlc3RvcnMgYW5kIHNpYmxpbmdzXHJcbiAgICAgICAgICB0aGlzLnNob3dQYXJlbnQoJG5vZGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHsgLy8gbG9hZCB0aGUgbmV3IHBhcmVudCBub2RlIG9mIHRoZSBzcGVjaWZpZWQgbm9kZSBieSBhamF4IHJlcXVlc3RcclxuICAgICAgICAvLyBzdGFydCB1cCBsb2FkaW5nIHN0YXR1c1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXJ0TG9hZGluZygkdG9wRWRnZSkpIHtcclxuICAgICAgICAgIHZhciBvcHRzID0gdGhpcy5vcHRpb25zO1xyXG4gICAgICAgICAgdmFyIHVybCA9ICQuaXNGdW5jdGlvbihvcHRzLmFqYXhVUkwucGFyZW50KSA/IG9wdHMuYWpheFVSTC5wYXJlbnQoZXZlbnQuZGF0YS5ub2RlRGF0YSkgOiBvcHRzLmFqYXhVUkwucGFyZW50ICsgJG5vZGVbMF0uaWQ7XHJcbiAgICAgICAgICB0aGlzLmxvYWROb2RlcygncGFyZW50JywgdXJsLCAkdG9wRWRnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy9cclxuICAgIGJvdHRvbUVkZ2VDbGlja0hhbmRsZXI6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgdmFyICRib3R0b21FZGdlID0gJChldmVudC50YXJnZXQpO1xyXG4gICAgICB2YXIgJG5vZGUgPSAkKGV2ZW50LmRlbGVnYXRlVGFyZ2V0KTtcclxuICAgICAgdmFyIGNoaWxkcmVuU3RhdGUgPSB0aGlzLmdldE5vZGVTdGF0ZSgkbm9kZSwgJ2NoaWxkcmVuJyk7XHJcbiAgICAgIGlmIChjaGlsZHJlblN0YXRlLmV4aXN0KSB7XHJcbiAgICAgICAgdmFyICRjaGlsZHJlbiA9ICRub2RlLmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoJzpsYXN0Jyk7XHJcbiAgICAgICAgaWYgKCRjaGlsZHJlbi5maW5kKCcuc2xpZGluZycpLmxlbmd0aCkgeyByZXR1cm47IH1cclxuICAgICAgICAvLyBoaWRlIHRoZSBkZXNjZW5kYW50IG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxyXG4gICAgICAgIGlmIChjaGlsZHJlblN0YXRlLnZpc2libGUpIHtcclxuICAgICAgICAgIHRoaXMuaGlkZUNoaWxkcmVuKCRub2RlKTtcclxuICAgICAgICB9IGVsc2UgeyAvLyBzaG93IHRoZSBkZXNjZW5kYW50c1xyXG4gICAgICAgICAgdGhpcy5zaG93Q2hpbGRyZW4oJG5vZGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHsgLy8gbG9hZCB0aGUgbmV3IGNoaWxkcmVuIG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZSBieSBhamF4IHJlcXVlc3RcclxuICAgICAgICBpZiAodGhpcy5zdGFydExvYWRpbmcoJGJvdHRvbUVkZ2UpKSB7XHJcbiAgICAgICAgICB2YXIgb3B0cyA9IHRoaXMub3B0aW9ucztcclxuICAgICAgICAgIHZhciB1cmwgPSAkLmlzRnVuY3Rpb24ob3B0cy5hamF4VVJMLmNoaWxkcmVuKSA/IG9wdHMuYWpheFVSTC5jaGlsZHJlbihldmVudC5kYXRhLm5vZGVEYXRhKSA6IG9wdHMuYWpheFVSTC5jaGlsZHJlbiArICRub2RlWzBdLmlkO1xyXG4gICAgICAgICAgdGhpcy5sb2FkTm9kZXMoJ2NoaWxkcmVuJywgdXJsLCAkYm90dG9tRWRnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy9cclxuICAgIGhFZGdlQ2xpY2tIYW5kbGVyOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgIHZhciAkaEVkZ2UgPSAkKGV2ZW50LnRhcmdldCk7XHJcbiAgICAgIHZhciAkbm9kZSA9ICQoZXZlbnQuZGVsZWdhdGVUYXJnZXQpO1xyXG4gICAgICB2YXIgb3B0cyA9IHRoaXMub3B0aW9ucztcclxuICAgICAgdmFyIHNpYmxpbmdzU3RhdGUgPSB0aGlzLmdldE5vZGVTdGF0ZSgkbm9kZSwgJ3NpYmxpbmdzJyk7XHJcbiAgICAgIGlmIChzaWJsaW5nc1N0YXRlLmV4aXN0KSB7XHJcbiAgICAgICAgdmFyICRzaWJsaW5ncyA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkuc2libGluZ3MoKTtcclxuICAgICAgICBpZiAoJHNpYmxpbmdzLmZpbmQoJy5zbGlkaW5nJykubGVuZ3RoKSB7IHJldHVybjsgfVxyXG4gICAgICAgIGlmIChvcHRzLnRvZ2dsZVNpYmxpbmdzUmVzcCkge1xyXG4gICAgICAgICAgdmFyICRwcmV2U2liID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5wcmV2KCk7XHJcbiAgICAgICAgICB2YXIgJG5leHRTaWIgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLm5leHQoKTtcclxuICAgICAgICAgIGlmICgkaEVkZ2UuaXMoJy5sZWZ0RWRnZScpKSB7XHJcbiAgICAgICAgICAgIGlmICgkcHJldlNpYi5pcygnLmhpZGRlbicpKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5zaG93U2libGluZ3MoJG5vZGUsICdsZWZ0Jyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5oaWRlU2libGluZ3MoJG5vZGUsICdsZWZ0Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICgkbmV4dFNpYi5pcygnLmhpZGRlbicpKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5zaG93U2libGluZ3MoJG5vZGUsICdyaWdodCcpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHRoaXMuaGlkZVNpYmxpbmdzKCRub2RlLCAncmlnaHQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpZiAoc2libGluZ3NTdGF0ZS52aXNpYmxlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZVNpYmxpbmdzKCRub2RlKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd1NpYmxpbmdzKCRub2RlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gbG9hZCB0aGUgbmV3IHNpYmxpbmcgbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlIGJ5IGFqYXggcmVxdWVzdFxyXG4gICAgICAgIGlmICh0aGlzLnN0YXJ0TG9hZGluZygkaEVkZ2UpKSB7XHJcbiAgICAgICAgICB2YXIgbm9kZUlkID0gJG5vZGVbMF0uaWQ7XHJcbiAgICAgICAgICB2YXIgdXJsID0gKHRoaXMuZ2V0Tm9kZVN0YXRlKCRub2RlLCAncGFyZW50JykuZXhpc3QpID9cclxuICAgICAgICAgICAgKCQuaXNGdW5jdGlvbihvcHRzLmFqYXhVUkwuc2libGluZ3MpID8gb3B0cy5hamF4VVJMLnNpYmxpbmdzKGV2ZW50LmRhdGEubm9kZURhdGEpIDogb3B0cy5hamF4VVJMLnNpYmxpbmdzICsgbm9kZUlkKSA6XHJcbiAgICAgICAgICAgICgkLmlzRnVuY3Rpb24ob3B0cy5hamF4VVJMLmZhbWlsaWVzKSA/IG9wdHMuYWpheFVSTC5mYW1pbGllcyhldmVudC5kYXRhLm5vZGVEYXRhKSA6IG9wdHMuYWpheFVSTC5mYW1pbGllcyArIG5vZGVJZCk7XHJcbiAgICAgICAgICB0aGlzLmxvYWROb2Rlcygnc2libGluZ3MnLCB1cmwsICRoRWRnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy9cclxuICAgIGV4cGFuZFZOb2Rlc0VuZDogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgIGV2ZW50LmRhdGEudk5vZGVzLnJlbW92ZUNsYXNzKCdzbGlkaW5nJyk7XHJcbiAgICB9LFxyXG4gICAgLy9cclxuICAgIGNvbGxhcHNlVk5vZGVzRW5kOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgZXZlbnQuZGF0YS52Tm9kZXMucmVtb3ZlQ2xhc3MoJ3NsaWRpbmcnKS5jbG9zZXN0KCd1bCcpLmFkZENsYXNzKCdoaWRkZW4nKTtcclxuICAgIH0sXHJcbiAgICAvLyBldmVudCBoYW5kbGVyIGZvciB0b2dnbGUgYnV0dG9ucyBpbiBIeWJyaWQoaG9yaXpvbnRhbCArIHZlcnRpY2FsKSBPcmdDaGFydFxyXG4gICAgdG9nZ2xlVk5vZGVzOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgdmFyICR0b2dnbGVCdG4gPSAkKGV2ZW50LnRhcmdldCk7XHJcbiAgICAgIHZhciAkZGVzY1dyYXBwZXIgPSAkdG9nZ2xlQnRuLnBhcmVudCgpLm5leHQoKTtcclxuICAgICAgdmFyICRkZXNjZW5kYW50cyA9ICRkZXNjV3JhcHBlci5maW5kKCcubm9kZScpO1xyXG4gICAgICB2YXIgJGNoaWxkcmVuID0gJGRlc2NXcmFwcGVyLmNoaWxkcmVuKCkuY2hpbGRyZW4oJy5ub2RlJyk7XHJcbiAgICAgIGlmICgkY2hpbGRyZW4uaXMoJy5zbGlkaW5nJykpIHsgcmV0dXJuOyB9XHJcbiAgICAgICR0b2dnbGVCdG4udG9nZ2xlQ2xhc3MoJ2ZhLXBsdXMtc3F1YXJlIGZhLW1pbnVzLXNxdWFyZScpO1xyXG4gICAgICBpZiAoJGRlc2NlbmRhbnRzLmVxKDApLmlzKCcuc2xpZGUtdXAnKSkge1xyXG4gICAgICAgICRkZXNjV3JhcHBlci5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XHJcbiAgICAgICAgdGhpcy5yZXBhaW50KCRjaGlsZHJlbi5nZXQoMCkpO1xyXG4gICAgICAgICRjaGlsZHJlbi5hZGRDbGFzcygnc2xpZGluZycpLnJlbW92ZUNsYXNzKCdzbGlkZS11cCcpLmVxKDApLm9uZSgndHJhbnNpdGlvbmVuZCcsIHsgJ3ZOb2Rlcyc6ICRjaGlsZHJlbiB9LCB0aGlzLmV4cGFuZFZOb2Rlc0VuZCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJGRlc2NlbmRhbnRzLmFkZENsYXNzKCdzbGlkaW5nIHNsaWRlLXVwJykuZXEoMCkub25lKCd0cmFuc2l0aW9uZW5kJywgeyAndk5vZGVzJzogJGRlc2NlbmRhbnRzIH0sIHRoaXMuY29sbGFwc2VWTm9kZXNFbmQpO1xyXG4gICAgICAgICRkZXNjZW5kYW50cy5maW5kKCcudG9nZ2xlQnRuJykucmVtb3ZlQ2xhc3MoJ2ZhLW1pbnVzLXNxdWFyZScpLmFkZENsYXNzKCdmYS1wbHVzLXNxdWFyZScpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy9cclxuICAgIGNyZWF0ZUdob3N0Tm9kZTogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgIHZhciAkbm9kZURpdiA9ICQoZXZlbnQudGFyZ2V0KTtcclxuICAgICAgdmFyIG9wdHMgPSB0aGlzLm9wdGlvbnM7XHJcbiAgICAgIHZhciBvcmlnRXZlbnQgPSBldmVudC5vcmlnaW5hbEV2ZW50O1xyXG4gICAgICB2YXIgaXNGaXJlZm94ID0gL2ZpcmVmb3gvLnRlc3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSk7XHJcbiAgICAgIGlmIChpc0ZpcmVmb3gpIHtcclxuICAgICAgICBvcmlnRXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvaHRtbCcsICdoYWNrIGZvciBmaXJlZm94Jyk7XHJcbiAgICAgIH1cclxuICAgICAgdmFyIGdob3N0Tm9kZSwgbm9kZUNvdmVyO1xyXG4gICAgICBpZiAoIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5naG9zdC1ub2RlJykpIHtcclxuICAgICAgICBnaG9zdE5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInN2Z1wiKTtcclxuICAgICAgICBnaG9zdE5vZGUuY2xhc3NMaXN0LmFkZCgnZ2hvc3Qtbm9kZScpO1xyXG4gICAgICAgIG5vZGVDb3ZlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCdyZWN0Jyk7XHJcbiAgICAgICAgZ2hvc3ROb2RlLmFwcGVuZENoaWxkKG5vZGVDb3Zlcik7XHJcbiAgICAgICAgJG5vZGVEaXYuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuYXBwZW5kKGdob3N0Tm9kZSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZ2hvc3ROb2RlID0gJG5vZGVEaXYuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuY2hpbGRyZW4oJy5naG9zdC1ub2RlJykuZ2V0KDApO1xyXG4gICAgICAgIG5vZGVDb3ZlciA9ICQoZ2hvc3ROb2RlKS5jaGlsZHJlbigpLmdldCgwKTtcclxuICAgICAgfVxyXG4gICAgICB2YXIgdHJhbnNWYWx1ZXMgPSAkbm9kZURpdi5jbG9zZXN0KCcub3JnY2hhcnQnKS5jc3MoJ3RyYW5zZm9ybScpLnNwbGl0KCcsJyk7XHJcbiAgICAgIHZhciBzY2FsZSA9IE1hdGguYWJzKHdpbmRvdy5wYXJzZUZsb2F0KChvcHRzLmRpcmVjdGlvbiA9PT0gJ3QyYicgfHwgb3B0cy5kaXJlY3Rpb24gPT09ICdiMnQnKSA/IHRyYW5zVmFsdWVzWzBdLnNsaWNlKHRyYW5zVmFsdWVzWzBdLmluZGV4T2YoJygnKSArIDEpIDogdHJhbnNWYWx1ZXNbMV0pKTtcclxuICAgICAgZ2hvc3ROb2RlLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCAkbm9kZURpdi5vdXRlcldpZHRoKGZhbHNlKSk7XHJcbiAgICAgIGdob3N0Tm9kZS5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsICRub2RlRGl2Lm91dGVySGVpZ2h0KGZhbHNlKSk7XHJcbiAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ3gnLDUgKiBzY2FsZSk7XHJcbiAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ3knLDUgKiBzY2FsZSk7XHJcbiAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgMTIwICogc2NhbGUpO1xyXG4gICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCA0MCAqIHNjYWxlKTtcclxuICAgICAgbm9kZUNvdmVyLnNldEF0dHJpYnV0ZSgncngnLCA0ICogc2NhbGUpO1xyXG4gICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCdyeScsIDQgKiBzY2FsZSk7XHJcbiAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsIDEgKiBzY2FsZSk7XHJcbiAgICAgIHZhciB4T2Zmc2V0ID0gb3JpZ0V2ZW50Lm9mZnNldFggKiBzY2FsZTtcclxuICAgICAgdmFyIHlPZmZzZXQgPSBvcmlnRXZlbnQub2Zmc2V0WSAqIHNjYWxlO1xyXG4gICAgICBpZiAob3B0cy5kaXJlY3Rpb24gPT09ICdsMnInKSB7XHJcbiAgICAgICAgeE9mZnNldCA9IG9yaWdFdmVudC5vZmZzZXRZICogc2NhbGU7XHJcbiAgICAgICAgeU9mZnNldCA9IG9yaWdFdmVudC5vZmZzZXRYICogc2NhbGU7XHJcbiAgICAgIH0gZWxzZSBpZiAob3B0cy5kaXJlY3Rpb24gPT09ICdyMmwnKSB7XHJcbiAgICAgICAgeE9mZnNldCA9ICRub2RlRGl2Lm91dGVyV2lkdGgoZmFsc2UpIC0gb3JpZ0V2ZW50Lm9mZnNldFkgKiBzY2FsZTtcclxuICAgICAgICB5T2Zmc2V0ID0gb3JpZ0V2ZW50Lm9mZnNldFggKiBzY2FsZTtcclxuICAgICAgfSBlbHNlIGlmIChvcHRzLmRpcmVjdGlvbiA9PT0gJ2IydCcpIHtcclxuICAgICAgICB4T2Zmc2V0ID0gJG5vZGVEaXYub3V0ZXJXaWR0aChmYWxzZSkgLSBvcmlnRXZlbnQub2Zmc2V0WCAqIHNjYWxlO1xyXG4gICAgICAgIHlPZmZzZXQgPSAkbm9kZURpdi5vdXRlckhlaWdodChmYWxzZSkgLSBvcmlnRXZlbnQub2Zmc2V0WSAqIHNjYWxlO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChpc0ZpcmVmb3gpIHsgLy8gaGFjayBmb3Igb2xkIHZlcnNpb24gb2YgRmlyZWZveCg8IDQ4LjApXHJcbiAgICAgICAgbm9kZUNvdmVyLnNldEF0dHJpYnV0ZSgnZmlsbCcsICdyZ2IoMjU1LCAyNTUsIDI1NSknKTtcclxuICAgICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCdzdHJva2UnLCAncmdiKDE5MSwgMCwgMCknKTtcclxuICAgICAgICB2YXIgZ2hvc3ROb2RlV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG4gICAgICAgIGdob3N0Tm9kZVdyYXBwZXIuc3JjID0gJ2RhdGE6aW1hZ2Uvc3ZnK3htbDt1dGY4LCcgKyAobmV3IFhNTFNlcmlhbGl6ZXIoKSkuc2VyaWFsaXplVG9TdHJpbmcoZ2hvc3ROb2RlKTtcclxuICAgICAgICBvcmlnRXZlbnQuZGF0YVRyYW5zZmVyLnNldERyYWdJbWFnZShnaG9zdE5vZGVXcmFwcGVyLCB4T2Zmc2V0LCB5T2Zmc2V0KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBvcmlnRXZlbnQuZGF0YVRyYW5zZmVyLnNldERyYWdJbWFnZShnaG9zdE5vZGUsIHhPZmZzZXQsIHlPZmZzZXQpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy9cclxuICAgIGZpbHRlckFsbG93ZWREcm9wTm9kZXM6IGZ1bmN0aW9uICgkZHJhZ2dlZCkge1xyXG4gICAgICB2YXIgb3B0cyA9IHRoaXMub3B0aW9ucztcclxuICAgICAgdmFyICRkcmFnWm9uZSA9ICRkcmFnZ2VkLmNsb3Nlc3QoJy5ub2RlcycpLnNpYmxpbmdzKCkuZXEoMCkuZmluZCgnLm5vZGU6Zmlyc3QnKTtcclxuICAgICAgdmFyICRkcmFnSGllciA9ICRkcmFnZ2VkLmNsb3Nlc3QoJ3RhYmxlJykuZmluZCgnLm5vZGUnKTtcclxuICAgICAgdGhpcy4kY2hhcnQuZGF0YSgnZHJhZ2dlZCcsICRkcmFnZ2VkKVxyXG4gICAgICAgIC5maW5kKCcubm9kZScpLmVhY2goZnVuY3Rpb24gKGluZGV4LCBub2RlKSB7XHJcbiAgICAgICAgICBpZiAoJGRyYWdIaWVyLmluZGV4KG5vZGUpID09PSAtMSkge1xyXG4gICAgICAgICAgICBpZiAob3B0cy5kcm9wQ3JpdGVyaWEpIHtcclxuICAgICAgICAgICAgICBpZiAob3B0cy5kcm9wQ3JpdGVyaWEoJGRyYWdnZWQsICRkcmFnWm9uZSwgJChub2RlKSkpIHtcclxuICAgICAgICAgICAgICAgICQobm9kZSkuYWRkQ2xhc3MoJ2FsbG93ZWREcm9wJyk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICQobm9kZSkuYWRkQ2xhc3MoJ2FsbG93ZWREcm9wJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICAvL1xyXG4gICAgZHJhZ3N0YXJ0SGFuZGxlcjogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgIC8vIGlmIHVzZXJzIGVuYWJsZSB6b29tIG9yIGRpcmVjdGlvbiBvcHRpb25zXHJcbiAgICAgIGlmICh0aGlzLiRjaGFydC5jc3MoJ3RyYW5zZm9ybScpICE9PSAnbm9uZScpIHtcclxuICAgICAgICB0aGlzLmNyZWF0ZUdob3N0Tm9kZShldmVudCk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5maWx0ZXJBbGxvd2VkRHJvcE5vZGVzKCQoZXZlbnQudGFyZ2V0KSk7XHJcbiAgICB9LFxyXG4gICAgLy9cclxuICAgIGRyYWdvdmVySGFuZGxlcjogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGlmICghJChldmVudC5kZWxlZ2F0ZVRhcmdldCkuaXMoJy5hbGxvd2VkRHJvcCcpKSB7XHJcbiAgICAgICAgZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9ICdub25lJztcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8vXHJcbiAgICBkcmFnZW5kSGFuZGxlcjogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgIHRoaXMuJGNoYXJ0LmZpbmQoJy5hbGxvd2VkRHJvcCcpLnJlbW92ZUNsYXNzKCdhbGxvd2VkRHJvcCcpO1xyXG4gICAgfSxcclxuICAgIC8vXHJcbiAgICBkcm9wSGFuZGxlcjogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgIHZhciAkZHJvcFpvbmUgPSAkKGV2ZW50LmRlbGVnYXRlVGFyZ2V0KTtcclxuICAgICAgdmFyICRkcmFnZ2VkID0gdGhpcy4kY2hhcnQuZGF0YSgnZHJhZ2dlZCcpO1xyXG4gICAgICB2YXIgJGRyYWdab25lID0gJGRyYWdnZWQuY2xvc2VzdCgnLm5vZGVzJykuc2libGluZ3MoKS5lcSgwKS5jaGlsZHJlbigpO1xyXG4gICAgICB2YXIgZHJvcEV2ZW50ID0gJC5FdmVudCgnbm9kZWRyb3Aub3JnY2hhcnQnKTtcclxuICAgICAgdGhpcy4kY2hhcnQudHJpZ2dlcihkcm9wRXZlbnQsIHsgJ2RyYWdnZWROb2RlJzogJGRyYWdnZWQsICdkcmFnWm9uZSc6ICRkcmFnWm9uZS5jaGlsZHJlbigpLCAnZHJvcFpvbmUnOiAkZHJvcFpvbmUgfSk7XHJcbiAgICAgIGlmIChkcm9wRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgLy8gZmlyc3RseSwgZGVhbCB3aXRoIHRoZSBoaWVyYXJjaHkgb2YgZHJvcCB6b25lXHJcbiAgICAgIGlmICghJGRyb3Bab25lLmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoKS5sZW5ndGgpIHsgLy8gaWYgdGhlIGRyb3Agem9uZSBpcyBhIGxlYWYgbm9kZVxyXG4gICAgICAgICRkcm9wWm9uZS5hcHBlbmQoJzxpIGNsYXNzPVwiZWRnZSB2ZXJ0aWNhbEVkZ2UgYm90dG9tRWRnZSBmYVwiPjwvaT4nKVxyXG4gICAgICAgICAgLnBhcmVudCgpLmF0dHIoJ2NvbHNwYW4nLCAyKVxyXG4gICAgICAgICAgLnBhcmVudCgpLmFmdGVyKCc8dHIgY2xhc3M9XCJsaW5lc1wiPjx0ZCBjb2xzcGFuPVwiMlwiPjxkaXYgY2xhc3M9XCJkb3duTGluZVwiPjwvZGl2PjwvdGQ+PC90cj4nXHJcbiAgICAgICAgICArICc8dHIgY2xhc3M9XCJsaW5lc1wiPjx0ZCBjbGFzcz1cInJpZ2h0TGluZVwiPjwvdGQ+PHRkIGNsYXNzPVwibGVmdExpbmVcIj48L3RkPjwvdHI+J1xyXG4gICAgICAgICAgKyAnPHRyIGNsYXNzPVwibm9kZXNcIj48L3RyPicpXHJcbiAgICAgICAgICAuc2libGluZ3MoJzpsYXN0JykuYXBwZW5kKCRkcmFnZ2VkLmZpbmQoJy5ob3Jpem9udGFsRWRnZScpLnJlbW92ZSgpLmVuZCgpLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhciBkcm9wQ29sc3BhbiA9IHBhcnNlSW50KCRkcm9wWm9uZS5wYXJlbnQoKS5hdHRyKCdjb2xzcGFuJykpICsgMjtcclxuICAgICAgICB2YXIgaG9yaXpvbnRhbEVkZ2VzID0gJzxpIGNsYXNzPVwiZWRnZSBob3Jpem9udGFsRWRnZSByaWdodEVkZ2UgZmFcIj48L2k+PGkgY2xhc3M9XCJlZGdlIGhvcml6b250YWxFZGdlIGxlZnRFZGdlIGZhXCI+PC9pPic7XHJcbiAgICAgICAgJGRyb3Bab25lLmNsb3Nlc3QoJ3RyJykubmV4dCgpLmFkZEJhY2soKS5jaGlsZHJlbigpLmF0dHIoJ2NvbHNwYW4nLCBkcm9wQ29sc3Bhbik7XHJcbiAgICAgICAgaWYgKCEkZHJhZ2dlZC5maW5kKCcuaG9yaXpvbnRhbEVkZ2UnKS5sZW5ndGgpIHtcclxuICAgICAgICAgICRkcmFnZ2VkLmFwcGVuZChob3Jpem9udGFsRWRnZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkZHJvcFpvbmUuY2xvc2VzdCgndHInKS5zaWJsaW5ncygpLmVxKDEpLmNoaWxkcmVuKCc6bGFzdCcpLmJlZm9yZSgnPHRkIGNsYXNzPVwibGVmdExpbmUgdG9wTGluZVwiPjwvdGQ+PHRkIGNsYXNzPVwicmlnaHRMaW5lIHRvcExpbmVcIj48L3RkPicpXHJcbiAgICAgICAgICAuZW5kKCkubmV4dCgpLmFwcGVuZCgkZHJhZ2dlZC5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpKTtcclxuICAgICAgICB2YXIgJGRyb3BTaWJzID0gJGRyYWdnZWQuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5zaWJsaW5ncygpLmZpbmQoJy5ub2RlOmZpcnN0Jyk7XHJcbiAgICAgICAgaWYgKCRkcm9wU2licy5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICRkcm9wU2licy5hcHBlbmQoaG9yaXpvbnRhbEVkZ2VzKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgLy8gc2Vjb25kbHksIGRlYWwgd2l0aCB0aGUgaGllcmFyY2h5IG9mIGRyYWdnZWQgbm9kZVxyXG4gICAgICB2YXIgZHJhZ0NvbHNwYW4gPSBwYXJzZUludCgkZHJhZ1pvbmUuYXR0cignY29sc3BhbicpKTtcclxuICAgICAgaWYgKGRyYWdDb2xzcGFuID4gMikge1xyXG4gICAgICAgICRkcmFnWm9uZS5hdHRyKCdjb2xzcGFuJywgZHJhZ0NvbHNwYW4gLSAyKVxyXG4gICAgICAgICAgLnBhcmVudCgpLm5leHQoKS5jaGlsZHJlbigpLmF0dHIoJ2NvbHNwYW4nLCBkcmFnQ29sc3BhbiAtIDIpXHJcbiAgICAgICAgICAuZW5kKCkubmV4dCgpLmNoaWxkcmVuKCkuc2xpY2UoMSwgMykucmVtb3ZlKCk7XHJcbiAgICAgICAgdmFyICRkcmFnU2licyA9ICRkcmFnWm9uZS5wYXJlbnQoKS5zaWJsaW5ncygnLm5vZGVzJykuY2hpbGRyZW4oKS5maW5kKCcubm9kZTpmaXJzdCcpO1xyXG4gICAgICAgIGlmICgkZHJhZ1NpYnMubGVuZ3RoID09PTEpIHtcclxuICAgICAgICAgICRkcmFnU2licy5maW5kKCcuaG9yaXpvbnRhbEVkZ2UnKS5yZW1vdmUoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJGRyYWdab25lLnJlbW92ZUF0dHIoJ2NvbHNwYW4nKVxyXG4gICAgICAgICAgLmZpbmQoJy5ib3R0b21FZGdlJykucmVtb3ZlKClcclxuICAgICAgICAgIC5lbmQoKS5lbmQoKS5zaWJsaW5ncygpLnJlbW92ZSgpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy8gY3JlYXRlIG5vZGVcclxuICAgIGNyZWF0ZU5vZGU6IGZ1bmN0aW9uIChub2RlRGF0YSwgbGV2ZWwsIG9wdHMpIHtcclxuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICBpZiAoIW5vZGVEYXRhLmNoaWxkcmVuKSB7IG5vZGVEYXRhLmNoaWxkcmVuID0gW107IH1cclxuICAgICAgJC5lYWNoKG5vZGVEYXRhLmNoaWxkcmVuLCBmdW5jdGlvbiAoaW5kZXgsIGNoaWxkKSB7XHJcbiAgICAgICAgY2hpbGQucGFyZW50SWQgPSBub2RlRGF0YS5pZDtcclxuICAgICAgfSk7XHJcbiAgICAgIHZhciBkdGQgPSAkLkRlZmVycmVkKCk7XHJcbiAgICAgIC8vIGNvbnN0cnVjdCB0aGUgY29udGVudCBvZiBub2RlXHJcbiAgICAgIHZhciAkbm9kZURpdiA9ICQoJzxkaXYnICsgKG9wdHMuZHJhZ2dhYmxlID8gJyBkcmFnZ2FibGU9XCJ0cnVlXCInIDogJycpICsgKG5vZGVEYXRhW29wdHMubm9kZUlkXSA/ICcgaWQ9XCInICsgbm9kZURhdGFbb3B0cy5ub2RlSWRdICsgJ1wiJyA6ICcnKSArIChub2RlRGF0YS5wYXJlbnRJZCA/ICcgZGF0YS1wYXJlbnQ9XCInICsgbm9kZURhdGEucGFyZW50SWQgKyAnXCInIDogJycpICsgJz4nKVxyXG4gICAgICAgIC5hZGRDbGFzcygnbm9kZSAnICsgKG5vZGVEYXRhLmNsYXNzTmFtZSB8fCAnJykgKyAgKGxldmVsID49IG9wdHMuZGVwdGggPyAnIHNsaWRlLXVwJyA6ICcnKSk7XHJcbiAgICAgIGlmIChvcHRzLm5vZGVUZW1wbGF0ZSkge1xyXG4gICAgICAgICRub2RlRGl2LmFwcGVuZChvcHRzLm5vZGVUZW1wbGF0ZShub2RlRGF0YSkpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhciBpc1NldE5vZGVDb250ZW50ID0gdHlwZW9mIG9wdHMubm9kZUNvbnRlbnQgIT09ICd1bmRlZmluZWQnO1xyXG4gICAgICAgICRub2RlRGl2LmFkZENsYXNzKGlzU2V0Tm9kZUNvbnRlbnQgPyAnd2l0aENvbnRlbnQnOiAnJylcclxuICAgICAgICAgIC5hcHBlbmQoJzxkaXYgY2xhc3M9XCJ0aXRsZSAnICsgKGlzU2V0Tm9kZUNvbnRlbnQgPyAnd2l0aENvbnRlbnQnOiAnJykgKyAnXCI+JyArIG5vZGVEYXRhW29wdHMubm9kZVRpdGxlXSArICc8L2Rpdj4nKVxyXG4gICAgICAgICAgLmFwcGVuZChpc1NldE5vZGVDb250ZW50ID8gJzxkaXYgY2xhc3M9XCJjb250ZW50XCI+JyArIChub2RlRGF0YVtvcHRzLm5vZGVDb250ZW50XSB8fCAnJykgKyAnPC9kaXY+JyA6ICcnKTtcclxuICAgICAgfVxyXG4gICAgICAvLyBhcHBlbmQgNCBkaXJlY3Rpb24gYXJyb3dzIG9yIGV4cGFuZC9jb2xsYXBzZSBidXR0b25zXHJcbiAgICAgIHZhciBmbGFncyA9IG5vZGVEYXRhLnJlbGF0aW9uc2hpcCB8fCAnJztcclxuICAgICAgaWYgKG9wdHMudmVydGljYWxEZXB0aCAmJiAobGV2ZWwgKyAyKSA+IG9wdHMudmVydGljYWxEZXB0aCkge1xyXG4gICAgICAgIGlmICgobGV2ZWwgKyAxKSA+PSBvcHRzLnZlcnRpY2FsRGVwdGggJiYgTnVtYmVyKGZsYWdzLnN1YnN0cigyLDEpKSkge1xyXG4gICAgICAgICAgdmFyIGljb24gPSBsZXZlbCArIDEgID49IG9wdHMuZGVwdGggPyAncGx1cycgOiAnbWludXMnO1xyXG4gICAgICAgICAgJG5vZGVEaXYuYXBwZW5kKCc8aSBjbGFzcz1cInRvZ2dsZUJ0biBmYSBmYS0nICsgaWNvbiArICctc3F1YXJlXCI+PC9pPicpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoTnVtYmVyKGZsYWdzLnN1YnN0cigwLDEpKSkge1xyXG4gICAgICAgICAgJG5vZGVEaXYuYXBwZW5kKCc8aSBjbGFzcz1cImVkZ2UgdmVydGljYWxFZGdlIHRvcEVkZ2UgZmFcIj48L2k+Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKE51bWJlcihmbGFncy5zdWJzdHIoMSwxKSkpIHtcclxuICAgICAgICAgICRub2RlRGl2LmFwcGVuZCgnPGkgY2xhc3M9XCJlZGdlIGhvcml6b250YWxFZGdlIHJpZ2h0RWRnZSBmYVwiPjwvaT4nICtcclxuICAgICAgICAgICAgJzxpIGNsYXNzPVwiZWRnZSBob3Jpem9udGFsRWRnZSBsZWZ0RWRnZSBmYVwiPjwvaT4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoTnVtYmVyKGZsYWdzLnN1YnN0cigyLDEpKSkge1xyXG4gICAgICAgICAgJG5vZGVEaXYuYXBwZW5kKCc8aSBjbGFzcz1cImVkZ2UgdmVydGljYWxFZGdlIGJvdHRvbUVkZ2UgZmFcIj48L2k+JylcclxuICAgICAgICAgICAgLmNoaWxkcmVuKCcudGl0bGUnKS5wcmVwZW5kKCc8aSBjbGFzcz1cImZhICcrIG9wdHMucGFyZW50Tm9kZVN5bWJvbCArICcgc3ltYm9sXCI+PC9pPicpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgJG5vZGVEaXYub24oJ21vdXNlZW50ZXIgbW91c2VsZWF2ZScsIHRoaXMubm9kZUVudGVyTGVhdmVIYW5kbGVyLmJpbmQodGhpcykpO1xyXG4gICAgICAkbm9kZURpdi5vbignY2xpY2snLCB0aGlzLm5vZGVDbGlja0hhbmRsZXIuYmluZCh0aGlzKSk7XHJcbiAgICAgICRub2RlRGl2Lm9uKCdjbGljaycsICcudG9wRWRnZScsIHsgJ25vZGVEYXRhJzogbm9kZURhdGEgfSwgdGhpcy50b3BFZGdlQ2xpY2tIYW5kbGVyLmJpbmQodGhpcykpO1xyXG4gICAgICAkbm9kZURpdi5vbignY2xpY2snLCAnLmJvdHRvbUVkZ2UnLCB7ICdub2RlRGF0YSc6IG5vZGVEYXRhIH0sIHRoaXMuYm90dG9tRWRnZUNsaWNrSGFuZGxlci5iaW5kKHRoaXMpKTtcclxuICAgICAgJG5vZGVEaXYub24oJ2NsaWNrJywgJy5sZWZ0RWRnZSwgLnJpZ2h0RWRnZScsIHsgJ25vZGVEYXRhJzogbm9kZURhdGEgfSwgdGhpcy5oRWRnZUNsaWNrSGFuZGxlci5iaW5kKHRoaXMpKTtcclxuICAgICAgJG5vZGVEaXYub24oJ2NsaWNrJywgJy50b2dnbGVCdG4nLCB0aGlzLnRvZ2dsZVZOb2Rlcy5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAgIGlmIChvcHRzLmRyYWdnYWJsZSkge1xyXG4gICAgICAgICRub2RlRGl2Lm9uKCdkcmFnc3RhcnQnLCB0aGlzLmRyYWdzdGFydEhhbmRsZXIuYmluZCh0aGlzKSlcclxuICAgICAgICAub24oJ2RyYWdvdmVyJywgdGhpcy5kcmFnb3ZlckhhbmRsZXIuYmluZCh0aGlzKSlcclxuICAgICAgICAub24oJ2RyYWdlbmQnLCB0aGlzLmRyYWdlbmRIYW5kbGVyLmJpbmQodGhpcykpXHJcbiAgICAgICAgLm9uKCdkcm9wJywgdGhpcy5kcm9wSGFuZGxlci5iaW5kKHRoaXMpKTtcclxuICAgICAgfVxyXG4gICAgICAvLyBhbGxvdyB1c2VyIHRvIGFwcGVuZCBkb20gbW9kaWZpY2F0aW9uIGFmdGVyIGZpbmlzaGluZyBub2RlIGNyZWF0ZSBvZiBvcmdjaGFydFxyXG4gICAgICBpZiAob3B0cy5jcmVhdGVOb2RlKSB7XHJcbiAgICAgICAgb3B0cy5jcmVhdGVOb2RlKCRub2RlRGl2LCBub2RlRGF0YSk7XHJcbiAgICAgIH1cclxuICAgICAgZHRkLnJlc29sdmUoJG5vZGVEaXYpO1xyXG4gICAgICByZXR1cm4gZHRkLnByb21pc2UoKTtcclxuICAgIH0sXHJcbiAgICAvLyByZWN1cnNpdmVseSBidWlsZCB0aGUgdHJlZVxyXG4gICAgYnVpbGRIaWVyYXJjaHk6IGZ1bmN0aW9uICgkYXBwZW5kVG8sIG5vZGVEYXRhLCBsZXZlbCwgb3B0cywgY2FsbGJhY2spIHtcclxuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICB2YXIgJG5vZGVXcmFwcGVyO1xyXG4gICAgICAvLyBDb25zdHJ1Y3QgdGhlIG5vZGVcclxuICAgICAgdmFyICRjaGlsZE5vZGVzID0gbm9kZURhdGEuY2hpbGRyZW47XHJcbiAgICAgIHZhciBoYXNDaGlsZHJlbiA9ICRjaGlsZE5vZGVzID8gJGNoaWxkTm9kZXMubGVuZ3RoIDogZmFsc2U7XHJcbiAgICAgIHZhciBpc1ZlcnRpY2FsTm9kZSA9IChvcHRzLnZlcnRpY2FsRGVwdGggJiYgKGxldmVsICsgMSkgPj0gb3B0cy52ZXJ0aWNhbERlcHRoKSA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgaWYgKE9iamVjdC5rZXlzKG5vZGVEYXRhKS5sZW5ndGggPiAxKSB7IC8vIGlmIG5vZGVEYXRhIGhhcyBuZXN0ZWQgc3RydWN0dXJlXHJcbiAgICAgICAgJG5vZGVXcmFwcGVyID0gaXNWZXJ0aWNhbE5vZGUgPyAkYXBwZW5kVG8gOiAkKCc8dGFibGU+Jyk7XHJcbiAgICAgICAgaWYgKCFpc1ZlcnRpY2FsTm9kZSkge1xyXG4gICAgICAgICAgJGFwcGVuZFRvLmFwcGVuZCgkbm9kZVdyYXBwZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkLndoZW4odGhpcy5jcmVhdGVOb2RlKG5vZGVEYXRhLCBsZXZlbCwgb3B0cykpXHJcbiAgICAgICAgLmRvbmUoZnVuY3Rpb24oJG5vZGVEaXYpIHtcclxuICAgICAgICAgIGlmIChpc1ZlcnRpY2FsTm9kZSkge1xyXG4gICAgICAgICAgICAkbm9kZVdyYXBwZXIuYXBwZW5kKCRub2RlRGl2KTtcclxuICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgJG5vZGVXcmFwcGVyLmFwcGVuZCgkKCc8dHIvPicpLmFwcGVuZCgkKCc8dGQnICsgKGhhc0NoaWxkcmVuID8gJyBjb2xzcGFuPVwiJyArICRjaGlsZE5vZGVzLmxlbmd0aCAqIDIgKyAnXCInIDogJycpICsgJz48L3RkPicpLmFwcGVuZCgkbm9kZURpdikpKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChjYWxsYmFjaykge1xyXG4gICAgICAgICAgICBjYWxsYmFjaygpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmZhaWwoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnRmFpbGVkIHRvIGNyZWF0IG5vZGUnKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIENvbnN0cnVjdCB0aGUgaW5mZXJpb3Igbm9kZXMgYW5kIGNvbm5lY3Rpb25nIGxpbmVzXHJcbiAgICAgIGlmIChoYXNDaGlsZHJlbikge1xyXG4gICAgICAgIGlmIChPYmplY3Qua2V5cyhub2RlRGF0YSkubGVuZ3RoID09PSAxKSB7IC8vIGlmIG5vZGVEYXRhIGlzIGp1c3QgYW4gYXJyYXlcclxuICAgICAgICAgICRub2RlV3JhcHBlciA9ICRhcHBlbmRUbztcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGlzSGlkZGVuID0gKGxldmVsICsgMSA+PSBvcHRzLmRlcHRoIHx8IG5vZGVEYXRhLmNvbGxhcHNlZCkgPyAnIGhpZGRlbicgOiAnJztcclxuICAgICAgICB2YXIgaXNWZXJ0aWNhbExheWVyID0gKG9wdHMudmVydGljYWxEZXB0aCAmJiAobGV2ZWwgKyAyKSA+PSBvcHRzLnZlcnRpY2FsRGVwdGgpID8gdHJ1ZSA6IGZhbHNlO1xyXG5cclxuICAgICAgICAvLyBkcmF3IHRoZSBsaW5lIGNsb3NlIHRvIHBhcmVudCBub2RlXHJcbiAgICAgICAgaWYgKCFpc1ZlcnRpY2FsTGF5ZXIpIHtcclxuICAgICAgICAgICRub2RlV3JhcHBlci5hcHBlbmQoJzx0ciBjbGFzcz1cImxpbmVzJyArIGlzSGlkZGVuICsgJ1wiPjx0ZCBjb2xzcGFuPVwiJyArICRjaGlsZE5vZGVzLmxlbmd0aCAqIDIgKyAnXCI+PGRpdiBjbGFzcz1cImRvd25MaW5lXCI+PC9kaXY+PC90ZD48L3RyPicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBkcmF3IHRoZSBsaW5lcyBjbG9zZSB0byBjaGlsZHJlbiBub2Rlc1xyXG4gICAgICAgIHZhciBsaW5lTGF5ZXIgPSAnPHRyIGNsYXNzPVwibGluZXMnICsgaXNIaWRkZW4gKyAnXCI+PHRkIGNsYXNzPVwicmlnaHRMaW5lXCI+PC90ZD4nO1xyXG4gICAgICAgIGZvciAodmFyIGk9MTsgaTwkY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgbGluZUxheWVyICs9ICc8dGQgY2xhc3M9XCJsZWZ0TGluZSB0b3BMaW5lXCI+PC90ZD48dGQgY2xhc3M9XCJyaWdodExpbmUgdG9wTGluZVwiPjwvdGQ+JztcclxuICAgICAgICB9XHJcbiAgICAgICAgbGluZUxheWVyICs9ICc8dGQgY2xhc3M9XCJsZWZ0TGluZVwiPjwvdGQ+PC90cj4nO1xyXG4gICAgICAgIHZhciAkbm9kZUxheWVyO1xyXG4gICAgICAgIGlmIChpc1ZlcnRpY2FsTGF5ZXIpIHtcclxuICAgICAgICAgICRub2RlTGF5ZXIgPSAkKCc8dWw+Jyk7XHJcbiAgICAgICAgICBpZiAoaXNIaWRkZW4gJiYgb3B0cy5kZXB0aCArIDEgIT09IG9wdHMudmVydGljYWxEZXB0aCkge1xyXG4gICAgICAgICAgICAkbm9kZUxheWVyLmFkZENsYXNzKGlzSGlkZGVuKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChsZXZlbCArIDIgPT09IG9wdHMudmVydGljYWxEZXB0aCkge1xyXG4gICAgICAgICAgICAkbm9kZVdyYXBwZXIuYXBwZW5kKCc8dHIgY2xhc3M9XCJ2ZXJ0aWNhbE5vZGVzJyArIGlzSGlkZGVuICsgJ1wiPjx0ZD48L3RkPjwvdHI+JylcclxuICAgICAgICAgICAgICAuZmluZCgnLnZlcnRpY2FsTm9kZXMnKS5jaGlsZHJlbigpLmFwcGVuZCgkbm9kZUxheWVyKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICRub2RlV3JhcHBlci5hcHBlbmQoJG5vZGVMYXllcik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICRub2RlTGF5ZXIgPSAkKCc8dHIgY2xhc3M9XCJub2RlcycgKyBpc0hpZGRlbiArICdcIj4nKTtcclxuICAgICAgICAgICRub2RlV3JhcHBlci5hcHBlbmQobGluZUxheWVyKS5hcHBlbmQoJG5vZGVMYXllcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHJlY3Vyc2UgdGhyb3VnaCBjaGlsZHJlbiBub2Rlc1xyXG4gICAgICAgICQuZWFjaCgkY2hpbGROb2RlcywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICB2YXIgJG5vZGVDZWxsID0gaXNWZXJ0aWNhbExheWVyID8gJCgnPGxpPicpIDogJCgnPHRkIGNvbHNwYW49XCIyXCI+Jyk7XHJcbiAgICAgICAgICAkbm9kZUxheWVyLmFwcGVuZCgkbm9kZUNlbGwpO1xyXG4gICAgICAgICAgdGhhdC5idWlsZEhpZXJhcmNoeSgkbm9kZUNlbGwsIHRoaXMsIGxldmVsICsgMSwgb3B0cywgY2FsbGJhY2spO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy8gYnVpbGQgdGhlIGNoaWxkIG5vZGVzIG9mIHNwZWNpZmljIG5vZGVcclxuICAgIGJ1aWxkQ2hpbGROb2RlOiBmdW5jdGlvbiAoJGFwcGVuZFRvLCBub2RlRGF0YSwgb3B0cywgY2FsbGJhY2spIHtcclxuICAgICAgdmFyIG9wdHMgPSBvcHRzIHx8ICRhcHBlbmRUby5jbG9zZXN0KCcub3JnY2hhcnQnKS5kYXRhKCdvcHRpb25zJyk7XHJcbiAgICAgIHZhciBkYXRhID0gbm9kZURhdGEuY2hpbGRyZW4gfHwgbm9kZURhdGEuc2libGluZ3M7XHJcbiAgICAgICRhcHBlbmRUby5maW5kKCd0ZDpmaXJzdCcpLmF0dHIoJ2NvbHNwYW4nLCBkYXRhLmxlbmd0aCAqIDIpO1xyXG4gICAgICB0aGlzLmJ1aWxkSGllcmFyY2h5KCRhcHBlbmRUbywgeyAnY2hpbGRyZW4nOiBkYXRhIH0sIDAsIG9wdHMsIGNhbGxiYWNrKTtcclxuICAgIH0sXHJcbiAgICAvLyBleHBvc2VkIG1ldGhvZFxyXG4gICAgYWRkQ2hpbGRyZW46IGZ1bmN0aW9uICgkbm9kZSwgZGF0YSwgb3B0cykge1xyXG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgIHZhciBvcHRzID0gb3B0cyB8fCAkbm9kZS5jbG9zZXN0KCcub3JnY2hhcnQnKS5kYXRhKCdvcHRpb25zJyk7XHJcbiAgICAgIHZhciBjb3VudCA9IDA7XHJcbiAgICAgIHRoaXMuYnVpbGRDaGlsZE5vZGUoJG5vZGUuY2xvc2VzdCgndGFibGUnKSwgZGF0YSwgb3B0cywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKCsrY291bnQgPT09IGRhdGEuY2hpbGRyZW4ubGVuZ3RoKSB7XHJcbiAgICAgICAgICBpZiAoISRub2RlLmNoaWxkcmVuKCcuYm90dG9tRWRnZScpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAkbm9kZS5hcHBlbmQoJzxpIGNsYXNzPVwiZWRnZSB2ZXJ0aWNhbEVkZ2UgYm90dG9tRWRnZSBmYVwiPjwvaT4nKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmICghJG5vZGUuZmluZCgnLnN5bWJvbCcpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAkbm9kZS5jaGlsZHJlbignLnRpdGxlJykucHJlcGVuZCgnPGkgY2xhc3M9XCJmYSAnKyBvcHRzLnBhcmVudE5vZGVTeW1ib2wgKyAnIHN5bWJvbFwiPjwvaT4nKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRoYXQuc2hvd0NoaWxkcmVuKCRub2RlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIC8vIGJ1aWxkIHRoZSBwYXJlbnQgbm9kZSBvZiBzcGVjaWZpYyBub2RlXHJcbiAgICBidWlsZFBhcmVudE5vZGU6IGZ1bmN0aW9uICgkY3VycmVudFJvb3QsIG5vZGVEYXRhLCBvcHRzLCBjYWxsYmFjaykge1xyXG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgIHZhciAkdGFibGUgPSAkKCc8dGFibGU+Jyk7XHJcbiAgICAgIG5vZGVEYXRhLnJlbGF0aW9uc2hpcCA9IG5vZGVEYXRhLnJlbGF0aW9uc2hpcCB8fCAnMDAxJztcclxuICAgICAgJC53aGVuKHRoaXMuY3JlYXRlTm9kZShub2RlRGF0YSwgMCwgb3B0cyB8fCAkY3VycmVudFJvb3QuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuZGF0YSgnb3B0aW9ucycpKSlcclxuICAgICAgICAuZG9uZShmdW5jdGlvbigkbm9kZURpdikge1xyXG4gICAgICAgICAgJHRhYmxlLmFwcGVuZCgkKCc8dHIgY2xhc3M9XCJoaWRkZW5cIj4nKS5hcHBlbmQoJCgnPHRkIGNvbHNwYW49XCIyXCI+JykuYXBwZW5kKCRub2RlRGl2LnJlbW92ZUNsYXNzKCdzbGlkZS11cCcpLmFkZENsYXNzKCdzbGlkZS1kb3duJykpKSk7XHJcbiAgICAgICAgICAkdGFibGUuYXBwZW5kKCc8dHIgY2xhc3M9XCJsaW5lcyBoaWRkZW5cIj48dGQgY29sc3Bhbj1cIjJcIj48ZGl2IGNsYXNzPVwiZG93bkxpbmVcIj48L2Rpdj48L3RkPjwvdHI+Jyk7XHJcbiAgICAgICAgICB2YXIgbGluZXNSb3cgPSAnPHRkIGNsYXNzPVwicmlnaHRMaW5lXCI+PC90ZD48dGQgY2xhc3M9XCJsZWZ0TGluZVwiPjwvdGQ+JztcclxuICAgICAgICAgICR0YWJsZS5hcHBlbmQoJzx0ciBjbGFzcz1cImxpbmVzIGhpZGRlblwiPicgKyBsaW5lc1JvdyArICc8L3RyPicpO1xyXG4gICAgICAgICAgdmFyICRjaGFydCA9IHRoYXQuJGNoYXJ0O1xyXG4gICAgICAgICAgJGNoYXJ0LnByZXBlbmQoJHRhYmxlKVxyXG4gICAgICAgICAgICAuY2hpbGRyZW4oJ3RhYmxlOmZpcnN0JykuYXBwZW5kKCc8dHIgY2xhc3M9XCJub2Rlc1wiPjx0ZCBjb2xzcGFuPVwiMlwiPjwvdGQ+PC90cj4nKVxyXG4gICAgICAgICAgICAuY2hpbGRyZW4oJ3RyOmxhc3QnKS5jaGlsZHJlbigpLmFwcGVuZCgkY2hhcnQuY2hpbGRyZW4oJ3RhYmxlJykubGFzdCgpKTtcclxuICAgICAgICAgIGNhbGxiYWNrKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuZmFpbChmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdGYWlsZWQgdG8gY3JlYXRlIHBhcmVudCBub2RlJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgLy8gZXhwb3NlZCBtZXRob2RcclxuICAgIGFkZFBhcmVudDogZnVuY3Rpb24gKCRjdXJyZW50Um9vdCwgZGF0YSwgb3B0cykge1xyXG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgIHRoaXMuYnVpbGRQYXJlbnROb2RlKCRjdXJyZW50Um9vdCwgZGF0YSwgb3B0cywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKCEkY3VycmVudFJvb3QuY2hpbGRyZW4oJy50b3BFZGdlJykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAkY3VycmVudFJvb3QuY2hpbGRyZW4oJy50aXRsZScpLmFmdGVyKCc8aSBjbGFzcz1cImVkZ2UgdmVydGljYWxFZGdlIHRvcEVkZ2UgZmFcIj48L2k+Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoYXQuc2hvd1BhcmVudCgkY3VycmVudFJvb3QpO1xyXG4gICAgICB9KTtcclxuICAgIH0sXHJcbiAgICAvLyBzdWJzZXF1ZW50IHByb2Nlc3Npbmcgb2YgYnVpbGQgc2libGluZyBub2Rlc1xyXG4gICAgY29tcGxlbWVudExpbmU6IGZ1bmN0aW9uICgkb25lU2libGluZywgc2libGluZ0NvdW50LCBleGlzdGluZ1NpYmxpZ0NvdW50KSB7XHJcbiAgICAgIHZhciBsaW5lcyA9ICcnO1xyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV4aXN0aW5nU2libGlnQ291bnQ7IGkrKykge1xyXG4gICAgICAgIGxpbmVzICs9ICc8dGQgY2xhc3M9XCJsZWZ0TGluZSB0b3BMaW5lXCI+PC90ZD48dGQgY2xhc3M9XCJyaWdodExpbmUgdG9wTGluZVwiPjwvdGQ+JztcclxuICAgICAgfVxyXG4gICAgICAkb25lU2libGluZy5wYXJlbnQoKS5wcmV2QWxsKCd0cjpndCgwKScpLmNoaWxkcmVuKCkuYXR0cignY29sc3BhbicsIHNpYmxpbmdDb3VudCAqIDIpXHJcbiAgICAgICAgLmVuZCgpLm5leHQoKS5jaGlsZHJlbignOmZpcnN0JykuYWZ0ZXIobGluZXMpO1xyXG4gICAgfSxcclxuICAgIC8vIGJ1aWxkIHRoZSBzaWJsaW5nIG5vZGVzIG9mIHNwZWNpZmljIG5vZGVcclxuICAgIGJ1aWxkU2libGluZ05vZGU6IGZ1bmN0aW9uICgkbm9kZUNoYXJ0LCBub2RlRGF0YSwgb3B0cywgY2FsbGJhY2spIHtcclxuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICB2YXIgb3B0cyA9IG9wdHMgfHwgJG5vZGVDaGFydC5jbG9zZXN0KCcub3JnY2hhcnQnKS5kYXRhKCdvcHRpb25zJyk7XHJcbiAgICAgIHZhciBuZXdTaWJsaW5nQ291bnQgPSBub2RlRGF0YS5zaWJsaW5ncyA/IG5vZGVEYXRhLnNpYmxpbmdzLmxlbmd0aCA6IG5vZGVEYXRhLmNoaWxkcmVuLmxlbmd0aDtcclxuICAgICAgdmFyIGV4aXN0aW5nU2libGlnQ291bnQgPSAkbm9kZUNoYXJ0LnBhcmVudCgpLmlzKCd0ZCcpID8gJG5vZGVDaGFydC5jbG9zZXN0KCd0cicpLmNoaWxkcmVuKCkubGVuZ3RoIDogMTtcclxuICAgICAgdmFyIHNpYmxpbmdDb3VudCA9IGV4aXN0aW5nU2libGlnQ291bnQgKyBuZXdTaWJsaW5nQ291bnQ7XHJcbiAgICAgIHZhciBpbnNlcnRQb3N0aW9uID0gKHNpYmxpbmdDb3VudCA+IDEpID8gTWF0aC5mbG9vcihzaWJsaW5nQ291bnQvMiAtIDEpIDogMDtcclxuICAgICAgLy8ganVzdCBidWlsZCB0aGUgc2libGluZyBub2RlcyBmb3IgdGhlIHNwZWNpZmljIG5vZGVcclxuICAgICAgaWYgKCRub2RlQ2hhcnQucGFyZW50KCkuaXMoJ3RkJykpIHtcclxuICAgICAgICB2YXIgJHBhcmVudCA9ICRub2RlQ2hhcnQuY2xvc2VzdCgndHInKS5wcmV2QWxsKCd0cjpsYXN0Jyk7XHJcbiAgICAgICAgJG5vZGVDaGFydC5jbG9zZXN0KCd0cicpLnByZXZBbGwoJ3RyOmx0KDIpJykucmVtb3ZlKCk7XHJcbiAgICAgICAgdmFyIGNoaWxkQ291bnQgPSAwO1xyXG4gICAgICAgIHRoaXMuYnVpbGRDaGlsZE5vZGUoJG5vZGVDaGFydC5wYXJlbnQoKS5jbG9zZXN0KCd0YWJsZScpLCBub2RlRGF0YSwgb3B0cywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZiAoKytjaGlsZENvdW50ID09PSBuZXdTaWJsaW5nQ291bnQpIHtcclxuICAgICAgICAgICAgdmFyICRzaWJsaW5nVGRzID0gJG5vZGVDaGFydC5wYXJlbnQoKS5jbG9zZXN0KCd0YWJsZScpLmNoaWxkcmVuKCd0cjpsYXN0JykuY2hpbGRyZW4oJ3RkJyk7XHJcbiAgICAgICAgICAgIGlmIChleGlzdGluZ1NpYmxpZ0NvdW50ID4gMSkge1xyXG4gICAgICAgICAgICAgIHRoYXQuY29tcGxlbWVudExpbmUoJHNpYmxpbmdUZHMuZXEoMCkuYmVmb3JlKCRub2RlQ2hhcnQuY2xvc2VzdCgndGQnKS5zaWJsaW5ncygpLmFkZEJhY2soKS51bndyYXAoKSksIHNpYmxpbmdDb3VudCwgZXhpc3RpbmdTaWJsaWdDb3VudCk7XHJcbiAgICAgICAgICAgICAgJHNpYmxpbmdUZHMuYWRkQ2xhc3MoJ2hpZGRlbicpLmZpbmQoJy5ub2RlJykuYWRkQ2xhc3MoJ3NsaWRlLWxlZnQnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB0aGF0LmNvbXBsZW1lbnRMaW5lKCRzaWJsaW5nVGRzLmVxKGluc2VydFBvc3Rpb24pLmFmdGVyKCRub2RlQ2hhcnQuY2xvc2VzdCgndGQnKS51bndyYXAoKSksIHNpYmxpbmdDb3VudCwgMSk7XHJcbiAgICAgICAgICAgICAgJHNpYmxpbmdUZHMubm90KCc6ZXEoJyArIGluc2VydFBvc3Rpb24gKyAxICsgJyknKS5hZGRDbGFzcygnaGlkZGVuJylcclxuICAgICAgICAgICAgICAgIC5zbGljZSgwLCBpbnNlcnRQb3N0aW9uKS5maW5kKCcubm9kZScpLmFkZENsYXNzKCdzbGlkZS1yaWdodCcpXHJcbiAgICAgICAgICAgICAgICAuZW5kKCkuZW5kKCkuc2xpY2UoaW5zZXJ0UG9zdGlvbikuZmluZCgnLm5vZGUnKS5hZGRDbGFzcygnc2xpZGUtbGVmdCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSB7IC8vIGJ1aWxkIHRoZSBzaWJsaW5nIG5vZGVzIGFuZCBwYXJlbnQgbm9kZSBmb3IgdGhlIHNwZWNpZmljIG5kb2VcclxuICAgICAgICB2YXIgbm9kZUNvdW50ID0gMDtcclxuICAgICAgICB0aGlzLmJ1aWxkSGllcmFyY2h5KCRub2RlQ2hhcnQuY2xvc2VzdCgnLm9yZ2NoYXJ0JyksIG5vZGVEYXRhLCAwLCBvcHRzLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmICgrK25vZGVDb3VudCA9PT0gc2libGluZ0NvdW50KSB7XHJcbiAgICAgICAgICAgIHRoYXQuY29tcGxlbWVudExpbmUoJG5vZGVDaGFydC5uZXh0KCkuY2hpbGRyZW4oJ3RyOmxhc3QnKVxyXG4gICAgICAgICAgICAgIC5jaGlsZHJlbigpLmVxKGluc2VydFBvc3Rpb24pLmFmdGVyKCQoJzx0ZCBjb2xzcGFuPVwiMlwiPicpXHJcbiAgICAgICAgICAgICAgLmFwcGVuZCgkbm9kZUNoYXJ0KSksIHNpYmxpbmdDb3VudCwgMSk7XHJcbiAgICAgICAgICAgICRub2RlQ2hhcnQuY2xvc2VzdCgndHInKS5zaWJsaW5ncygpLmVxKDApLmFkZENsYXNzKCdoaWRkZW4nKS5maW5kKCcubm9kZScpLmFkZENsYXNzKCdzbGlkZS1kb3duJyk7XHJcbiAgICAgICAgICAgICRub2RlQ2hhcnQucGFyZW50KCkuc2libGluZ3MoKS5hZGRDbGFzcygnaGlkZGVuJylcclxuICAgICAgICAgICAgICAuc2xpY2UoMCwgaW5zZXJ0UG9zdGlvbikuZmluZCgnLm5vZGUnKS5hZGRDbGFzcygnc2xpZGUtcmlnaHQnKVxyXG4gICAgICAgICAgICAgIC5lbmQoKS5lbmQoKS5zbGljZShpbnNlcnRQb3N0aW9uKS5maW5kKCcubm9kZScpLmFkZENsYXNzKCdzbGlkZS1sZWZ0Jyk7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvL1xyXG4gICAgYWRkU2libGluZ3M6IGZ1bmN0aW9uICgkbm9kZSwgZGF0YSwgb3B0cykge1xyXG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgIHRoaXMuYnVpbGRTaWJsaW5nTm9kZSgkbm9kZS5jbG9zZXN0KCd0YWJsZScpLCBkYXRhLCBvcHRzLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAkbm9kZS5jbG9zZXN0KCcubm9kZXMnKS5kYXRhKCdzaWJsaW5nc0xvYWRlZCcsIHRydWUpO1xyXG4gICAgICAgIGlmICghJG5vZGUuY2hpbGRyZW4oJy5sZWZ0RWRnZScpLmxlbmd0aCkge1xyXG4gICAgICAgICAgJG5vZGUuY2hpbGRyZW4oJy50b3BFZGdlJykuYWZ0ZXIoJzxpIGNsYXNzPVwiZWRnZSBob3Jpem9udGFsRWRnZSByaWdodEVkZ2UgZmFcIj48L2k+PGkgY2xhc3M9XCJlZGdlIGhvcml6b250YWxFZGdlIGxlZnRFZGdlIGZhXCI+PC9pPicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGF0LnNob3dTaWJsaW5ncygkbm9kZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIC8vXHJcbiAgICByZW1vdmVOb2RlczogZnVuY3Rpb24gKCRub2RlKSB7XHJcbiAgICAgIHZhciAkcGFyZW50ID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKTtcclxuICAgICAgdmFyICRzaWJzID0gJHBhcmVudC5wYXJlbnQoKS5zaWJsaW5ncygpO1xyXG4gICAgICBpZiAoJHBhcmVudC5pcygndGQnKSkge1xyXG4gICAgICAgIGlmICh0aGlzLmdldE5vZGVTdGF0ZSgkbm9kZSwgJ3NpYmxpbmdzJykuZXhpc3QpIHtcclxuICAgICAgICAgICRzaWJzLmVxKDIpLmNoaWxkcmVuKCcudG9wTGluZTpsdCgyKScpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgJHNpYnMuc2xpY2UoMCwgMikuY2hpbGRyZW4oKS5hdHRyKCdjb2xzcGFuJywgJHNpYnMuZXEoMikuY2hpbGRyZW4oKS5sZW5ndGgpO1xyXG4gICAgICAgICAgJHBhcmVudC5yZW1vdmUoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgJHNpYnMuZXEoMCkuY2hpbGRyZW4oKS5yZW1vdmVBdHRyKCdjb2xzcGFuJylcclxuICAgICAgICAgICAgLmZpbmQoJy5ib3R0b21FZGdlJykucmVtb3ZlKClcclxuICAgICAgICAgICAgLmVuZCgpLmVuZCgpLnNpYmxpbmdzKCkucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICRwYXJlbnQuYWRkKCRwYXJlbnQuc2libGluZ3MoKSkucmVtb3ZlKCk7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvL1xyXG4gICAgZXhwb3J0OiBmdW5jdGlvbiAoZXhwb3J0RmlsZW5hbWUsIGV4cG9ydEZpbGVleHRlbnNpb24pIHtcclxuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICBleHBvcnRGaWxlbmFtZSA9ICh0eXBlb2YgZXhwb3J0RmlsZW5hbWUgIT09ICd1bmRlZmluZWQnKSA/ICBleHBvcnRGaWxlbmFtZSA6IHRoaXMub3B0aW9ucy5leHBvcnRGaWxlbmFtZTtcclxuICAgICAgZXhwb3J0RmlsZWV4dGVuc2lvbiA9ICh0eXBlb2YgZXhwb3J0RmlsZWV4dGVuc2lvbiAhPT0gJ3VuZGVmaW5lZCcpID8gIGV4cG9ydEZpbGVleHRlbnNpb24gOiB0aGlzLm9wdGlvbnMuZXhwb3J0RmlsZWV4dGVuc2lvbjtcclxuICAgICAgaWYgKCQodGhpcykuY2hpbGRyZW4oJy5zcGlubmVyJykubGVuZ3RoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIHZhciAkY2hhcnRDb250YWluZXIgPSB0aGlzLiRjaGFydENvbnRhaW5lcjtcclxuICAgICAgdmFyICRtYXNrID0gJGNoYXJ0Q29udGFpbmVyLmZpbmQoJy5tYXNrJyk7XHJcbiAgICAgIGlmICghJG1hc2subGVuZ3RoKSB7XHJcbiAgICAgICAgJGNoYXJ0Q29udGFpbmVyLmFwcGVuZCgnPGRpdiBjbGFzcz1cIm1hc2tcIj48aSBjbGFzcz1cImZhIGZhLWNpcmNsZS1vLW5vdGNoIGZhLXNwaW4gc3Bpbm5lclwiPjwvaT48L2Rpdj4nKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAkbWFzay5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XHJcbiAgICAgIH1cclxuICAgICAgdmFyIHNvdXJjZUNoYXJ0ID0gJGNoYXJ0Q29udGFpbmVyLmFkZENsYXNzKCdjYW52YXNDb250YWluZXInKS5maW5kKCcub3JnY2hhcnQ6bm90KFwiLmhpZGRlblwiKScpLmdldCgwKTtcclxuICAgICAgdmFyIGZsYWcgPSB0aGF0Lm9wdGlvbnMuZGlyZWN0aW9uID09PSAnbDJyJyB8fCB0aGF0Lm9wdGlvbnMuZGlyZWN0aW9uID09PSAncjJsJztcclxuICAgICAgaHRtbDJjYW52YXMoc291cmNlQ2hhcnQsIHtcclxuICAgICAgICAnd2lkdGgnOiBmbGFnID8gc291cmNlQ2hhcnQuY2xpZW50SGVpZ2h0IDogc291cmNlQ2hhcnQuY2xpZW50V2lkdGgsXHJcbiAgICAgICAgJ2hlaWdodCc6IGZsYWcgPyBzb3VyY2VDaGFydC5jbGllbnRXaWR0aCA6IHNvdXJjZUNoYXJ0LmNsaWVudEhlaWdodCxcclxuICAgICAgICAnb25jbG9uZSc6IGZ1bmN0aW9uIChjbG9uZURvYykge1xyXG4gICAgICAgICAgJChjbG9uZURvYykuZmluZCgnLmNhbnZhc0NvbnRhaW5lcicpLmNzcygnb3ZlcmZsb3cnLCAndmlzaWJsZScpXHJcbiAgICAgICAgICAgIC5maW5kKCcub3JnY2hhcnQ6bm90KFwiLmhpZGRlblwiKTpmaXJzdCcpLmNzcygndHJhbnNmb3JtJywgJycpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgJ29ucmVuZGVyZWQnOiBmdW5jdGlvbiAoY2FudmFzKSB7XHJcbiAgICAgICAgICAkY2hhcnRDb250YWluZXIuZmluZCgnLm1hc2snKS5hZGRDbGFzcygnaGlkZGVuJyk7XHJcbiAgICAgICAgICBpZiAoZXhwb3J0RmlsZWV4dGVuc2lvbi50b0xvd2VyQ2FzZSgpID09PSAncGRmJykge1xyXG4gICAgICAgICAgICB2YXIgZG9jID0ge307XHJcbiAgICAgICAgICAgIHZhciBkb2NXaWR0aCA9IE1hdGguZmxvb3IoY2FudmFzLndpZHRoICogMC4yNjQ2KTtcclxuICAgICAgICAgICAgdmFyIGRvY0hlaWdodCA9IE1hdGguZmxvb3IoY2FudmFzLmhlaWdodCAqIDAuMjY0Nik7XHJcbiAgICAgICAgICAgIGlmIChkb2NXaWR0aCA+IGRvY0hlaWdodCkge1xyXG4gICAgICAgICAgICAgIGRvYyA9IG5ldyBqc1BERignbCcsICdtbScsIFtkb2NXaWR0aCwgZG9jSGVpZ2h0XSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgZG9jID0gbmV3IGpzUERGKCdwJywgJ21tJywgW2RvY0hlaWdodCwgZG9jV2lkdGhdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkb2MuYWRkSW1hZ2UoY2FudmFzLnRvRGF0YVVSTCgpLCAncG5nJywgMCwgMCk7XHJcbiAgICAgICAgICAgIGRvYy5zYXZlKGV4cG9ydEZpbGVuYW1lICsgJy5wZGYnKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBpc1dlYmtpdCA9ICdXZWJraXRBcHBlYXJhbmNlJyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGU7XHJcbiAgICAgICAgICAgIHZhciBpc0ZmID0gISF3aW5kb3cuc2lkZWJhcjtcclxuICAgICAgICAgICAgdmFyIGlzRWRnZSA9IG5hdmlnYXRvci5hcHBOYW1lID09PSAnTWljcm9zb2Z0IEludGVybmV0IEV4cGxvcmVyJyB8fCAobmF2aWdhdG9yLmFwcE5hbWUgPT09IFwiTmV0c2NhcGVcIiAmJiBuYXZpZ2F0b3IuYXBwVmVyc2lvbi5pbmRleE9mKCdFZGdlJykgPiAtMSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoKCFpc1dlYmtpdCAmJiAhaXNGZikgfHwgaXNFZGdlKSB7XHJcbiAgICAgICAgICAgICAgd2luZG93Lm5hdmlnYXRvci5tc1NhdmVCbG9iKGNhbnZhcy5tc1RvQmxvYigpLCBleHBvcnRGaWxlbmFtZSArICcucG5nJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgdmFyIHNlbGVjdG9yID0gJy5vYy1kb3dubG9hZC1idG4nICsgKHRoYXQub3B0aW9ucy5jaGFydENsYXNzICE9PSAnJyA/ICcuJyArIHRoYXQub3B0aW9ucy5jaGFydENsYXNzIDogJycpO1xyXG4gICAgICAgICAgICAgIGlmICghJGNoYXJ0Q29udGFpbmVyLmZpbmQoc2VsZWN0b3IpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgJGNoYXJ0Q29udGFpbmVyLmFwcGVuZCgnPGEgY2xhc3M9XCJvYy1kb3dubG9hZC1idG4nICsgKHRoYXQub3B0aW9ucy5jaGFydENsYXNzICE9PSAnJyA/ICcgJyArIHRoYXQub3B0aW9ucy5jaGFydENsYXNzIDogJycpICsgJ1wiJ1xyXG4gICAgICAgICAgICAgICAgICArICcgZG93bmxvYWQ9XCInICsgZXhwb3J0RmlsZW5hbWUgKyAnLnBuZ1wiPjwvYT4nKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgJGNoYXJ0Q29udGFpbmVyLmZpbmQoc2VsZWN0b3IpLmF0dHIoJ2hyZWYnLCBjYW52YXMudG9EYXRhVVJMKCkpWzBdLmNsaWNrKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkY2hhcnRDb250YWluZXIucmVtb3ZlQ2xhc3MoJ2NhbnZhc0NvbnRhaW5lcicpO1xyXG4gICAgICB9LCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJGNoYXJ0Q29udGFpbmVyLnJlbW92ZUNsYXNzKCdjYW52YXNDb250YWluZXInKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgJC5mbi5vcmdjaGFydCA9IGZ1bmN0aW9uIChvcHRzKSB7XHJcbiAgICByZXR1cm4gbmV3IE9yZ0NoYXJ0KHRoaXMsIG9wdHMpLmluaXQoKTtcclxuICB9O1xyXG5cclxufSkpO1xyXG4iXX0=
